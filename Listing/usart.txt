; generated by Component: ARM Compiler 5.06 update 4 (build 422) Tool: ArmCC [4d3604]
; commandline ArmCC [--list --split_sections --debug -c --asm --interleave -o..\output\usart.o --asm_dir=..\Listing\ --list_dir=..\Listing\ --depend=..\output\usart.d --cpu=Cortex-M4.fp.sp --apcs=interwork -O3 --diag_suppress=9931,870 -I..\APP -I..\drive -I..\Include -I..\Libraries\CMSIS\inc -I..\Libraries\CMSIS\src -I..\Libraries\FWlib\inc -I..\Libraries\FWlib\src -I..\Listing -I..\Output -I..\Project -I..\STemWinLibrary522\Config -I..\STemWinLibrary522\emWinTask -I..\STemWinLibrary522\GUILib -I..\STemWinLibrary522\inc -I..\User -I..\USB\STM32_USB_HOST_Library\Class\HID\inc -I..\USB\STM32_USB_HOST_Library\Class\MSC\src -I..\USB\STM32_USB_HOST_Library\Core\src -I..\USB\USB_APP -I..\USB\STM32_USB_HOST_Library\Class\HID\src -I..\USB\STM32_USB_HOST_Library\Class\MSC\inc -I..\USB\STM32_USB_HOST_Library\Core\inc -I..\USB\STM32_USB_OTG_Driver\inc -I..\FATFS\exfuns -I..\FATFS\src\option -I..\FATFS\src -I..\MALLOC -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_v5\ARM\INC\ST\STM32F4xx -D__UVISION_VERSION=538 -DUSE_STDPERIPH_DRIVER -DSTM32F40XX -DUSE_USB_OTG_FS -DUSE_EMBEDDED_PHY -DUSE_USB_OTG_HS -DSTM32F40XX -W --omf_browse=..\output\usart.crf --no_multibyte_chars ..\drive\usart.c]
                          THUMB

                          AREA ||i.CalHandle||, CODE, READONLY, ALIGN=2

                  CalHandle PROC
;;;529    //校准处理
;;;530    void CalHandle(u8 mode,u8 range,u32 data)
000000  e92d5ff0          PUSH     {r4-r12,lr}
;;;531    {
000004  4615              MOV      r5,r2
;;;532    	if(mode == 0)//测量电压
;;;533    	{
;;;534    		if(range == 0)//低档位低段
;;;535    		{
;;;536    			calflag = 1;
000006  4eff              LDR      r6,|L1.1028|
;;;537    			LOAD_V_SW = 0;
000008  4aff              LDR      r2,|L1.1032|
00000a  2700              MOVS     r7,#0                 ;531
00000c  f04f0801          MOV      r8,#1                 ;536
;;;538    			x1 = Vmon_Load_value;
000010  4cfe              LDR      r4,|L1.1036|
;;;539    			y1 = data;
;;;540    		}else if(range == 1){//低档位高段
;;;541    			
;;;542    			x2 = Vmon_Load_value;
;;;543    			y2 = data;
;;;544    			CalPara.TestLV[0] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;545    			CalPara.OffsetLV[0] = (float)y2 - CalPara.TestLV[0]*(float)x2;
;;;546    			
;;;547    			Flag_DAC_OFF=0;
000012  f8dfc400          LDR      r12,|L1.1044|
000016  f8dfa3f8          LDR      r10,|L1.1040|
;;;548    			calflag = 0;
;;;549    		}else if(range == 2){//高档位低段
;;;550    			calflag = 1;
;;;551    			LOAD_V_SW = 1;
;;;552    			x1 = Vmon_Load_value;
;;;553    			y1 = data/10;
;;;554    		}else if(range == 3){//高档位高段
;;;555    			
;;;556    			x2 = Vmon_Load_value;
;;;557    			y2 = data/10;
;;;558    			CalPara.TestLV[1] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;559    			CalPara.OffsetLV[1] = (float)y2 - CalPara.TestLV[1]*(float)x2;
;;;560    				//参数写进FLASH
;;;561    			Flag_DAC_OFF=0;
;;;562    			calflag = 0;
;;;563    		}else if(range == 4){//电源控制电压和测量1
;;;564    			calflag = 1;
;;;565    			Contr_Voltage = 3500;
;;;566    			Contr_Current = 5000;
;;;567    			OnOff_GPOI_ResetSet(0,1);
;;;568    		}else if(range == 5){//电源控制电压和测量2
;;;569    			x1 = data;
;;;570    			y1 = Contr_Voltage;
;;;571    			x3 = Vmon_POWE_value;
;;;572    			y3 = data;
;;;573    			Contr_Voltage = 10000;
;;;574    			Contr_Current = 5000;
;;;575    		}else if(range == 6){//电源控制电压和测量3
;;;576    			x2 = data;
;;;577    			y2 = Contr_Voltage;
;;;578    			x4 = Vmon_POWE_value;
;;;579    			y4 = data;
;;;580    			
;;;581    			CalPara.SetPV[0] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;582    			CalPara.OffsetSetPV[0] = (float)y2 - CalPara.SetPV[0]*(float)x2;
;;;583    			
;;;584    			CalPara.TestPV[0] = ((float)y4 - (float)y3)/((float)x4 - (float)x3);
;;;585    			CalPara.OffsetPV[0] = (float)y4 - CalPara.TestPV[0]*(float)x4;
;;;586    			
;;;587    			Flag_DAC_OFF=0;
;;;588    			calflag = 0;
;;;589    			Off_GPOI_ResetSet();
;;;590    		}else if(range == 7){//CV控制低档1
;;;591    			LOAD_MODE = 1;
;;;592    			LOAD_V_SW=0;
;;;593    			GPIO_ResetBits(GPIOB,GPIO_Pin_1);//电压档位为低档
;;;594    			calflag = 1;
;;;595    			Contr_Laod = 1000;
00001a  f8df93fc          LDR      r9,|L1.1048|
00001e  f8dc3000          LDR      r3,[r12,#0]           ;547
000022  edd40a05          VLDR     s1,[r4,#0x14]         ;538
000026  ed940a06          VLDR     s0,[r4,#0x18]         ;538
00002a  edd42a0a          VLDR     s5,[r4,#0x28]         ;538
00002e  ed942a09          VLDR     s4,[r4,#0x24]         ;538
000032  f0230308          BIC      r3,r3,#8              ;547
000036  b130              CBZ      r0,|L1.70|
;;;596    			OnOff_GPOI_ResetSet(2,1);
;;;597    		}else if(range == 8){//CV控制低档2
;;;598    			LOAD_MODE = 1;
;;;599    			LOAD_V_SW=0;
;;;600    			GPIO_ResetBits(GPIOB,GPIO_Pin_1);//电压档位为低档
;;;601    			x1 = data;
;;;602    			y1 = Contr_Laod;
;;;603    			Contr_Laod = 20000;
;;;604    //			OnOff_GPOI_ResetSet(2,1);
;;;605    		}else if(range == 9){//CV控制低档3
;;;606    			x2 = data;
;;;607    			y2 = Contr_Laod;
;;;608    			CalPara.SetCV[0] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;609    			CalPara.OffsetCV[0] = (float)y2 - CalPara.SetCV[0]*(float)x2;
;;;610    				//参数写进FLASH
;;;611    			Flag_DAC_OFF=0;
;;;612    			calflag = 0;
;;;613    			Off_GPOI_ResetSet();
;;;614    		}else if(range == 10){//CV控制高档1
;;;615    			LOAD_MODE = 1;
;;;616    			LOAD_V_SW=1;
;;;617    			GPIO_SetBits(GPIOB,GPIO_Pin_1);//电压档位为高档
;;;618    			calflag = 1;
;;;619    			Contr_Laod = 1000;
;;;620    			OnOff_GPOI_ResetSet(2,1);
;;;621    		}else if(range == 11){//CV控制高档2
;;;622    			LOAD_MODE = 1;
;;;623    			LOAD_V_SW=1;
;;;624    			GPIO_SetBits(GPIOB,GPIO_Pin_1);//电压档位为高档
;;;625    			x1 = data/10;
;;;626    			y1 = Contr_Laod;
;;;627    			Contr_Laod = 20000;
;;;628    			OnOff_GPOI_ResetSet(2,1);
;;;629    		}else if(range == 12){//CV控制高档3
;;;630    			x2 = data/10;
;;;631    			y2 = Contr_Laod;
;;;632    			CalPara.SetCV[1] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;633    			CalPara.OffsetCV[1] = (float)y2 - CalPara.SetCV[1]*(float)x2;
;;;634    				//参数写进FLASH
;;;635    			Flag_DAC_OFF=0;
;;;636    			calflag = 0;
;;;637    			Off_GPOI_ResetSet();
;;;638    		}
;;;639    	}else if(mode == 1){
;;;640    		if(range == 0)//负载电流低档位1
;;;641    		{		
;;;642    			LOAD_I_SW = 0;
;;;643    			Contr_Laod = 6000;
;;;644    			calflag = 1;
;;;645    			OnOff_GPOI_ResetSet(2,1);
;;;646    		}
;;;647    		else if(range == 1)//负载电流低档位2
;;;648    		{
;;;649    			LOAD_I_SW = 0;			
;;;650    			x1 = data;
;;;651    			y1 = Contr_Laod;
;;;652    			x4 = Imon_Load_value;
;;;653    			y4 = data;
;;;654    			Contr_Laod = 20000;
;;;655    		}else if(range == 2)//负载电流低档位3
;;;656    		{
;;;657    			LOAD_I_SW = 0;			
;;;658    			x2 = data;
;;;659    			y2 = Contr_Laod;
;;;660    			x5 = Imon_Load_value;
;;;661    			y5 = data;
;;;662    			Contr_Laod = 60000;
;;;663    		}else if(range == 3){//负载电流低档位4
;;;664    			
;;;665    			x3 = data;
;;;666    			y3 = Contr_Laod;
;;;667    			x6 = Imon_Load_value;
;;;668    			y6 = data;
;;;669    			
;;;670    			CalPara.SetLC[0] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;671    			CalPara.OffsetLC[0] = (float)y2 - CalPara.SetLC[0]*(float)x2;
;;;672    			CalPara.SetLC[1] = ((float)y3 - (float)y2)/((float)x3 - (float)x2);
;;;673    			CalPara.OffsetLC[1] = (float)y3 - CalPara.SetLC[1]*(float)x3;
;;;674    			
;;;675    			CalPara.TestLC[0] = ((float)y5 - (float)y4)/((float)x5 - (float)x4);
;;;676    			CalPara.OffsetTestLC[0] = (float)y5 - CalPara.TestLC[0]*(float)x5;
;;;677    			CalPara.TestLC[1] = ((float)y6 - (float)y5)/((float)x6 - (float)x5);
;;;678    			CalPara.OffsetTestLC[1] = (float)y6 - CalPara.TestLC[1]*(float)x6;
;;;679    				
;;;680    			Flag_DAC_OFF =0;
;;;681    			calflag = 0;
;;;682    			Off_GPOI_ResetSet();
;;;683    		}else if(range == 4){//负载电流高档位1
;;;684    			LOAD_I_SW = 1;
;;;685    			GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
000038  f44f6e00          MOV      lr,#0x800
00003c  2801              CMP      r0,#1                 ;639
00003e  d07c              BEQ      |L1.314|
;;;686    			Contr_Laod = 6000;
;;;687    			calflag = 1;
;;;688    			OnOff_GPOI_ResetSet(2,1);
;;;689    		}else if(range == 5){//负载电流高档位2
;;;690    			
;;;691    			LOAD_I_SW = 1;
;;;692    			GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;693    			x1 = data;
;;;694    			y1 = Contr_Laod;
;;;695    			x5 = Imon_Load_value;
;;;696    			y5 = data;
;;;697    			Contr_Laod = 12000;
;;;698    		}else if(range == 6){//负载电流高档位3
;;;699    			
;;;700    			LOAD_I_SW = 1;
;;;701    			GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;702    			x2 = data;
;;;703    			y2 = Contr_Laod;
;;;704    			x6 = Imon_Load_value;
;;;705    			y6 = data;
;;;706    			Contr_Laod = 20000;
;;;707    		}else if(range == 7){//负载电流高档位4
;;;708    			
;;;709    			LOAD_I_SW = 1;
;;;710    			GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;711    			x3 = data;
;;;712    			y3 = Contr_Laod;
;;;713    			x7 = Imon_Load_value;
;;;714    			y7 = data;
;;;715    			Contr_Laod = 40000;
;;;716    		}else if(range == 8){//负载电流高档位5
;;;717    			
;;;718    			x4 = data;
;;;719    			y4 = Contr_Laod;
;;;720    			x8 = Imon_Load_value;
;;;721    			y8 = data;
;;;722    			
;;;723    			CalPara.SetLC[2] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;724    			CalPara.OffsetLC[2] = (float)y2 - CalPara.SetLC[2]*(float)x2;
;;;725    			CalPara.SetLC[3] = ((float)y3 - (float)y2)/((float)x3 - (float)x2);
;;;726    			CalPara.OffsetLC[3] = (float)y3 - CalPara.SetLC[3]*(float)x3;
;;;727    			CalPara.SetLC[4] = ((float)y4 - (float)y3)/((float)x4 - (float)x3);
;;;728    			CalPara.OffsetLC[4] = (float)y4 - CalPara.SetLC[4]*(float)x4;
;;;729    			
;;;730    			CalPara.TestLC[2] = ((float)y6 - (float)y5)/((float)x6 - (float)x5);
;;;731    			CalPara.OffsetTestLC[2] = (float)y6 - CalPara.TestLC[2]*(float)x6;
;;;732    			CalPara.TestLC[3] = ((float)y7 - (float)y6)/((float)x7 - (float)x6);
;;;733    			CalPara.OffsetTestLC[3] = (float)y7 - CalPara.TestLC[3]*(float)x7;
;;;734    			CalPara.TestLC[4] = ((float)y8 - (float)y7)/((float)x8 - (float)x7);
;;;735    			CalPara.OffsetTestLC[4] = (float)y8 - CalPara.TestLC[4]*(float)x8;
;;;736    				
;;;737    			Flag_DAC_OFF =0;
;;;738    			calflag = 0;
;;;739    			Off_GPOI_ResetSet();
;;;740    		}else if(range == 9){//电源电流1
;;;741    			Contr_Voltage = 3500;
;;;742    			Contr_Current = 4000;
;;;743    			calflag = 1;
;;;744    			OnOff_GPOI_ResetSet(0,1);
;;;745    		}else if(range == 10){//电源电流2
;;;746    			
;;;747    			x1 = data;
;;;748    			y1 = Contr_Current;
;;;749    			x3 = Imon_POWE_value;
;;;750    			y3 = data;
;;;751    			Contr_Voltage = 3500;
;;;752    			Contr_Current = 14000;
;;;753    		}else if(range == 11){//电源电流3
;;;754    			
;;;755    			x2 = data;
;;;756    			y2 = Contr_Current;
;;;757    			x4 = Imon_POWE_value;
;;;758    			y4 = data;
;;;759    			
;;;760    			CalPara.SetPC[0] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;761    			CalPara.OffsetPC[0] = (float)y2 - CalPara.SetPC[0]*(float)x2;
;;;762    			
;;;763    			CalPara.TestPC[0] = ((float)y4 - (float)y3)/((float)x4 - (float)x3);
;;;764    			CalPara.OffsetTestPC[0] = (float)y4 - CalPara.TestPC[0]*(float)x4;
;;;765    			
;;;766    			Flag_DAC_OFF=0;
;;;767    			calflag = 0;
;;;768    			Off_GPOI_ResetSet();
;;;769    		}
;;;770    	}else if(mode == 2){
000040  2802              CMP      r0,#2
000042  d07b              BEQ      |L1.316|
000044  e254              B        |L1.1264|
                  |L1.70|
000046  48f5              LDR      r0,|L1.1052|
000048  b1f9              CBZ      r1,|L1.138|
00004a  2901              CMP      r1,#1                 ;540
00004c  d021              BEQ      |L1.146|
00004e  f04f0b0a          MOV      r11,#0xa              ;553
000052  2902              CMP      r1,#2                 ;549
000054  d041              BEQ      |L1.218|
000056  2903              CMP      r1,#3                 ;554
000058  d049              BEQ      |L1.238|
00005a  f2413088          MOV      r0,#0x1388            ;566
00005e  2904              CMP      r1,#4                 ;563
000060  d071              BEQ      |L1.326|
000062  f8dfe3bc          LDR      lr,|L1.1056|
000066  2905              CMP      r1,#5                 ;568
000068  d07b              BEQ      |L1.354|
00006a  2906              CMP      r1,#6                 ;575
00006c  d069              BEQ      |L1.322|
00006e  48ed              LDR      r0,|L1.1060|
000070  2907              CMP      r1,#7                 ;590
000072  d067              BEQ      |L1.324|
000074  2908              CMP      r1,#8                 ;597
000076  d06f              BEQ      |L1.344|
000078  2909              CMP      r1,#9                 ;605
00007a  d06e              BEQ      |L1.346|
00007c  290a              CMP      r1,#0xa               ;614
00007e  d06d              BEQ      |L1.348|
000080  290b              CMP      r1,#0xb               ;621
000082  d06c              BEQ      |L1.350|
000084  290c              CMP      r1,#0xc               ;629
000086  d06b              BEQ      |L1.352|
000088  e232              B        |L1.1264|
                  |L1.138|
00008a  f8868000          STRB     r8,[r6,#0]            ;536
00008e  61d7              STR      r7,[r2,#0x1c]         ;537  ; Run_Control
000090  e3a9              B        |L1.2022|
                  |L1.146|
000092  8800              LDRH     r0,[r0,#0]            ;542  ; Vmon_Load_value
000094  ee015a10          VMOV     s2,r5                 ;544
000098  eeb80a40          VCVT.F32.U32 s0,s0                 ;544
00009c  eef80a60          VCVT.F32.U32 s1,s1                 ;544
0000a0  eeb81a41          VCVT.F32.U32 s2,s2                 ;544
0000a4  e9c40507          STRD     r0,r5,[r4,#0x1c]      ;542
0000a8  ee311a40          VSUB.F32 s2,s2,s0              ;544
0000ac  ee000a10          VMOV     s0,r0                 ;544
0000b0  eeb80a40          VCVT.F32.U32 s0,s0                 ;544
0000b4  ee300a60          VSUB.F32 s0,s0,s1              ;544
0000b8  eec10a00          VDIV.F32 s1,s2,s0              ;544
0000bc  ee000a10          VMOV     s0,r0                 ;545
0000c0  eeb81a40          VCVT.F32.U32 s2,s0                 ;545
0000c4  ee005a10          VMOV     s0,r5                 ;545
0000c8  eeb80a40          VCVT.F32.U32 s0,s0                 ;545
0000cc  edca0a00          VSTR     s1,[r10,#0]           ;544
0000d0  ee000ac1          VMLS.F32 s0,s1,s2              ;545
0000d4  ed8a0a04          VSTR     s0,[r10,#0x10]        ;545
0000d8  e3ab              B        |L1.2098|
                  |L1.218|
0000da  f8868000          STRB     r8,[r6,#0]            ;550
0000de  f8c2801c          STR      r8,[r2,#0x1c]         ;551  ; Run_Control
0000e2  8800              LDRH     r0,[r0,#0]            ;552  ; Vmon_Load_value
0000e4  6160              STR      r0,[r4,#0x14]         ;553  ; x1
0000e6  fbb5f0fb          UDIV     r0,r5,r11             ;553
0000ea  61a0              STR      r0,[r4,#0x18]         ;553  ; y1
0000ec  e200              B        |L1.1264|
                  |L1.238|
0000ee  8800              LDRH     r0,[r0,#0]            ;556  ; Vmon_Load_value
0000f0  fbb5f1fb          UDIV     r1,r5,r11             ;557
0000f4  ee011a10          VMOV     s2,r1                 ;558
0000f8  eeb80a40          VCVT.F32.U32 s0,s0                 ;558
0000fc  eef80a60          VCVT.F32.U32 s1,s1                 ;558
000100  eeb81a41          VCVT.F32.U32 s2,s2                 ;558
000104  e9c40107          STRD     r0,r1,[r4,#0x1c]      ;558
000108  ee311a40          VSUB.F32 s2,s2,s0              ;558
00010c  ee000a10          VMOV     s0,r0                 ;558
000110  eeb80a40          VCVT.F32.U32 s0,s0                 ;558
000114  ee300a60          VSUB.F32 s0,s0,s1              ;558
000118  eec10a00          VDIV.F32 s1,s2,s0              ;558
00011c  ee000a10          VMOV     s0,r0                 ;559
000120  eeb81a40          VCVT.F32.U32 s2,s0                 ;559
000124  ee001a10          VMOV     s0,r1                 ;559
000128  eeb80a40          VCVT.F32.U32 s0,s0                 ;559
00012c  edca0a01          VSTR     s1,[r10,#4]           ;558
000130  ee000ac1          VMLS.F32 s0,s1,s2              ;559
000134  ed8a0a05          VSTR     s0,[r10,#0x14]        ;559
000138  e37b              B        |L1.2098|
                  |L1.314|
00013a  e0ea              B        |L1.786|
                  |L1.316|
00013c  e32a              B        |L1.1940|
00013e  e002              B        |L1.326|
000140  e00f              B        |L1.354|
                  |L1.322|
000142  e01b              B        |L1.380|
                  |L1.324|
000144  e064              B        |L1.528|
                  |L1.326|
000146  f8868000          STRB     r8,[r6,#0]            ;564
00014a  49b7              LDR      r1,|L1.1064|
00014c  f64052ac          MOV      r2,#0xdac             ;565
000150  800a              STRH     r2,[r1,#0]            ;565
000152  49b6              LDR      r1,|L1.1068|
000154  8008              STRH     r0,[r1,#0]            ;566
000156  e2c3              B        |L1.1760|
                  |L1.344|
000158  e061              B        |L1.542|
                  |L1.346|
00015a  e06c              B        |L1.566|
                  |L1.348|
00015c  e090              B        |L1.640|
                  |L1.350|
00015e  e09f              B        |L1.672|
                  |L1.352|
000160  e0b0              B        |L1.708|
                  |L1.354|
000162  49b1              LDR      r1,|L1.1064|
000164  6165              STR      r5,[r4,#0x14]         ;570  ; x1
000166  880a              LDRH     r2,[r1,#0]            ;570  ; Contr_Voltage
000168  61a2              STR      r2,[r4,#0x18]         ;571  ; y1
00016a  f8be2000          LDRH     r2,[lr,#0]            ;571  ; Vmon_POWE_value
00016e  e9c42509          STRD     r2,r5,[r4,#0x24]      ;571
000172  f2427210          MOV      r2,#0x2710            ;573
000176  800a              STRH     r2,[r1,#0]            ;573
000178  49ac              LDR      r1,|L1.1068|
00017a  e2c0              B        |L1.1790|
                  |L1.380|
00017c  48aa              LDR      r0,|L1.1064|
00017e  61e5              STR      r5,[r4,#0x1c]         ;577  ; x2
000180  8801              LDRH     r1,[r0,#0]            ;577  ; Contr_Voltage
000182  6221              STR      r1,[r4,#0x20]         ;578  ; y2
000184  f8be0000          LDRH     r0,[lr,#0]            ;578  ; Vmon_POWE_value
000188  ee011a10          VMOV     s2,r1                 ;581
00018c  eeb80a40          VCVT.F32.U32 s0,s0                 ;581
000190  eef80a60          VCVT.F32.U32 s1,s1                 ;581
000194  eeb81a41          VCVT.F32.U32 s2,s2                 ;581
000198  e9c4050b          STRD     r0,r5,[r4,#0x2c]      ;578
00019c  ee311a40          VSUB.F32 s2,s2,s0              ;581
0001a0  ee005a10          VMOV     s0,r5                 ;581
0001a4  4652              MOV      r2,r10                ;581
0001a6  eeb80a40          VCVT.F32.U32 s0,s0                 ;581
0001aa  ee300a60          VSUB.F32 s0,s0,s1              ;581
0001ae  eec10a00          VDIV.F32 s1,s2,s0              ;581
0001b2  ee005a10          VMOV     s0,r5                 ;582
0001b6  eeb81a40          VCVT.F32.U32 s2,s0                 ;582
0001ba  ee001a10          VMOV     s0,r1                 ;582
0001be  eeb80a40          VCVT.F32.U32 s0,s0                 ;582
0001c2  edca0a02          VSTR     s1,[r10,#8]           ;581
0001c6  ee000ac1          VMLS.F32 s0,s1,s2              ;582
0001ca  eef80a62          VCVT.F32.U32 s1,s5                 ;584
0001ce  ed8a0a06          VSTR     s0,[r10,#0x18]        ;582
0001d2  ee005a10          VMOV     s0,r5                 ;584
0001d6  eeb80a40          VCVT.F32.U32 s0,s0                 ;584
0001da  ee301a60          VSUB.F32 s2,s0,s1              ;584
0001de  ee000a10          VMOV     s0,r0                 ;584
0001e2  eef80a42          VCVT.F32.U32 s1,s4                 ;584
0001e6  eeb80a40          VCVT.F32.U32 s0,s0                 ;584
0001ea  ee300a60          VSUB.F32 s0,s0,s1              ;584
0001ee  eec10a00          VDIV.F32 s1,s2,s0              ;584
0001f2  ee000a10          VMOV     s0,r0                 ;585
0001f6  eeb81a40          VCVT.F32.U32 s2,s0                 ;585
0001fa  ee005a10          VMOV     s0,r5                 ;585
0001fe  eeb80a40          VCVT.F32.U32 s0,s0                 ;585
000202  edc20a03          VSTR     s1,[r2,#0xc]          ;584
000206  ee000ac1          VMLS.F32 s0,s1,s2              ;585
00020a  ed8a0a07          VSTR     s0,[r10,#0x1c]        ;585
00020e  e257              B        |L1.1728|
                  |L1.528|
000210  f8c28018          STR      r8,[r2,#0x18]         ;591  ; Run_Control
000214  61d7              STR      r7,[r2,#0x1c]         ;592  ; Run_Control
000216  2102              MOVS     r1,#2                 ;593
000218  f7fffffe          BL       GPIO_ResetBits
00021c  e037              B        |L1.654|
                  |L1.542|
00021e  f8c28018          STR      r8,[r2,#0x18]         ;598  ; Run_Control
000222  61d7              STR      r7,[r2,#0x1c]         ;599  ; Run_Control
000224  2102              MOVS     r1,#2                 ;600
000226  f7fffffe          BL       GPIO_ResetBits
00022a  6165              STR      r5,[r4,#0x14]         ;602  ; x1
00022c  f8b91000          LDRH     r1,[r9,#0]            ;602  ; Contr_Laod
000230  4648              MOV      r0,r9                 ;602
000232  61a1              STR      r1,[r4,#0x18]         ;603  ; y1
000234  e17e              B        |L1.1332|
                  |L1.566|
000236  61e5              STR      r5,[r4,#0x1c]         ;607  ; x2
000238  f8b90000          LDRH     r0,[r9,#0]            ;607  ; Contr_Laod
00023c  eeb80a40          VCVT.F32.U32 s0,s0                 ;608
000240  ee010a10          VMOV     s2,r0                 ;608
000244  eef80a60          VCVT.F32.U32 s1,s1                 ;608
000248  6220              STR      r0,[r4,#0x20]         ;608  ; y2
00024a  eeb81a41          VCVT.F32.U32 s2,s2                 ;608
00024e  ee311a40          VSUB.F32 s2,s2,s0              ;608
000252  ee005a10          VMOV     s0,r5                 ;608
000256  eeb80a40          VCVT.F32.U32 s0,s0                 ;608
00025a  ee300a60          VSUB.F32 s0,s0,s1              ;608
00025e  eec10a00          VDIV.F32 s1,s2,s0              ;608
000262  ee005a10          VMOV     s0,r5                 ;609
000266  eeb81a40          VCVT.F32.U32 s2,s0                 ;609
00026a  ee000a10          VMOV     s0,r0                 ;609
00026e  eeb80a40          VCVT.F32.U32 s0,s0                 ;609
000272  edca0a0d          VSTR     s1,[r10,#0x34]        ;608
000276  ee000ac1          VMLS.F32 s0,s1,s2              ;609
00027a  ed8a0a1b          VSTR     s0,[r10,#0x6c]        ;609
00027e  e21f              B        |L1.1728|
                  |L1.640|
000280  f8c28018          STR      r8,[r2,#0x18]         ;615  ; Run_Control
000284  f8c2801c          STR      r8,[r2,#0x1c]         ;616  ; Run_Control
000288  2102              MOVS     r1,#2                 ;617
00028a  f7fffffe          BL       GPIO_SetBits
                  |L1.654|
00028e  f8868000          STRB     r8,[r6,#0]            ;594
000292  f44f707a          MOV      r0,#0x3e8             ;595
000296  f8a90000          STRH     r0,[r9,#0]            ;595
                  |L1.666|
00029a  2101              MOVS     r1,#1                 ;596
00029c  2002              MOVS     r0,#2                 ;596
00029e  e125              B        |L1.1260|
                  |L1.672|
0002a0  f8c28018          STR      r8,[r2,#0x18]         ;622  ; Run_Control
0002a4  f8c2801c          STR      r8,[r2,#0x1c]         ;623  ; Run_Control
0002a8  2102              MOVS     r1,#2                 ;624
0002aa  f7fffffe          BL       GPIO_SetBits
0002ae  fbb5f0fb          UDIV     r0,r5,r11             ;625
0002b2  6160              STR      r0,[r4,#0x14]         ;626  ; x1
0002b4  f8b91000          LDRH     r1,[r9,#0]            ;626  ; Contr_Laod
0002b8  61a1              STR      r1,[r4,#0x18]         ;627  ; y1
0002ba  f6446120          MOV      r1,#0x4e20            ;627
0002be  f8a91000          STRH     r1,[r9,#0]            ;627
0002c2  e7ea              B        |L1.666|
                  |L1.708|
0002c4  fbb5f1fb          UDIV     r1,r5,r11             ;630
0002c8  61e1              STR      r1,[r4,#0x1c]         ;631  ; x2
0002ca  f8b90000          LDRH     r0,[r9,#0]            ;631  ; Contr_Laod
0002ce  eeb80a40          VCVT.F32.U32 s0,s0                 ;632
0002d2  ee010a10          VMOV     s2,r0                 ;632
0002d6  eef80a60          VCVT.F32.U32 s1,s1                 ;632
0002da  6220              STR      r0,[r4,#0x20]         ;632  ; y2
0002dc  eeb81a41          VCVT.F32.U32 s2,s2                 ;632
0002e0  ee311a40          VSUB.F32 s2,s2,s0              ;632
0002e4  ee001a10          VMOV     s0,r1                 ;632
0002e8  eeb80a40          VCVT.F32.U32 s0,s0                 ;632
0002ec  ee300a60          VSUB.F32 s0,s0,s1              ;632
0002f0  eec10a00          VDIV.F32 s1,s2,s0              ;632
0002f4  ee001a10          VMOV     s0,r1                 ;633
0002f8  eeb81a40          VCVT.F32.U32 s2,s0                 ;633
0002fc  ee000a10          VMOV     s0,r0                 ;633
000300  eeb80a40          VCVT.F32.U32 s0,s0                 ;633
000304  edca0a0e          VSTR     s1,[r10,#0x38]        ;632
000308  ee000ac1          VMLS.F32 s0,s1,s2              ;633
00030c  ed8a0a1c          VSTR     s0,[r10,#0x70]        ;633
000310  e1d6              B        |L1.1728|
                  |L1.786|
000312  b311              CBZ      r1,|L1.858|
000314  f8dfb118          LDR      r11,|L1.1072|
000318  2901              CMP      r1,#1                 ;647
00031a  d020              BEQ      |L1.862|
00031c  2902              CMP      r1,#2                 ;655
00031e  d029              BEQ      |L1.884|
000320  483a              LDR      r0,|L1.1036|
000322  2903              CMP      r1,#3                 ;663
000324  edd03a0e          VLDR     s7,[r0,#0x38]         ;538
000328  ed903a0d          VLDR     s6,[r0,#0x34]         ;538
00032c  edd01a08          VLDR     s3,[r0,#0x20]         ;538
000330  ed901a07          VLDR     s2,[r0,#0x1c]         ;538
000334  d02c              BEQ      |L1.912|
000336  2904              CMP      r1,#4                 ;683
000338  d07e              BEQ      |L1.1080|
00033a  2905              CMP      r1,#5                 ;689
00033c  d07d              BEQ      |L1.1082|
00033e  2906              CMP      r1,#6                 ;698
000340  d07c              BEQ      |L1.1084|
000342  2907              CMP      r1,#7                 ;707
000344  d07b              BEQ      |L1.1086|
000346  2908              CMP      r1,#8                 ;716
000348  d07a              BEQ      |L1.1088|
00034a  2909              CMP      r1,#9                 ;740
00034c  d079              BEQ      |L1.1090|
00034e  4839              LDR      r0,|L1.1076|
000350  290a              CMP      r1,#0xa               ;745
000352  d077              BEQ      |L1.1092|
000354  290b              CMP      r1,#0xb               ;753
000356  d076              BEQ      |L1.1094|
000358  e345              B        |L1.2534|
                  |L1.858|
00035a  6217              STR      r7,[r2,#0x20]         ;642  ; Run_Control
00035c  e0bf              B        |L1.1246|
                  |L1.862|
00035e  6217              STR      r7,[r2,#0x20]         ;649  ; Run_Control
000360  6165              STR      r5,[r4,#0x14]         ;651  ; x1
000362  f8b91000          LDRH     r1,[r9,#0]            ;651  ; Contr_Laod
000366  4648              MOV      r0,r9                 ;651
000368  61a1              STR      r1,[r4,#0x18]         ;652  ; y1
00036a  f8bb1000          LDRH     r1,[r11,#0]           ;652  ; Imon_Load_value
00036e  e9c4150b          STRD     r1,r5,[r4,#0x2c]      ;652
000372  e0df              B        |L1.1332|
                  |L1.884|
000374  6217              STR      r7,[r2,#0x20]         ;657  ; Run_Control
000376  61e5              STR      r5,[r4,#0x1c]         ;659  ; x2
000378  f8b91000          LDRH     r1,[r9,#0]            ;659  ; Contr_Laod
00037c  4648              MOV      r0,r9                 ;659
00037e  6221              STR      r1,[r4,#0x20]         ;660  ; y2
000380  f8bb1000          LDRH     r1,[r11,#0]           ;660  ; Imon_Load_value
000384  e9c4150d          STRD     r1,r5,[r4,#0x34]      ;660
000388  f64e2160          MOV      r1,#0xea60            ;662
                  |L1.908|
00038c  8001              STRH     r1,[r0,#0]            ;654
00038e  e32a              B        |L1.2534|
                  |L1.912|
000390  6265              STR      r5,[r4,#0x24]         ;666  ; x3
000392  f8b92000          LDRH     r2,[r9,#0]            ;666  ; Contr_Laod
000396  62a2              STR      r2,[r4,#0x28]         ;667  ; y3
000398  f8bb1000          LDRH     r1,[r11,#0]           ;667  ; Imon_Load_value
00039c  eeb82a61          VCVT.F32.U32 s4,s3                 ;670
0003a0  eeb80a40          VCVT.F32.U32 s0,s0                 ;670
0003a4  eef80a60          VCVT.F32.U32 s1,s1                 ;670
0003a8  e9c4150f          STRD     r1,r5,[r4,#0x3c]      ;670
0003ac  ee322a40          VSUB.F32 s4,s4,s0              ;670
0003b0  eeb80a41          VCVT.F32.U32 s0,s2                 ;670
0003b4  4650              MOV      r0,r10                ;670
0003b6  ee700a60          VSUB.F32 s1,s0,s1              ;670
0003ba  ee820a20          VDIV.F32 s0,s4,s1              ;670
0003be  eeb82a41          VCVT.F32.U32 s4,s2                 ;671
0003c2  eef80a61          VCVT.F32.U32 s1,s3                 ;671
0003c6  ed8a0a08          VSTR     s0,[r10,#0x20]        ;670
0003ca  ee400a42          VMLS.F32 s1,s0,s4              ;671
0003ce  ee002a10          VMOV     s0,r2                 ;672
0003d2  eeb80a40          VCVT.F32.U32 s0,s0                 ;672
0003d6  edca0a16          VSTR     s1,[r10,#0x58]        ;671
0003da  eef80a61          VCVT.F32.U32 s1,s3                 ;672
0003de  ee701a60          VSUB.F32 s3,s0,s1              ;672
0003e2  ee005a10          VMOV     s0,r5                 ;672
0003e6  eef80a41          VCVT.F32.U32 s1,s2                 ;672
0003ea  eeb80a40          VCVT.F32.U32 s0,s0                 ;672
0003ee  ee300a60          VSUB.F32 s0,s0,s1              ;672
0003f2  eec10a80          VDIV.F32 s1,s3,s0              ;672
0003f6  ee005a10          VMOV     s0,r5                 ;673
0003fa  eeb81a40          VCVT.F32.U32 s2,s0                 ;673
0003fe  edca0a09          VSTR     s1,[r10,#0x24]        ;672
000402  e021              B        |L1.1096|
                  |L1.1028|
                          DCD      calflag
                  |L1.1032|
                          DCD      Run_Control
                  |L1.1036|
                          DCD      ||.data||
                  |L1.1040|
                          DCD      CalPara
                  |L1.1044|
                          DCD      flagB
                  |L1.1048|
                          DCD      Contr_Laod
                  |L1.1052|
                          DCD      Vmon_Load_value
                  |L1.1056|
                          DCD      Vmon_POWE_value
                  |L1.1060|
                          DCD      0x40020400
                  |L1.1064|
                          DCD      Contr_Voltage
                  |L1.1068|
                          DCD      Contr_Current
                  |L1.1072|
                          DCD      Imon_Load_value
                  |L1.1076|
                          DCD      Imon_POWE_value
                  |L1.1080|
000438  e04b              B        |L1.1234|
                  |L1.1082|
00043a  e05a              B        |L1.1266|
                  |L1.1084|
00043c  e06b              B        |L1.1302|
                  |L1.1086|
00043e  e07c              B        |L1.1338|
                  |L1.1088|
000440  e08d              B        |L1.1374|
                  |L1.1090|
000442  e143              B        |L1.1740|
                  |L1.1092|
000444  e14f              B        |L1.1766|
                  |L1.1094|
000446  e15c              B        |L1.1794|
                  |L1.1096|
000448  ee002a10          VMOV     s0,r2                 ;673
00044c  eeb80a40          VCVT.F32.U32 s0,s0                 ;673
000450  ee000ac1          VMLS.F32 s0,s1,s2              ;673
000454  eef80a63          VCVT.F32.U32 s1,s7                 ;675
000458  eeb81a43          VCVT.F32.U32 s2,s6                 ;675
00045c  ed800a17          VSTR     s0,[r0,#0x5c]         ;673
000460  ed940a0c          VLDR     s0,[r4,#0x30]         ;675
000464  eeb80a40          VCVT.F32.U32 s0,s0                 ;675
000468  ee700ac0          VSUB.F32 s1,s1,s0              ;675
00046c  ed940a0b          VLDR     s0,[r4,#0x2c]         ;675
000470  eeb80a40          VCVT.F32.U32 s0,s0                 ;675
000474  ee311a40          VSUB.F32 s2,s2,s0              ;675
000478  ee800a81          VDIV.F32 s0,s1,s2              ;675
00047c  eeb81a43          VCVT.F32.U32 s2,s6                 ;676
000480  eef80a63          VCVT.F32.U32 s1,s7                 ;676
000484  ed800a0f          VSTR     s0,[r0,#0x3c]         ;675
000488  ee400a41          VMLS.F32 s1,s0,s2              ;676
00048c  ee005a10          VMOV     s0,r5                 ;677
000490  eeb80a40          VCVT.F32.U32 s0,s0                 ;677
000494  edc00a1d          VSTR     s1,[r0,#0x74]         ;676
000498  eef80a63          VCVT.F32.U32 s1,s7                 ;677
00049c  ee301a60          VSUB.F32 s2,s0,s1              ;677
0004a0  ee001a10          VMOV     s0,r1                 ;677
0004a4  eef80a43          VCVT.F32.U32 s1,s6                 ;677
0004a8  eeb80a40          VCVT.F32.U32 s0,s0                 ;677
0004ac  ee300a60          VSUB.F32 s0,s0,s1              ;677
0004b0  eec10a00          VDIV.F32 s1,s2,s0              ;677
0004b4  ee001a10          VMOV     s0,r1                 ;678
0004b8  eeb81a40          VCVT.F32.U32 s2,s0                 ;678
0004bc  ee005a10          VMOV     s0,r5                 ;678
0004c0  eeb80a40          VCVT.F32.U32 s0,s0                 ;678
0004c4  edc00a10          VSTR     s1,[r0,#0x40]         ;677
0004c8  ee000ac1          VMLS.F32 s0,s1,s2              ;678
0004cc  ed8a0a1e          VSTR     s0,[r10,#0x78]        ;678
0004d0  e0f6              B        |L1.1728|
                  |L1.1234|
0004d2  f8c28020          STR      r8,[r2,#0x20]         ;684  ; Run_Control
0004d6  4671              MOV      r1,lr                 ;685
0004d8  48f8              LDR      r0,|L1.2236|
0004da  f7fffffe          BL       GPIO_ResetBits
                  |L1.1246|
0004de  f2417070          MOV      r0,#0x1770            ;643
0004e2  f8a90000          STRH     r0,[r9,#0]            ;643
0004e6  f8868000          STRB     r8,[r6,#0]            ;644
0004ea  e6d6              B        |L1.666|
                  |L1.1260|
0004ec  f7fffffe          BL       OnOff_GPOI_ResetSet
                  |L1.1264|
0004f0  e279              B        |L1.2534|
                  |L1.1266|
0004f2  f8c28020          STR      r8,[r2,#0x20]         ;691  ; Run_Control
0004f6  4671              MOV      r1,lr                 ;692
0004f8  48f0              LDR      r0,|L1.2236|
0004fa  f7fffffe          BL       GPIO_ResetBits
0004fe  6165              STR      r5,[r4,#0x14]         ;694  ; x1
000500  f8b91000          LDRH     r1,[r9,#0]            ;694  ; Contr_Laod
000504  4648              MOV      r0,r9                 ;694
000506  61a1              STR      r1,[r4,#0x18]         ;695  ; y1
000508  f8bb1000          LDRH     r1,[r11,#0]           ;695  ; Imon_Load_value
00050c  e9c4150d          STRD     r1,r5,[r4,#0x34]      ;695
000510  f64261e0          MOV      r1,#0x2ee0            ;697
000514  e73a              B        |L1.908|
                  |L1.1302|
000516  f8c28020          STR      r8,[r2,#0x20]         ;700  ; Run_Control
00051a  4671              MOV      r1,lr                 ;701
00051c  48e7              LDR      r0,|L1.2236|
00051e  f7fffffe          BL       GPIO_ResetBits
000522  61e5              STR      r5,[r4,#0x1c]         ;703  ; x2
000524  f8b91000          LDRH     r1,[r9,#0]            ;703  ; Contr_Laod
000528  4648              MOV      r0,r9                 ;703
00052a  6221              STR      r1,[r4,#0x20]         ;704  ; y2
00052c  f8bb1000          LDRH     r1,[r11,#0]           ;704  ; Imon_Load_value
000530  e9c4150f          STRD     r1,r5,[r4,#0x3c]      ;704
                  |L1.1332|
000534  f6446120          MOV      r1,#0x4e20            ;603
000538  e728              B        |L1.908|
                  |L1.1338|
00053a  f8c28020          STR      r8,[r2,#0x20]         ;709  ; Run_Control
00053e  4671              MOV      r1,lr                 ;710
000540  48de              LDR      r0,|L1.2236|
000542  f7fffffe          BL       GPIO_ResetBits
000546  6265              STR      r5,[r4,#0x24]         ;712  ; x3
000548  f8b91000          LDRH     r1,[r9,#0]            ;712  ; Contr_Laod
00054c  4648              MOV      r0,r9                 ;712
00054e  62a1              STR      r1,[r4,#0x28]         ;713  ; y3
000550  f8bb1000          LDRH     r1,[r11,#0]           ;713  ; Imon_Load_value
000554  e9c41511          STRD     r1,r5,[r4,#0x44]      ;713
000558  f6494140          MOV      r1,#0x9c40            ;715
00055c  e716              B        |L1.908|
                  |L1.1374|
00055e  62e5              STR      r5,[r4,#0x2c]         ;719  ; x4
000560  f8b92000          LDRH     r2,[r9,#0]            ;719  ; Contr_Laod
000564  6322              STR      r2,[r4,#0x30]         ;720  ; y4
000566  f8bb1000          LDRH     r1,[r11,#0]           ;720  ; Imon_Load_value
00056a  eeb84a61          VCVT.F32.U32 s8,s3                 ;723
00056e  eeb80a40          VCVT.F32.U32 s0,s0                 ;723
000572  eef80a60          VCVT.F32.U32 s1,s1                 ;723
000576  e9c41513          STRD     r1,r5,[r4,#0x4c]      ;723
00057a  ee344a40          VSUB.F32 s8,s8,s0              ;723
00057e  eeb80a41          VCVT.F32.U32 s0,s2                 ;723
000582  4650              MOV      r0,r10                ;723
000584  ee700a60          VSUB.F32 s1,s0,s1              ;723
000588  ee840a20          VDIV.F32 s0,s8,s1              ;723
00058c  eeb84a41          VCVT.F32.U32 s8,s2                 ;724
000590  eef80a61          VCVT.F32.U32 s1,s3                 ;724
000594  eeb81a41          VCVT.F32.U32 s2,s2                 ;725
000598  ed8a0a0a          VSTR     s0,[r10,#0x28]        ;723
00059c  ee400a44          VMLS.F32 s1,s0,s8              ;724
0005a0  eeb80a62          VCVT.F32.U32 s0,s5                 ;725
0005a4  edca0a18          VSTR     s1,[r10,#0x60]        ;724
0005a8  eef80a61          VCVT.F32.U32 s1,s3                 ;725
0005ac  ee700a60          VSUB.F32 s1,s0,s1              ;725
0005b0  eeb80a42          VCVT.F32.U32 s0,s4                 ;725
0005b4  ee301a41          VSUB.F32 s2,s0,s2              ;725
0005b8  ee800a81          VDIV.F32 s0,s1,s2              ;725
0005bc  eeb81a42          VCVT.F32.U32 s2,s4                 ;726
0005c0  eef80a62          VCVT.F32.U32 s1,s5                 ;726
0005c4  ed8a0a0b          VSTR     s0,[r10,#0x2c]        ;725
0005c8  ee400a41          VMLS.F32 s1,s0,s2              ;726
0005cc  ee002a10          VMOV     s0,r2                 ;727
0005d0  eeb80a40          VCVT.F32.U32 s0,s0                 ;727
0005d4  edc00a19          VSTR     s1,[r0,#0x64]         ;726
0005d8  eef80a62          VCVT.F32.U32 s1,s5                 ;727
0005dc  ee301a60          VSUB.F32 s2,s0,s1              ;727
0005e0  ee005a10          VMOV     s0,r5                 ;727
0005e4  eef80a42          VCVT.F32.U32 s1,s4                 ;727
0005e8  eeb82a43          VCVT.F32.U32 s4,s6                 ;730
0005ec  eeb80a40          VCVT.F32.U32 s0,s0                 ;727
0005f0  ee300a60          VSUB.F32 s0,s0,s1              ;727
0005f4  eec10a00          VDIV.F32 s1,s2,s0              ;727
0005f8  ee005a10          VMOV     s0,r5                 ;728
0005fc  eeb81a40          VCVT.F32.U32 s2,s0                 ;728
000600  ee002a10          VMOV     s0,r2                 ;728
000604  eeb80a40          VCVT.F32.U32 s0,s0                 ;728
000608  edc00a0c          VSTR     s1,[r0,#0x30]         ;727
00060c  ee000ac1          VMLS.F32 s0,s1,s2              ;728
000610  eeb81a63          VCVT.F32.U32 s2,s7                 ;730
000614  ed800a1a          VSTR     s0,[r0,#0x68]         ;728
000618  ed940a10          VLDR     s0,[r4,#0x40]         ;730
00061c  eef80a40          VCVT.F32.U32 s1,s0                 ;730
000620  ee701ac1          VSUB.F32 s3,s1,s2              ;730
000624  edd40a0f          VLDR     s1,[r4,#0x3c]         ;730
000628  eeb81a60          VCVT.F32.U32 s2,s1                 ;730
00062c  ee312a42          VSUB.F32 s4,s2,s4              ;730
000630  ee811a82          VDIV.F32 s2,s3,s4              ;730
000634  eeb82a60          VCVT.F32.U32 s4,s1                 ;731
000638  eef81a40          VCVT.F32.U32 s3,s0                 ;731
00063c  eeb80a40          VCVT.F32.U32 s0,s0                 ;732
000640  eef80a60          VCVT.F32.U32 s1,s1                 ;732
000644  ed801a11          VSTR     s2,[r0,#0x44]         ;730
000648  ee411a42          VMLS.F32 s3,s2,s4              ;731
00064c  edc01a1f          VSTR     s3,[r0,#0x7c]         ;731
000650  ed941a12          VLDR     s2,[r4,#0x48]         ;732
000654  eef81a41          VCVT.F32.U32 s3,s2                 ;732
000658  ee711ac0          VSUB.F32 s3,s3,s0              ;732
00065c  ed940a11          VLDR     s0,[r4,#0x44]         ;732
000660  eeb82a40          VCVT.F32.U32 s4,s0                 ;732
000664  ee322a60          VSUB.F32 s4,s4,s1              ;732
000668  eec10a82          VDIV.F32 s1,s3,s4              ;732
00066c  eeb82a40          VCVT.F32.U32 s4,s0                 ;733
000670  eef81a41          VCVT.F32.U32 s3,s2                 ;733
000674  eeb81a41          VCVT.F32.U32 s2,s2                 ;734
000678  edc00a12          VSTR     s1,[r0,#0x48]         ;732
00067c  ee401ac2          VMLS.F32 s3,s1,s4              ;733
000680  ee005a90          VMOV     s1,r5                 ;734
000684  eef80a60          VCVT.F32.U32 s1,s1                 ;734
000688  edc01a20          VSTR     s3,[r0,#0x80]         ;733
00068c  ee301ac1          VSUB.F32 s2,s1,s2              ;734
000690  ee001a90          VMOV     s1,r1                 ;734
000694  eeb80a40          VCVT.F32.U32 s0,s0                 ;734
000698  eef80a60          VCVT.F32.U32 s1,s1                 ;734
00069c  ee300ac0          VSUB.F32 s0,s1,s0              ;734
0006a0  eec10a00          VDIV.F32 s1,s2,s0              ;734
0006a4  ee001a10          VMOV     s0,r1                 ;735
0006a8  eeb81a40          VCVT.F32.U32 s2,s0                 ;735
0006ac  ee005a10          VMOV     s0,r5                 ;735
0006b0  eeb80a40          VCVT.F32.U32 s0,s0                 ;735
0006b4  edc00a13          VSTR     s1,[r0,#0x4c]         ;734
0006b8  ee000ac1          VMLS.F32 s0,s1,s2              ;735
0006bc  ed8a0a21          VSTR     s0,[r10,#0x84]        ;735
                  |L1.1728|
0006c0  f8cc3000          STR      r3,[r12,#0]           ;681  ; flagB
0006c4  7037              STRB     r7,[r6,#0]            ;681
0006c6  f7fffffe          BL       Off_GPOI_ResetSet
0006ca  e18c              B        |L1.2534|
                  |L1.1740|
0006cc  497c              LDR      r1,|L1.2240|
0006ce  f64050ac          MOV      r0,#0xdac             ;741
0006d2  8008              STRH     r0,[r1,#0]            ;741
0006d4  487b              LDR      r0,|L1.2244|
0006d6  f44f617a          MOV      r1,#0xfa0             ;742
0006da  8001              STRH     r1,[r0,#0]            ;742
0006dc  f8868000          STRB     r8,[r6,#0]            ;743
                  |L1.1760|
0006e0  2101              MOVS     r1,#1                 ;567
0006e2  2000              MOVS     r0,#0                 ;567
0006e4  e702              B        |L1.1260|
                  |L1.1766|
0006e6  4977              LDR      r1,|L1.2244|
0006e8  6165              STR      r5,[r4,#0x14]         ;748  ; x1
0006ea  880a              LDRH     r2,[r1,#0]            ;748  ; Contr_Current
0006ec  61a2              STR      r2,[r4,#0x18]         ;749  ; y1
0006ee  8800              LDRH     r0,[r0,#0]            ;749  ; Imon_POWE_value
0006f0  e9c40509          STRD     r0,r5,[r4,#0x24]      ;749
0006f4  4a72              LDR      r2,|L1.2240|
0006f6  f64050ac          MOV      r0,#0xdac             ;751
0006fa  8010              STRH     r0,[r2,#0]            ;751
0006fc  0080              LSLS     r0,r0,#2              ;752
                  |L1.1790|
0006fe  8008              STRH     r0,[r1,#0]            ;752
000700  e171              B        |L1.2534|
                  |L1.1794|
000702  4970              LDR      r1,|L1.2244|
000704  61e5              STR      r5,[r4,#0x1c]         ;756  ; x2
000706  8809              LDRH     r1,[r1,#0]            ;756  ; Contr_Current
000708  6221              STR      r1,[r4,#0x20]         ;757  ; y2
00070a  8800              LDRH     r0,[r0,#0]            ;757  ; Imon_POWE_value
00070c  ee011a10          VMOV     s2,r1                 ;760
000710  eeb80a40          VCVT.F32.U32 s0,s0                 ;760
000714  eef80a60          VCVT.F32.U32 s1,s1                 ;760
000718  eeb81a41          VCVT.F32.U32 s2,s2                 ;760
00071c  e9c4050b          STRD     r0,r5,[r4,#0x2c]      ;757
000720  ee311a40          VSUB.F32 s2,s2,s0              ;760
000724  ee005a10          VMOV     s0,r5                 ;760
000728  4652              MOV      r2,r10                ;760
00072a  eeb80a40          VCVT.F32.U32 s0,s0                 ;760
00072e  ee300a60          VSUB.F32 s0,s0,s1              ;760
000732  eec10a00          VDIV.F32 s1,s2,s0              ;760
000736  ee005a10          VMOV     s0,r5                 ;761
00073a  eeb81a40          VCVT.F32.U32 s2,s0                 ;761
00073e  ee001a10          VMOV     s0,r1                 ;761
000742  eeb80a40          VCVT.F32.U32 s0,s0                 ;761
000746  edca0a14          VSTR     s1,[r10,#0x50]        ;760
00074a  ee000ac1          VMLS.F32 s0,s1,s2              ;761
00074e  eef80a62          VCVT.F32.U32 s1,s5                 ;763
000752  ed8a0a22          VSTR     s0,[r10,#0x88]        ;761
000756  ee005a10          VMOV     s0,r5                 ;763
00075a  eeb80a40          VCVT.F32.U32 s0,s0                 ;763
00075e  ee301a60          VSUB.F32 s2,s0,s1              ;763
000762  ee000a10          VMOV     s0,r0                 ;763
000766  eef80a42          VCVT.F32.U32 s1,s4                 ;763
00076a  eeb80a40          VCVT.F32.U32 s0,s0                 ;763
00076e  ee300a60          VSUB.F32 s0,s0,s1              ;763
000772  eec10a00          VDIV.F32 s1,s2,s0              ;763
000776  ee000a10          VMOV     s0,r0                 ;764
00077a  eeb81a40          VCVT.F32.U32 s2,s0                 ;764
00077e  ee005a10          VMOV     s0,r5                 ;764
000782  eeb80a40          VCVT.F32.U32 s0,s0                 ;764
000786  edc20a15          VSTR     s1,[r2,#0x54]         ;763
00078a  ee000ac1          VMLS.F32 s0,s1,s2              ;764
00078e  ed8a0a23          VSTR     s0,[r10,#0x8c]        ;764
000792  e795              B        |L1.1728|
                  |L1.1940|
;;;771    		if(range == 0)//内阻低档位低段
;;;772    		{
;;;773    			LOAD_I_SW = 1;
;;;774    			GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;775    			RCONT_SW = 0;
;;;776    			calflag = 1;
;;;777    			x1 = Rmon_value;
000794  f8df9130          LDR      r9,|L1.2248|
000798  b1c1              CBZ      r1,|L1.1996|
;;;778    			y1 = data;
;;;779    			
;;;780    //			Modify_A_READ=0;
;;;781    //			Modify_A_ACT=0;
;;;782    //			Modify_A_READ = Rmon_value;//测量电阻值
;;;783    //			Modify_A_ACT = data;//读取低段
;;;784    		}else if (range == 1)//内阻低档位高段
00079a  2901              CMP      r1,#1
00079c  d025              BEQ      |L1.2026|
;;;785    		{
;;;786    			
;;;787    			x2 = Rmon_value;
;;;788    			y2 = data;
;;;789    			CalPara.TestR[0] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;790    			CalPara.OffsetR[0] = (float)y2 - CalPara.TestR[0]*(float)x2;
;;;791    				//参数写进FLASH
;;;792    			Flag_DAC_OFF=0;
;;;793    			calflag = 0;
;;;794    		}else if(range == 2)//内阻高档位低段
00079e  2902              CMP      r1,#2
0007a0  d048              BEQ      |L1.2100|
;;;795    		{
;;;796    			LOAD_I_SW = 1;
;;;797    			GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;798    			RCONT_SW = 1;
;;;799    			calflag = 1;
;;;800    			x1 = Rmon_value;
;;;801    			y1 = data;
;;;802    		}else if (range == 3)//内阻高档位高段
0007a2  2903              CMP      r1,#3
0007a4  d050              BEQ      |L1.2120|
;;;803    		{
;;;804    			
;;;805    			x2 = Rmon_value;
;;;806    			y2 = data;
;;;807    			CalPara.TestR[1] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;808    			CalPara.OffsetR[1] = (float)y2 - CalPara.TestR[1]*(float)x2;
;;;809    				//参数写进FLASH
;;;810    			Flag_DAC_OFF=0;
;;;811    			calflag = 0;
;;;812    		}else if(range == 4)//识别电阻1低段
;;;813    		{
;;;814    			calflag = 1;
;;;815    //			x1 = (R1mon_value*1000)/(65535-R1mon_value);
;;;816    			x1 = (R1mon_value*1000)/(65535-R1mon_value);
0007a6  f8dfb124          LDR      r11,|L1.2252|
0007aa  f64f70ff          MOV      r0,#0xffff
0007ae  2904              CMP      r1,#4                 ;812
0007b0  d074              BEQ      |L1.2204|
;;;817    			y1 = data;
;;;818    		}else if (range == 5)//识别电阻1高段
0007b2  2905              CMP      r1,#5
0007b4  d06e              BEQ      |L1.2196|
;;;819    		{
;;;820    			
;;;821    //			x2 = (R1mon_value*1000)/(65535-R1mon_value);
;;;822    			x2 = (R1mon_value*1000)/(65535-R1mon_value);
;;;823    			y2 = data;
;;;824    			CalPara.TestR1[0] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;825    			CalPara.OffsetR1[0] = (float)y2 - CalPara.TestR1[0]*(float)x2;
;;;826    				//参数写进FLASH
;;;827    			Flag_DAC_OFF=0;
;;;828    			calflag = 0;
;;;829    		}else if(range == 6)//识别电阻2低段
;;;830    		{
;;;831    			calflag = 1;
;;;832    			x1 = (R2mon_value*1000)/(65535-R2mon_value);
0007b6  f8dfb118          LDR      r11,|L1.2256|
0007ba  2906              CMP      r1,#6                 ;829
0007bc  d06e              BEQ      |L1.2204|
;;;833    			y1 = data;
;;;834    		}else if (range == 7)//识别电阻2高段
0007be  2907              CMP      r1,#7
0007c0  d069              BEQ      |L1.2198|
;;;835    		{
;;;836    			
;;;837    			x2 = (R2mon_value*1000)/(65535-R2mon_value);
;;;838    			y2 = data;
;;;839    			CalPara.TestR2[0] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;840    			CalPara.OffsetR2[0] = (float)y2 - CalPara.TestR2[0]*(float)x2;
;;;841    				//参数写进FLASH
;;;842    			Flag_DAC_OFF=0;
;;;843    			calflag = 0;
;;;844    		}else if(range == 8)//内阻高档位低段
0007c2  2908              CMP      r1,#8
0007c4  d068              BEQ      |L1.2200|
;;;845    		{
;;;846    			RCONT_SW = 1;
;;;847    			calflag = 1;
;;;848    			x1 = Rmon_value;
;;;849    			y1 = data;
;;;850    		}else if (range == 9)//内阻高档位高段
0007c6  2909              CMP      r1,#9
0007c8  d067              BEQ      |L1.2202|
0007ca  e10c              B        |L1.2534|
                  |L1.1996|
0007cc  4640              MOV      r0,r8                 ;773
0007ce  46c2              MOV      r10,r8                ;773
0007d0  4690              MOV      r8,r2                 ;773
0007d2  6210              STR      r0,[r2,#0x20]         ;773  ; Run_Control
0007d4  4671              MOV      r1,lr                 ;774
0007d6  4839              LDR      r0,|L1.2236|
0007d8  f7fffffe          BL       GPIO_ResetBits
0007dc  f8c87024          STR      r7,[r8,#0x24]         ;775  ; Run_Control
0007e0  f886a000          STRB     r10,[r6,#0]           ;776
0007e4  e0d6              B        |L1.2452|
                  |L1.2022|
0007e6  8800              LDRH     r0,[r0,#0]            ;538  ; Vmon_Load_value
0007e8  e064              B        |L1.2228|
                  |L1.2026|
0007ea  f8b90000          LDRH     r0,[r9,#0]            ;787  ; Rmon_value
0007ee  ee015a10          VMOV     s2,r5                 ;789
0007f2  eeb80a40          VCVT.F32.U32 s0,s0                 ;789
0007f6  eef80a60          VCVT.F32.U32 s1,s1                 ;789
0007fa  eeb81a41          VCVT.F32.U32 s2,s2                 ;789
0007fe  e9c40507          STRD     r0,r5,[r4,#0x1c]      ;787
000802  ee311a40          VSUB.F32 s2,s2,s0              ;789
000806  ee000a10          VMOV     s0,r0                 ;789
00080a  eeb80a40          VCVT.F32.U32 s0,s0                 ;789
00080e  ee300a60          VSUB.F32 s0,s0,s1              ;789
000812  eec10a00          VDIV.F32 s1,s2,s0              ;789
000816  ee000a10          VMOV     s0,r0                 ;790
00081a  eeb81a40          VCVT.F32.U32 s2,s0                 ;790
00081e  ee005a10          VMOV     s0,r5                 ;790
000822  eeb80a40          VCVT.F32.U32 s0,s0                 ;790
000826  edca0a24          VSTR     s1,[r10,#0x90]        ;789
00082a  ee000ac1          VMLS.F32 s0,s1,s2              ;790
00082e  ed8a0a29          VSTR     s0,[r10,#0xa4]        ;790
                  |L1.2098|
000832  e0d5              B        |L1.2528|
                  |L1.2100|
000834  4617              MOV      r7,r2                 ;796
000836  f8c28020          STR      r8,[r2,#0x20]         ;796  ; Run_Control
00083a  4671              MOV      r1,lr                 ;797
00083c  481f              LDR      r0,|L1.2236|
00083e  f7fffffe          BL       GPIO_ResetBits
000842  f8c78024          STR      r8,[r7,#0x24]         ;798  ; Run_Control
000846  e0a3              B        |L1.2448|
                  |L1.2120|
000848  f8b90000          LDRH     r0,[r9,#0]            ;805  ; Rmon_value
00084c  ee015a10          VMOV     s2,r5                 ;807
000850  eeb80a40          VCVT.F32.U32 s0,s0                 ;807
000854  eef80a60          VCVT.F32.U32 s1,s1                 ;807
000858  eeb81a41          VCVT.F32.U32 s2,s2                 ;807
00085c  e9c40507          STRD     r0,r5,[r4,#0x1c]      ;805
000860  ee311a40          VSUB.F32 s2,s2,s0              ;807
000864  ee000a10          VMOV     s0,r0                 ;807
000868  eeb80a40          VCVT.F32.U32 s0,s0                 ;807
00086c  ee300a60          VSUB.F32 s0,s0,s1              ;807
000870  eec10a00          VDIV.F32 s1,s2,s0              ;807
000874  ee000a10          VMOV     s0,r0                 ;808
000878  eeb81a40          VCVT.F32.U32 s2,s0                 ;808
00087c  ee005a10          VMOV     s0,r5                 ;808
000880  eeb80a40          VCVT.F32.U32 s0,s0                 ;808
000884  edca0a25          VSTR     s1,[r10,#0x94]        ;807
000888  ee000ac1          VMLS.F32 s0,s1,s2              ;808
00088c  ed8a0a2a          VSTR     s0,[r10,#0xa8]        ;808
000890  e0a6              B        |L1.2528|
000892  e003              B        |L1.2204|
                  |L1.2196|
000894  e01e              B        |L1.2260|
                  |L1.2198|
000896  e04b              B        |L1.2352|
                  |L1.2200|
000898  e078              B        |L1.2444|
                  |L1.2202|
00089a  e07d              B        |L1.2456|
                  |L1.2204|
00089c  f8868000          STRB     r8,[r6,#0]            ;814
0008a0  f8bb2000          LDRH     r2,[r11,#0]           ;816  ; R1mon_value
0008a4  f44f737a          MOV      r3,#0x3e8             ;816
0008a8  f8bb1000          LDRH     r1,[r11,#0]           ;816  ; R1mon_value
0008ac  435a              MULS     r2,r3,r2              ;816
0008ae  1a40              SUBS     r0,r0,r1              ;816
0008b0  fbb2f0f0          UDIV     r0,r2,r0              ;816
                  |L1.2228|
0008b4  e9c40505          STRD     r0,r5,[r4,#0x14]      ;816
0008b8  e095              B        |L1.2534|
0008ba  0000              DCW      0x0000
                  |L1.2236|
                          DCD      0x40020800
                  |L1.2240|
                          DCD      Contr_Voltage
                  |L1.2244|
                          DCD      Contr_Current
                  |L1.2248|
                          DCD      Rmon_value
                  |L1.2252|
                          DCD      R1mon_value
                  |L1.2256|
                          DCD      R2mon_value
                  |L1.2260|
0008d4  f8bb2000          LDRH     r2,[r11,#0]           ;822  ; R1mon_value
0008d8  f44f787a          MOV      r8,#0x3e8             ;822
0008dc  f8bb1000          LDRH     r1,[r11,#0]           ;822  ; R1mon_value
0008e0  fb02f208          MUL      r2,r2,r8              ;822
0008e4  ee015a10          VMOV     s2,r5                 ;824
0008e8  1a40              SUBS     r0,r0,r1              ;822
0008ea  fbb2f0f0          UDIV     r0,r2,r0              ;822
0008ee  eeb81a41          VCVT.F32.U32 s2,s2                 ;824
0008f2  eeb80a40          VCVT.F32.U32 s0,s0                 ;824
0008f6  eef80a60          VCVT.F32.U32 s1,s1                 ;824
0008fa  e9c40507          STRD     r0,r5,[r4,#0x1c]      ;822
0008fe  ee311a40          VSUB.F32 s2,s2,s0              ;824
000902  ee000a10          VMOV     s0,r0                 ;824
000906  eeb80a40          VCVT.F32.U32 s0,s0                 ;824
00090a  ee300a60          VSUB.F32 s0,s0,s1              ;824
00090e  eec10a00          VDIV.F32 s1,s2,s0              ;824
000912  ee000a10          VMOV     s0,r0                 ;825
000916  eeb81a40          VCVT.F32.U32 s2,s0                 ;825
00091a  ee005a10          VMOV     s0,r5                 ;825
00091e  eeb80a40          VCVT.F32.U32 s0,s0                 ;825
000922  edca0a27          VSTR     s1,[r10,#0x9c]        ;824
000926  ee000ac1          VMLS.F32 s0,s1,s2              ;825
00092a  ed8a0a2c          VSTR     s0,[r10,#0xb0]        ;825
00092e  e057              B        |L1.2528|
                  |L1.2352|
000930  f8bb2000          LDRH     r2,[r11,#0]           ;837  ; R2mon_value
000934  f44f787a          MOV      r8,#0x3e8             ;837
000938  f8bb1000          LDRH     r1,[r11,#0]           ;837  ; R2mon_value
00093c  fb02f208          MUL      r2,r2,r8              ;837
000940  ee015a10          VMOV     s2,r5                 ;839
000944  1a40              SUBS     r0,r0,r1              ;837
000946  fbb2f0f0          UDIV     r0,r2,r0              ;837
00094a  eeb81a41          VCVT.F32.U32 s2,s2                 ;839
00094e  eeb80a40          VCVT.F32.U32 s0,s0                 ;839
000952  eef80a60          VCVT.F32.U32 s1,s1                 ;839
000956  e9c40507          STRD     r0,r5,[r4,#0x1c]      ;837
00095a  ee311a40          VSUB.F32 s2,s2,s0              ;839
00095e  ee000a10          VMOV     s0,r0                 ;839
000962  eeb80a40          VCVT.F32.U32 s0,s0                 ;839
000966  ee300a60          VSUB.F32 s0,s0,s1              ;839
00096a  eec10a00          VDIV.F32 s1,s2,s0              ;839
00096e  ee000a10          VMOV     s0,r0                 ;840
000972  eeb81a40          VCVT.F32.U32 s2,s0                 ;840
000976  ee005a10          VMOV     s0,r5                 ;840
00097a  eeb80a40          VCVT.F32.U32 s0,s0                 ;840
00097e  edca0a28          VSTR     s1,[r10,#0xa0]        ;839
000982  ee000ac1          VMLS.F32 s0,s1,s2              ;840
000986  ed8a0a2d          VSTR     s0,[r10,#0xb4]        ;840
00098a  e029              B        |L1.2528|
                  |L1.2444|
00098c  f8c28024          STR      r8,[r2,#0x24]         ;846  ; Run_Control
                  |L1.2448|
000990  f8868000          STRB     r8,[r6,#0]            ;847
                  |L1.2452|
000994  4648              MOV      r0,r9                 ;848
000996  e726              B        |L1.2022|
                  |L1.2456|
;;;851    		{
;;;852    			
;;;853    			x2 = Rmon_value;
000998  f8b90000          LDRH     r0,[r9,#0]  ; Rmon_value
;;;854    			y2 = data;
;;;855    			CalPara.TestR[2] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
00099c  ee015a10          VMOV     s2,r5
0009a0  eeb80a40          VCVT.F32.U32 s0,s0
0009a4  eef80a60          VCVT.F32.U32 s1,s1
0009a8  eeb81a41          VCVT.F32.U32 s2,s2
0009ac  e9c40507          STRD     r0,r5,[r4,#0x1c]      ;853
0009b0  ee311a40          VSUB.F32 s2,s2,s0
0009b4  ee000a10          VMOV     s0,r0
0009b8  eeb80a40          VCVT.F32.U32 s0,s0
0009bc  ee300a60          VSUB.F32 s0,s0,s1
0009c0  eec10a00          VDIV.F32 s1,s2,s0
;;;856    			CalPara.OffsetR[2] = (float)y2 - CalPara.TestR[2]*(float)x2;
0009c4  ee000a10          VMOV     s0,r0
0009c8  eeb81a40          VCVT.F32.U32 s2,s0
0009cc  ee005a10          VMOV     s0,r5
0009d0  eeb80a40          VCVT.F32.U32 s0,s0
0009d4  edca0a26          VSTR     s1,[r10,#0x98]        ;855
0009d8  ee000ac1          VMLS.F32 s0,s1,s2
0009dc  ed8a0a2b          VSTR     s0,[r10,#0xac]
                  |L1.2528|
;;;857    				//参数写进FLASH
;;;858    			Flag_DAC_OFF=0;
;;;859    			calflag = 0;
0009e0  f8cc3000          STR      r3,[r12,#0]  ; flagB
0009e4  7037              STRB     r7,[r6,#0]
                  |L1.2534|
;;;860    		}
;;;861    		
;;;862    	}
;;;863    		
;;;864    
;;;865    	Write_Flash_Bytes();
0009e6  e8bd5ff0          POP      {r4-r12,lr}
0009ea  f7ffbffe          B.W      Write_Flash_Bytes
;;;866    //	else if(mode == 1){//测量电流
;;;867    //		if(range == 1)
;;;868    //		{
;;;869    //			x1 = abs(I_CS);
;;;870    //			y1 = data;
;;;871    //		}else if(range == 2){
;;;872    //			x2 = abs(I_CS);
;;;873    //			y2 = data;
;;;874    //			SaveDebug.TestIcal[1] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;875    //			SaveDebug.OffsetI[1] = (float)y2 - SaveDebug.TestIcal[1]*(float)x2;
;;;876    //		}else if(range == 4){
;;;877    //			x1 = abs(I_CS);
;;;878    //			y1 = data;
;;;879    //		}else if(range == 5){
;;;880    //			x2 = abs(I_CS);
;;;881    //			y2 = data;
;;;882    //			SaveDebug.TestIcal[4] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;883    //			SaveDebug.OffsetI[3] = (float)y2 - SaveDebug.TestIcal[4]*(float)x2;
;;;884    //		}else if(range == 0){
;;;885    //			SaveDebug.TestIcal[range] = (float)data/(float)(I_CS - SaveDebug.ClearI[0]);
;;;886    //		}else if(range == 3){
;;;887    //			SaveDebug.TestIcal[range] = (float)data/(float)(abs(I_CS - SaveDebug.ClearI[0]));
;;;888    //		}
;;;889    ////		else if(range == 4){
;;;890    ////			x1 = V_CS;
;;;891    ////			y1 = data;
;;;892    ////		}else if(range == 5){
;;;893    ////			x2 = V_CS;
;;;894    ////			y2 = data;
;;;895    ////			SaveDebug.TestVcal[2] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;896    ////			SaveDebug.OffsetV[2] = (float)y2 - SaveDebug.TestVcal[2]*(float)x2;
;;;897    ////		}
;;;898    //		
;;;899    ////		if(range < 3)
;;;900    ////		{
;;;901    ////			if(range == 0)
;;;902    ////			{
;;;903    ////				SaveDebug.TestIcal[range] = (float)data/(float)(I_CS - SaveDebug.ClearI[0]);
;;;904    ////			}else{
;;;905    ////				SaveDebug.TestIcal[range] = (float)data/(float)(I_CS - SaveDebug.ClearI[1]);
;;;906    ////			}			
;;;907    ////		}else{
;;;908    ////			if(range == 3)
;;;909    ////			{
;;;910    ////				SaveDebug.TestIcal[range] = (float)data/(float)(abs(I_CS - SaveDebug.ClearI[0]));
;;;911    ////			}else{
;;;912    ////				SaveDebug.TestIcal[range] = (float)data/(float)(abs(I_CS - SaveDebug.ClearI[1]));
;;;913    ////			}
;;;914    ////		}
;;;915    ////		calflag = 1;
;;;916    //	}else if(mode == 2){//控制电压
;;;917    //		if(range == 0)
;;;918    //		{
;;;919    //			_D_ = 1000;
;;;920    //			x1 = data;
;;;921    //			y1 = _D_;
;;;922    //		}else if(range == 1){
;;;923    //			_D_ = 7000;
;;;924    //			x2 = data;
;;;925    //			y2 = _D_;
;;;926    //			SaveDebug.ControlV[0] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;927    //			SaveDebug.OffsetCV[0] = (float)y2 - SaveDebug.ControlV[0]*(float)x2;
;;;928    //		}else if(range == 2){
;;;929    //			_D_ = 10000;
;;;930    //			x1 = data;
;;;931    //			y1 = _D_;
;;;932    //		}else if(range == 3){
;;;933    //			_D_ = 13000;
;;;934    //			x2 = data;
;;;935    //			y2 = _D_;
;;;936    //			SaveDebug.ControlV[1] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;937    //			SaveDebug.OffsetCV[1] = (float)y2 - SaveDebug.ControlV[1]*(float)x2;
;;;938    //		}else if(range == 4){
;;;939    //			_D_ = 17000;
;;;940    //			x1 = data;
;;;941    //			y1 = _D_;
;;;942    //		}else if(range == 5){
;;;943    //			_D_ = 20000;
;;;944    //			x2 = data;
;;;945    //			y2 = _D_;
;;;946    //			SaveDebug.ControlV[2] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;947    //			SaveDebug.OffsetCV[2] = (float)y2 - SaveDebug.ControlV[2]*(float)x2;
;;;948    //		}else if(range == 6){
;;;949    //			_D_ = 24000;
;;;950    //			x1 = data;
;;;951    //			y1 = _D_;
;;;952    //		}else if(range == 7){
;;;953    //			_D_ = 27000;
;;;954    //			x2 = data;
;;;955    //			y2 = _D_;
;;;956    //			SaveDebug.ControlV[3] = ((float)y2 - (float)y1)/((float)x2 - (float)x1);
;;;957    //			SaveDebug.OffsetCV[3] = (float)y2 - SaveDebug.ControlV[3]*(float)x2;
;;;958    //		}
;;;959    //		
;;;960    ////		if(range == 0)
;;;961    ////		{
;;;962    ////			SaveDebug.ControlV[range] = (float)1000/(float)data;
;;;963    ////		}else if(range == 1){
;;;964    ////			SaveDebug.ControlV[range] = (float)10000/(float)data;
;;;965    ////		}else if(range == 2){
;;;966    ////			SaveDebug.ControlV[range] = (float)15000/(float)data;
;;;967    ////		}else if(range == 3){
;;;968    ////			SaveDebug.ControlV[range] = (float)19000/(float)data;
;;;969    ////		}
;;;970    ////		calflag = 1;
;;;971    //	}else if(mode == 3){//电流清零
;;;972    //		SaveDebug.ClearI[range] = I_CS;
;;;973    ////		calflag = 1;
;;;974    //	}
;;;975    	
;;;976    }
;;;977    
                          ENDP


                          AREA ||i.DMA1_Stream3_IRQHandler||, CODE, READONLY, ALIGN=2

                  DMA1_Stream3_IRQHandler PROC
;;;2363   
;;;2364   void DMA1_Stream3_IRQHandler(void)
000000  b570              PUSH     {r4-r6,lr}
;;;2365   {
;;;2366   	//----DMA1 通道3完成中断，对应的中断也需要清除
;;;2367   	if(DMA_GetITStatus(DMA1_Stream3,DMA_IT_TCIF3) != RESET)   
000002  4d0c              LDR      r5,|L2.52|
000004  4c0c              LDR      r4,|L2.56|
000006  4629              MOV      r1,r5
000008  4620              MOV      r0,r4
00000a  f7fffffe          BL       DMA_GetITStatus
00000e  2800              CMP      r0,#0
000010  d00e              BEQ      |L2.48|
;;;2368       {
;;;2369   		/* 清除标志位 */
;;;2370   		DMA_ClearFlag(DMA1_Stream3,DMA_IT_TCIF3); 
000012  4629              MOV      r1,r5
000014  4620              MOV      r0,r4
000016  f7fffffe          BL       DMA_ClearFlag
;;;2371   		/* 关闭DMA */
;;;2372   		DMA_Cmd(DMA1_Stream3,DISABLE);
00001a  2100              MOVS     r1,#0
00001c  4620              MOV      r0,r4
00001e  f7fffffe          BL       DMA_Cmd
;;;2373   		
;;;2374   		while (!(USART3->SR & USART_FLAG_TC));  //硬件数据发送完毕
000022  4806              LDR      r0,|L2.60|
                  |L2.36|
000024  8801              LDRH     r1,[r0,#0]
000026  0649              LSLS     r1,r1,#25
000028  d5fc              BPL      |L2.36|
                  |L2.42|
;;;2375   		while (!(USART3->SR & USART_FLAG_TXE)); //等待数据从软件拷贝到硬件进行发送
00002a  8801              LDRH     r1,[r0,#0]
00002c  0609              LSLS     r1,r1,#24
00002e  d5fc              BPL      |L2.42|
                  |L2.48|
;;;2376   	}
;;;2377   }
000030  bd70              POP      {r4-r6,pc}
;;;2378   
                          ENDP

000032  0000              DCW      0x0000
                  |L2.52|
                          DCD      0x18008000
                  |L2.56|
                          DCD      0x40026058
                  |L2.60|
                          DCD      0x40004800

                          AREA ||i.IsDigitChar||, CODE, READONLY, ALIGN=1

                  IsDigitChar PROC
;;;89     /*****************************************************************/
;;;90     unsigned short IsDigitChar(unsigned char a)             //如果a的值是数字的话返回1，否则返回0
000000  3830              SUBS     r0,r0,#0x30
;;;91     {
;;;92     	int b;
;;;93       if(a<0x30 || a>0x39)                     //数字1-9
000002  280a              CMP      r0,#0xa
000004  d301              BCC      |L3.10|
;;;94       	{
;;;95       	   b=0;
000006  2000              MOVS     r0,#0
;;;96       	}
;;;97       else
;;;98       	{
;;;99       	   b=1;
;;;100      	}
;;;101      return b;
;;;102    }
000008  4770              BX       lr
                  |L3.10|
00000a  2001              MOVS     r0,#1                 ;99
00000c  4770              BX       lr
;;;103    void SetPowerV(vu32 powv)
                          ENDP


                          AREA ||i.LIST_ONOFF||, CODE, READONLY, ALIGN=2

                  LIST_ONOFF PROC
;;;341    
;;;342    void LIST_ONOFF(vu8 value)
000000  e92d4ff1          PUSH     {r0,r4-r11,lr}
;;;343    {
;;;344    	switch(MODE)
000004  4863              LDR      r0,|L4.404|
000006  ed2d8b02          VPUSH    {d8}                  ;343
00000a  f890c005          LDRB     r12,[r0,#5]  ; MODE
;;;345    	{
;;;346    		case 0://电子负载ON/OFF
;;;347    		{
;;;348    			LOAD_MODE=0;
;;;349    			GPIO_ResetBits(GPIOC,GPIO_Pin_12);//CC模式
;;;350    			if( value == 0 ){
;;;351    				
;;;352    				Flag_Swtich_ON = 0;
00000e  4d63              LDR      r5,|L4.412|
000010  2600              MOVS     r6,#0                 ;344
000012  f8df9184          LDR      r9,|L4.408|
;;;353    				GPIO_SetBits(GPIOC,GPIO_Pin_7);//OFF	 
;;;354    //				TIM_SetCompare1(TIM1,33000/2);				
;;;355    			}
;;;356    			else if( value == 1 ){
;;;357    				
;;;358    				Flag_Swtich_ON = 1;
000016  682b              LDR      r3,[r5,#0]
;;;359    				GPIO_ResetBits(GPIOC,GPIO_Pin_7);//On
;;;360    //				TIM_SetCompare1(TIM1,0);
;;;361    			}
;;;362    		}break;
;;;363    		case 1://稳压电源ON/OFF
;;;364    		{
;;;365    			if( value == 0 ){
;;;366    				listsend = 3;
;;;367    				listpowwatch1 ++;
;;;368    //				PowerSwitch(0);
;;;369    //				GPIO_ResetBits(GPIOC,GPIO_Pin_1); //关闭电源输出
;;;370    //				Para.CSET_Voltage = 0;
;;;371    //				Para.CSET_Current = 0;
;;;372    //				GPIO_ResetBits(GPIOE,GPIO_Pin_2); //关闭电源输出继电器
;;;373    			}
;;;374    			else if( value == 1 ){
;;;375    				listsend = 1;
000018  2101              MOVS     r1,#1
;;;376    				listpowwatch2 ++;
;;;377    //				PowerSwitch(1);
;;;378    //				Para.CSET_Voltage = Para.CDC_OutPut_V;
;;;379    //				Para.CSET_Current = Para.CDC_Limit_C;
;;;380    //				GPIO_SetBits(GPIOE,GPIO_Pin_2);   //打开电源输出继电器
;;;381    //				GPIO_SetBits(GPIOC,GPIO_Pin_1);   //打开电源输出
;;;382    			}
;;;383    		}break;
;;;384    		case 2://过流测试ON/OFF
;;;385    		{
;;;386    			listocwatch++;
;;;387    			if( value == 0 ){
;;;388    				
;;;389    				Off_GPOI_ResetSet();
;;;390    				trig_flag_state = 0;
;;;391    				max_discahrgeNum = 0;
;;;392    				Para.CSET_Current_Laod =  Para.IR_Start_C;
00001a  4c61              LDR      r4,|L4.416|
00001c  4f61              LDR      r7,|L4.420|
00001e  f0430240          ORR      r2,r3,#0x40           ;358
000022  f1bc0f05          CMP      r12,#5                ;344
000026  d226              BCS      |L4.118|
000028  e8dff00c          TBB      [pc,r12]              ;344
00002c  031a2f7c          DCB      0x03,0x1a,0x2f,0x7c
000030  9800              DCB      0x98,0x00
000032  f8c96018          STR      r6,[r9,#0x18]         ;348  ; Run_Control
000036  f44f5180          MOV      r1,#0x1000            ;349
00003a  4638              MOV      r0,r7                 ;349
00003c  f7fffffe          BL       GPIO_ResetBits
000040  f89d0008          LDRB     r0,[sp,#8]            ;350
000044  b140              CBZ      r0,|L4.88|
000046  f89d0008          LDRB     r0,[sp,#8]            ;356
00004a  2801              CMP      r0,#1                 ;356
00004c  d113              BNE      |L4.118|
00004e  6828              LDR      r0,[r5,#0]            ;358  ; flagA
000050  f0400040          ORR      r0,r0,#0x40           ;358
000054  6028              STR      r0,[r5,#0]            ;359  ; flagA
000056  e089              B        |L4.364|
                  |L4.88|
000058  6828              LDR      r0,[r5,#0]            ;352  ; flagA
00005a  f0200040          BIC      r0,r0,#0x40           ;352
00005e  e08f              B        |L4.384|
000060  f89d2008          LDRB     r2,[sp,#8]            ;365
000064  b15a              CBZ      r2,|L4.126|
000066  f89d2008          LDRB     r2,[sp,#8]            ;374
00006a  2a01              CMP      r2,#1                 ;374
00006c  d103              BNE      |L4.118|
00006e  7241              STRB     r1,[r0,#9]            ;375
000070  7b01              LDRB     r1,[r0,#0xc]          ;376  ; listpowwatch2
000072  1c49              ADDS     r1,r1,#1              ;376
000074  7301              STRB     r1,[r0,#0xc]          ;376
                  |L4.118|
;;;393    			}
;;;394    			else if( value == 1 ){
;;;395    //				TIM_SetCompare1(TIM1,0);
;;;396    				LOAD_I_SW = 1;
;;;397    				testv = DISS_Voltage;
;;;398    				Para.CSET_Voltage = (int)(DISS_Voltage*1000) + 1000;
;;;399    				Para.CSET_Current = 1000;
;;;400    				Para.CSET_Current_Laod =  Para.IR_Start_C;
;;;401    				shorttime = 0;
;;;402    				old_I = 0;
;;;403    				max_discahrgeNum = 0;
;;;404    				trig_flag_state = 1;
;;;405    				C_DISCHARGE = 1;        	
;;;406    				Flag_Swtich_ON = 1;
;;;407    				GPIO_ResetBits(GPIOC,GPIO_Pin_7);//On 
;;;408    				max_discahrgeNum = (float)Para.IR_Start_C / 1000;				
;;;409    //				testv = DISS_Voltage;
;;;410    //				Para.CSET_Voltage = (int)(DISS_Voltage*1000) + 1000;
;;;411    //				Para.CSET_Current = 1000;
;;;412    //				Para.CSET_Current_Laod = Para.IR_Start_C;
;;;413    //				shorttime = 0;
;;;414    //				old_I = 0;
;;;415    //				max_discahrgeNum = 0;
;;;416    //				trig_flag_state = 1;
;;;417    //				C_DISCHARGE = 1;
;;;418    //				Flag_Swtich_ON = 1;
;;;419    //				GPIO_ResetBits(GPIOC,GPIO_Pin_7);//On 
;;;420    //				max_discahrgeNum = (float)Para.IR_Start_C / 1000;
;;;421    			}
;;;422    		}break;
;;;423    		case 3://过充测试ON/OFF
;;;424    		{
;;;425    			if( value == 0 ){
;;;426    				
;;;427    				GPIO_ResetBits(GPIOC,GPIO_Pin_1); //关闭电源输出
;;;428    				Para.CSET_Voltage = 0;
;;;429    				Para.CSET_Current = 0;
;;;430    				GPIO_ResetBits(GPIOE,GPIO_Pin_2); //关闭电源输出继电器
;;;431    			}
;;;432    			else if( value == 1 ){
;;;433    				Para.CSET_Voltage = Para.CDC_OutPut_V;
;;;434    				Para.CSET_Current = Para.CDC_Limit_C;
;;;435    				GPIO_SetBits(GPIOE,GPIO_Pin_2);   //打开电源输出继电器
;;;436    				GPIO_SetBits(GPIOC,GPIO_Pin_1);   //打开电源输出
;;;437    			}
;;;438    		}break;
;;;439    		case 4://电子负载ON/OFF
;;;440    		{
;;;441    			if( value == 0 ){
;;;442    //				TIM_SetCompare1(TIM1,33000/2);
;;;443    				Flag_Swtich_ON = 0;
;;;444    				GPIO_SetBits(GPIOC,GPIO_Pin_7);//OFF	  	
;;;445    			}
;;;446    			else if( value == 1 ){
;;;447    //				TIM_SetCompare1(TIM1,0);
;;;448    				Flag_Swtich_ON = 1;
;;;449    				GPIO_ResetBits(GPIOC,GPIO_Pin_7);//On
;;;450    			}
;;;451    		}break;
;;;452    	}
;;;453    }
000076  ecbd8b02          VPOP     {d8}
00007a  e8bd8ff8          POP      {r3-r11,pc}
                  |L4.126|
00007e  2103              MOVS     r1,#3                 ;366
000080  7241              STRB     r1,[r0,#9]            ;366
000082  7ac1              LDRB     r1,[r0,#0xb]          ;367  ; listpowwatch1
000084  1c49              ADDS     r1,r1,#1              ;367
000086  72c1              STRB     r1,[r0,#0xb]          ;367
000088  e7f5              B        |L4.118|
00008a  7a83              LDRB     r3,[r0,#0xa]          ;386  ; listocwatch
00008c  1c5b              ADDS     r3,r3,#1              ;386
00008e  7283              STRB     r3,[r0,#0xa]          ;386
000090  f89d0008          LDRB     r0,[sp,#8]            ;387
000094  f8dfa110          LDR      r10,|L4.424|
000098  ed9f8a44          VLDR     s16,|L4.428|
00009c  f8df8110          LDR      r8,|L4.432|
0000a0  b3b0              CBZ      r0,|L4.272|
0000a2  f89d0008          LDRB     r0,[sp,#8]            ;394
0000a6  2801              CMP      r0,#1                 ;394
0000a8  d1e5              BNE      |L4.118|
0000aa  f8c91020          STR      r1,[r9,#0x20]         ;396  ; Run_Control
0000ae  4841              LDR      r0,|L4.436|
0000b0  ed900a00          VLDR     s0,[r0,#0]            ;397
0000b4  4840              LDR      r0,|L4.440|
0000b6  ed800a00          VSTR     s0,[r0,#0]            ;397
0000ba  eddf8a40          VLDR     s17,|L4.444|
0000be  ee200a28          VMUL.F32 s0,s0,s17             ;398
0000c2  eebd0ac0          VCVT.S32.F32 s0,s0                 ;398
0000c6  ee100a10          VMOV     r0,s0                 ;398
0000ca  f500707a          ADD      r0,r0,#0x3e8          ;398
0000ce  60a0              STR      r0,[r4,#8]            ;398  ; Para
0000d0  f44f707a          MOV      r0,#0x3e8             ;399
0000d4  60e0              STR      r0,[r4,#0xc]          ;399  ; Para
0000d6  6c60              LDR      r0,[r4,#0x44]         ;400  ; Para
0000d8  6160              STR      r0,[r4,#0x14]         ;400  ; Para
0000da  4839              LDR      r0,|L4.448|
0000dc  7006              STRB     r6,[r0,#0]            ;401
0000de  4839              LDR      r0,|L4.452|
0000e0  4646              MOV      r6,r8                 ;403
0000e2  ed808a00          VSTR     s16,[r0,#0]           ;402
0000e6  ed888a00          VSTR     s16,[r8,#0]           ;403
0000ea  f88a1000          STRB     r1,[r10,#0]           ;404
0000ee  4836              LDR      r0,|L4.456|
0000f0  7001              STRB     r1,[r0,#0]            ;405
0000f2  2180              MOVS     r1,#0x80              ;407
0000f4  4638              MOV      r0,r7                 ;407
0000f6  602a              STR      r2,[r5,#0]            ;407  ; flagA
0000f8  f7fffffe          BL       GPIO_ResetBits
0000fc  6c60              LDR      r0,[r4,#0x44]         ;408  ; Para
0000fe  ee000a10          VMOV     s0,r0                 ;408
000102  eeb80a40          VCVT.F32.U32 s0,s0                 ;408
000106  eec00a28          VDIV.F32 s1,s0,s17             ;408
00010a  edc60a00          VSTR     s1,[r6,#0]            ;408
00010e  e7b2              B        |L4.118|
                  |L4.272|
000110  e7ff              B        |L4.274|
                  |L4.274|
000112  f7fffffe          BL       Off_GPOI_ResetSet
000116  f88a6000          STRB     r6,[r10,#0]           ;390
00011a  ed888a00          VSTR     s16,[r8,#0]           ;391
00011e  6c60              LDR      r0,[r4,#0x44]         ;392  ; Para
000120  6160              STR      r0,[r4,#0x14]         ;392  ; Para
000122  e7a8              B        |L4.118|
000124  f89d0008          LDRB     r0,[sp,#8]            ;425
000128  4d28              LDR      r5,|L4.460|
00012a  b170              CBZ      r0,|L4.330|
00012c  f89d0008          LDRB     r0,[sp,#8]            ;432
000130  2801              CMP      r0,#1                 ;432
000132  d1a0              BNE      |L4.118|
000134  6ee0              LDR      r0,[r4,#0x6c]         ;433  ; Para
000136  60a0              STR      r0,[r4,#8]            ;433  ; Para
000138  f8b40070          LDRH     r0,[r4,#0x70]         ;434  ; Para
00013c  60e0              STR      r0,[r4,#0xc]          ;434  ; Para
00013e  2104              MOVS     r1,#4                 ;435
000140  4628              MOV      r0,r5                 ;435
000142  f7fffffe          BL       GPIO_SetBits
000146  2102              MOVS     r1,#2                 ;436
000148  e01c              B        |L4.388|
                  |L4.330|
00014a  2102              MOVS     r1,#2                 ;427
00014c  4638              MOV      r0,r7                 ;427
00014e  f7fffffe          BL       GPIO_ResetBits
000152  60a6              STR      r6,[r4,#8]            ;428  ; Para
000154  60e6              STR      r6,[r4,#0xc]          ;429  ; Para
000156  2104              MOVS     r1,#4                 ;430
000158  4628              MOV      r0,r5                 ;430
00015a  e009              B        |L4.368|
00015c  f89d0008          LDRB     r0,[sp,#8]            ;441
000160  b160              CBZ      r0,|L4.380|
000162  f89d0008          LDRB     r0,[sp,#8]            ;446
000166  2801              CMP      r0,#1                 ;446
000168  d185              BNE      |L4.118|
00016a  602a              STR      r2,[r5,#0]            ;448  ; flagA
                  |L4.364|
00016c  2180              MOVS     r1,#0x80              ;359
00016e  4638              MOV      r0,r7                 ;359
                  |L4.368|
000170  ecbd8b02          VPOP     {d8}                  ;449
000174  e8bd4ff8          POP      {r3-r11,lr}           ;449
000178  f7ffbffe          B.W      GPIO_ResetBits
                  |L4.380|
00017c  f0230040          BIC      r0,r3,#0x40           ;443
                  |L4.384|
000180  2180              MOVS     r1,#0x80              ;353
000182  6028              STR      r0,[r5,#0]            ;353  ; flagA
                  |L4.388|
000184  4638              MOV      r0,r7                 ;444
000186  ecbd8b02          VPOP     {d8}                  ;444
00018a  e8bd4ff8          POP      {r3-r11,lr}           ;444
00018e  f7ffbffe          B.W      GPIO_SetBits
;;;454    
                          ENDP

000192  0000              DCW      0x0000
                  |L4.404|
                          DCD      ||.data||
                  |L4.408|
                          DCD      Run_Control
                  |L4.412|
                          DCD      flagA
                  |L4.416|
                          DCD      Para
                  |L4.420|
                          DCD      0x40020800
                  |L4.424|
                          DCD      trig_flag_state
                  |L4.428|
0001ac  00000000          DCFS     0x00000000 ; 0
                  |L4.432|
                          DCD      max_discahrgeNum
                  |L4.436|
                          DCD      DISS_Voltage
                  |L4.440|
                          DCD      testv
                  |L4.444|
0001bc  447a0000          DCFS     0x447a0000 ; 1000
                  |L4.448|
                          DCD      shorttime
                  |L4.452|
                          DCD      old_I
                  |L4.456|
                          DCD      C_DISCHARGE
                  |L4.460|
                          DCD      0x40021000

                          AREA ||i.MODE_ONOFF||, CODE, READONLY, ALIGN=2

                  MODE_ONOFF PROC
;;;264    
;;;265    void MODE_ONOFF(vu8 value)
000000  e92d4ff1          PUSH     {r0,r4-r11,lr}
;;;266    {
;;;267    	switch(MODE)
000004  4941              LDR      r1,|L5.268|
000006  ed2d8b02          VPUSH    {d8}                  ;266
00000a  794a              LDRB     r2,[r1,#5]  ; MODE
;;;268    	{
;;;269    		case 0://电子负载ON/OFF
;;;270    		{
;;;271    			if( value == 0 ){
;;;272    				
;;;273    				Flag_Swtich_ON = 0;
00000c  4d40              LDR      r5,|L5.272|
;;;274    				GPIO_SetBits(GPIOC,GPIO_Pin_7);//OFF	
00000e  4841              LDR      r0,|L5.276|
000010  b3ea              CBZ      r2,|L5.142|
;;;275    //				TIM_SetCompare1(TIM1,33000/2);
;;;276    			}
;;;277    			else if( value == 1 ){
;;;278    				
;;;279    				Flag_Swtich_ON = 1;
;;;280    				GPIO_ResetBits(GPIOC,GPIO_Pin_7);//On
;;;281    //				TIM_SetCompare1(TIM1,0);
;;;282    			}
;;;283    		}break;
;;;284    		case 1://稳压电源ON/OFF
;;;285    		{
;;;286    			sendwait = 1;
000012  2601              MOVS     r6,#1
000014  2a01              CMP      r2,#1                 ;267
000016  d06d              BEQ      |L5.244|
000018  2a02              CMP      r2,#2                 ;267
00001a  d14a              BNE      |L5.178|
;;;287    //			if( value == 0 ){
;;;288    //				sendwait = 1;
;;;289    ////				PowerSwitch(0);//关闭电源输出
;;;290    ////				Delay_ms(1000);
;;;291    ////				GPIO_ResetBits(GPIOE,GPIO_Pin_2); //关闭电源输出继电器
;;;292    ////				GPIO_ResetBits(GPIOC,GPIO_Pin_1); //关闭电源输出
;;;293    //////				Delay_ms(1000);
;;;294    ////				Para.CSET_Voltage = 0;
;;;295    ////				Para.CSET_Current = 0;
;;;296    //////				Delay_ms(1000);
;;;297    ////				GPIO_ResetBits(GPIOE,GPIO_Pin_2); //关闭电源输出继电器
;;;298    //			}
;;;299    //			else if( value == 1 ){
;;;300    ////				GPIO_SetBits(GPIOE,GPIO_Pin_2);   //打开电源输出继电器
;;;301    //////				Delay_ms(1000);
;;;302    ////				PowerSwitch(1);//打开电源输出
;;;303    //				
;;;304    //////				
;;;305    ////				Para.CSET_Voltage = Para.POWER_OutPut_V;
;;;306    ////				Para.CSET_Current = Para.POWER_Limit_C;
;;;307    //////				Delay_ms(1000);
;;;308    ////				GPIO_SetBits(GPIOC,GPIO_Pin_1);   //打开电源输出
;;;309    //				
;;;310    //			}
;;;311    		}break;
;;;312    		case 2://过流测试ON/OFF
;;;313    		{
;;;314    			if( value == 0 ){
00001c  f89d1008          LDRB     r1,[sp,#8]
;;;315    				
;;;316    				Off_GPOI_ResetSet();
;;;317    				trig_flag_state = 0;
000020  f8df90f4          LDR      r9,|L5.280|
;;;318    				max_discahrgeNum = 0;
000024  ed9f8a3d          VLDR     s16,|L5.284|
000028  f8df80f4          LDR      r8,|L5.288|
;;;319    				Para.CSET_Current_Laod =  Para.IR_Start_C;
00002c  4c3d              LDR      r4,|L5.292|
00002e  2700              MOVS     r7,#0                 ;314
000030  b371              CBZ      r1,|L5.144|
;;;320    			}
;;;321    			else if( value == 1 ){
000032  f89d1008          LDRB     r1,[sp,#8]
000036  2901              CMP      r1,#1
000038  d13b              BNE      |L5.178|
;;;322    //				TIM_SetCompare1(TIM1,0);
;;;323    				LOAD_MODE = 0;
00003a  493b              LDR      r1,|L5.296|
00003c  618f              STR      r7,[r1,#0x18]  ; Run_Control
;;;324    				GPIO_ResetBits(GPIOC,GPIO_Pin_12);//CC模式
00003e  1481              ASRS     r1,r0,#18
000040  4682              MOV      r10,r0
000042  f7fffffe          BL       GPIO_ResetBits
;;;325    				Para.CSET_Current_Laod =  Para.IR_Start_C;
000046  6c60              LDR      r0,[r4,#0x44]  ; Para
000048  6160              STR      r0,[r4,#0x14]  ; Para
;;;326    				testv = DISS_Voltage;
00004a  4838              LDR      r0,|L5.300|
;;;327    				Para.CSET_Voltage = (int)(DISS_Voltage*1000) + 1000;
00004c  eddf8a39          VLDR     s17,|L5.308|
000050  ed900a00          VLDR     s0,[r0,#0]            ;326
000054  4836              LDR      r0,|L5.304|
000056  ed800a00          VSTR     s0,[r0,#0]            ;326
00005a  ee200a28          VMUL.F32 s0,s0,s17
00005e  eebd0ac0          VCVT.S32.F32 s0,s0
000062  ee100a10          VMOV     r0,s0
000066  f500707a          ADD      r0,r0,#0x3e8
00006a  60a0              STR      r0,[r4,#8]  ; Para
;;;328    				Para.CSET_Current = 1000;
00006c  f44f707a          MOV      r0,#0x3e8
000070  60e0              STR      r0,[r4,#0xc]  ; Para
;;;329    				shorttime = 0;
000072  4831              LDR      r0,|L5.312|
000074  7007              STRB     r7,[r0,#0]
;;;330    				old_I = 0;
000076  4831              LDR      r0,|L5.316|
;;;331    				max_discahrgeNum = 0;
000078  4647              MOV      r7,r8
00007a  ed808a00          VSTR     s16,[r0,#0]           ;330
00007e  ed888a00          VSTR     s16,[r8,#0]
;;;332    				trig_flag_state = 1;
000082  f8896000          STRB     r6,[r9,#0]
;;;333    				C_DISCHARGE = 1;        	
000086  482e              LDR      r0,|L5.320|
000088  7006              STRB     r6,[r0,#0]
;;;334    				Flag_Swtich_ON = 1;
00008a  6828              LDR      r0,[r5,#0]  ; flagA
00008c  e001              B        |L5.146|
                  |L5.142|
00008e  e014              B        |L5.186|
                  |L5.144|
000090  e032              B        |L5.248|
                  |L5.146|
000092  f0400040          ORR      r0,r0,#0x40
;;;335    				GPIO_ResetBits(GPIOC,GPIO_Pin_7);//On 
000096  6028              STR      r0,[r5,#0]  ; flagA
000098  2180              MOVS     r1,#0x80
00009a  4650              MOV      r0,r10
00009c  f7fffffe          BL       GPIO_ResetBits
;;;336    				max_discahrgeNum = (float)Para.IR_Start_C / 1000;
0000a0  6c60              LDR      r0,[r4,#0x44]  ; Para
0000a2  ee000a10          VMOV     s0,r0
0000a6  eeb80a40          VCVT.F32.U32 s0,s0
0000aa  eec00a28          VDIV.F32 s1,s0,s17
0000ae  edc70a00          VSTR     s1,[r7,#0]
                  |L5.178|
;;;337    			}
;;;338    		}break;
;;;339    	}
;;;340    }
0000b2  ecbd8b02          VPOP     {d8}
0000b6  e8bd8ff8          POP      {r3-r11,pc}
                  |L5.186|
0000ba  f89d2008          LDRB     r2,[sp,#8]            ;271
0000be  4914              LDR      r1,|L5.272|
0000c0  6809              LDR      r1,[r1,#0]            ;273
0000c2  b16a              CBZ      r2,|L5.224|
0000c4  f89d2008          LDRB     r2,[sp,#8]            ;277
0000c8  2a01              CMP      r2,#1                 ;277
0000ca  d1f2              BNE      |L5.178|
0000cc  f0410140          ORR      r1,r1,#0x40           ;279
0000d0  6029              STR      r1,[r5,#0]            ;280  ; flagA
0000d2  2180              MOVS     r1,#0x80              ;280
0000d4  ecbd8b02          VPOP     {d8}                  ;280
0000d8  e8bd4ff8          POP      {r3-r11,lr}           ;280
0000dc  f7ffbffe          B.W      GPIO_ResetBits
                  |L5.224|
0000e0  f0210140          BIC      r1,r1,#0x40           ;273
0000e4  6029              STR      r1,[r5,#0]            ;274  ; flagA
0000e6  2180              MOVS     r1,#0x80              ;274
0000e8  ecbd8b02          VPOP     {d8}                  ;274
0000ec  e8bd4ff8          POP      {r3-r11,lr}           ;274
0000f0  f7ffbffe          B.W      GPIO_SetBits
                  |L5.244|
0000f4  720e              STRB     r6,[r1,#8]            ;286
0000f6  e7dc              B        |L5.178|
                  |L5.248|
0000f8  f7fffffe          BL       Off_GPOI_ResetSet
0000fc  f8897000          STRB     r7,[r9,#0]            ;317
000100  ed888a00          VSTR     s16,[r8,#0]           ;318
000104  6c60              LDR      r0,[r4,#0x44]         ;319  ; Para
000106  6160              STR      r0,[r4,#0x14]         ;319  ; Para
000108  e7d3              B        |L5.178|
;;;341    
                          ENDP

00010a  0000              DCW      0x0000
                  |L5.268|
                          DCD      ||.data||
                  |L5.272|
                          DCD      flagA
                  |L5.276|
                          DCD      0x40020800
                  |L5.280|
                          DCD      trig_flag_state
                  |L5.284|
00011c  00000000          DCFS     0x00000000 ; 0
                  |L5.288|
                          DCD      max_discahrgeNum
                  |L5.292|
                          DCD      Para
                  |L5.296|
                          DCD      Run_Control
                  |L5.300|
                          DCD      DISS_Voltage
                  |L5.304|
                          DCD      testv
                  |L5.308|
000134  447a0000          DCFS     0x447a0000 ; 1000
                  |L5.312|
                          DCD      shorttime
                  |L5.316|
                          DCD      old_I
                  |L5.320|
                          DCD      C_DISCHARGE

                          AREA ||i.MODE_PARASET||, CODE, READONLY, ALIGN=2

                  MODE_PARASET PROC
;;;454    
;;;455    void MODE_PARASET(vu8 value)
000000  b570              PUSH     {r4-r6,lr}
;;;456    {
;;;457    	float ptrans;
;;;458    	switch(MODE)
000002  4a22              LDR      r2,|L6.140|
000004  7953              LDRB     r3,[r2,#5]  ; MODE
000006  2100              MOVS     r1,#0
;;;459    	{
;;;460    		case 0://电子负载
;;;461    		{
;;;462    //			OnOff_GPOI_ResetSet( 2, 0 );
;;;463    //			mainswitch = 0;
;;;464    //			sendwait = 3;
;;;465    			LOAD_MODE = Para.CLOAD_MODE;
;;;466    			if(LOAD_MODE == 2)
;;;467    			{
;;;468    				ptrans = (float)Para.LOAD_P/1000;
;;;469    				Para.CSET_Current_Laod = (uint32_t)((ptrans/DISS_Voltage)*1000);
;;;470    			}else{
;;;471    				Para.CSET_Current_Laod = Para.LOAD_C;
;;;472    			}
;;;473    			Para.CSET_Voltage_Laod = Para.LOAD_V;
;;;474    			if(Para.CSET_Current_Laod > 15000)
;;;475    			{
;;;476    				LOAD_I_SW = 1;
000008  2501              MOVS     r5,#1
00000a  4c21              LDR      r4,|L6.144|
00000c  4821              LDR      r0,|L6.148|
00000e  2b05              CMP      r3,#5                 ;458
000010  d213              BCS      |L6.58|
000012  e8dff003          TBB      [pc,r3]               ;458
000016  0339              DCB      0x03,0x39
000018  2a323900          DCB      0x2a,0x32,0x39,0x00
00001c  6982              LDR      r2,[r0,#0x18]         ;465  ; Para
00001e  61a2              STR      r2,[r4,#0x18]         ;465  ; Run_Control
000020  69a2              LDR      r2,[r4,#0x18]         ;466  ; Run_Control
000022  2a02              CMP      r2,#2                 ;466
000024  d00a              BEQ      |L6.60|
000026  6dc2              LDR      r2,[r0,#0x5c]         ;471  ; Para
                  |L6.40|
000028  6142              STR      r2,[r0,#0x14]         ;471  ; Para
00002a  6e02              LDR      r2,[r0,#0x60]         ;473  ; Para
00002c  6102              STR      r2,[r0,#0x10]         ;473  ; Para
00002e  6940              LDR      r0,[r0,#0x14]         ;474  ; Para
000030  f6432298          MOV      r2,#0x3a98            ;474
000034  4290              CMP      r0,r2                 ;474
000036  d916              BLS      |L6.102|
                  |L6.56|
000038  6225              STR      r5,[r4,#0x20]  ; Run_Control
                  |L6.58|
;;;477    			}else{
;;;478    				LOAD_I_SW = 0;
;;;479    			}
;;;480    		}break;
;;;481    		case 1://稳压电源
;;;482    		{
;;;483    //			OnOff_GPOI_ResetSet( 2, 0 );
;;;484    //			mainswitch = 0;
;;;485    //			if(USART3_Recive_flg == 1)
;;;486    //			{
;;;487    				sendwait = 1;
;;;488    //			}else{
;;;489    //				SetPowerMode();
;;;490    //			}
;;;491    //			Para.CSET_Voltage = Para.POWER_OutPut_V;
;;;492    //			SetPowerV(Para.POWER_OutPut_V);
;;;493    //	//			Para.CSET_Current = Para.POWER_Limit_C;
;;;494    //			SetPowerC(Para.POWER_Limit_C);
;;;495    		}break;
;;;496    		case 2://放电过流测试
;;;497    		{
;;;498    //			OnOff_GPOI_ResetSet( 2, 0 );
;;;499    //			mainswitch = 0;
;;;500    //			sendwait = 3;
;;;501    			
;;;502    			LOAD_MODE = 0;
;;;503    			LOAD_I_SW = 1;
;;;504    			Para.CSET_Current = 1000;
;;;505    			Para.CSET_Current_Laod = Para.IR_Start_C;
;;;506    		}break;
;;;507    		case 3://列表
;;;508    		{
;;;509    //			OnOff_GPOI_ResetSet( 2, 0 );
;;;510    //			mainswitch = 0;
;;;511    //			sendwait = 3;
;;;512    			
;;;513    			LOAD_MODE = 0;
;;;514    			GPIO_ResetBits(GPIOC,GPIO_Pin_12);//CC模式
;;;515    			LOAD_I_SW = 1;
;;;516    //			Para.CSET_Current = 1000;
;;;517    		}break;
;;;518    		case 4://充电过流测试
;;;519    		{
;;;520    //			OnOff_GPOI_ResetSet( 2, 0 );
;;;521    //			mainswitch = 0;
;;;522    //			sendwait = 3;
;;;523    			
;;;524    			sendwait = 1;
;;;525    		}break;
;;;526    	}
;;;527    }
00003a  bd70              POP      {r4-r6,pc}
                  |L6.60|
00003c  6e42              LDR      r2,[r0,#0x64]         ;468  ; Para
00003e  ee002a10          VMOV     s0,r2                 ;468
000042  4a16              LDR      r2,|L6.156|
000044  eeb81a40          VCVT.F32.U32 s2,s0                 ;468
000048  ed9f0a13          VLDR     s0,|L6.152|
00004c  edd21a00          VLDR     s3,[r2,#0]            ;469
000050  eec10a00          VDIV.F32 s1,s2,s0              ;468
000054  ee801aa1          VDIV.F32 s2,s1,s3              ;469
000058  ee210a00          VMUL.F32 s0,s2,s0              ;469
00005c  eebc0ac0          VCVT.U32.F32 s0,s0                 ;469
000060  ee102a10          VMOV     r2,s0                 ;469
000064  e7e0              B        |L6.40|
                  |L6.102|
000066  6221              STR      r1,[r4,#0x20]         ;478  ; Run_Control
000068  bd70              POP      {r4-r6,pc}
00006a  61a1              STR      r1,[r4,#0x18]         ;502  ; Run_Control
00006c  6225              STR      r5,[r4,#0x20]         ;503  ; Run_Control
00006e  f44f717a          MOV      r1,#0x3e8             ;504
000072  60c1              STR      r1,[r0,#0xc]          ;504  ; Para
000074  6c41              LDR      r1,[r0,#0x44]         ;505  ; Para
000076  6141              STR      r1,[r0,#0x14]         ;505  ; Para
000078  bd70              POP      {r4-r6,pc}
00007a  61a1              STR      r1,[r4,#0x18]         ;513  ; Run_Control
00007c  f44f5180          MOV      r1,#0x1000            ;514
000080  4807              LDR      r0,|L6.160|
000082  f7fffffe          BL       GPIO_ResetBits
000086  e7d7              B        |L6.56|
000088  7215              STRB     r5,[r2,#8]            ;524
00008a  bd70              POP      {r4-r6,pc}
;;;528    
                          ENDP

                  |L6.140|
                          DCD      ||.data||
                  |L6.144|
                          DCD      Run_Control
                  |L6.148|
                          DCD      Para
                  |L6.152|
000098  447a0000          DCFS     0x447a0000 ; 1000
                  |L6.156|
                          DCD      DISS_Voltage
                  |L6.160|
                          DCD      0x40020800

                          AREA ||i.PowerSwitch||, CODE, READONLY, ALIGN=2

                  PowerSwitch PROC
;;;188    
;;;189    void PowerSwitch(vu8 bit)
000000  b531              PUSH     {r0,r4,r5,lr}
;;;190    {
;;;191    	MasterSendbuf[0] = 0x01;
000002  4c0f              LDR      r4,|L7.64|
000004  2001              MOVS     r0,#1
;;;192    	MasterSendbuf[1] = 0x06;
000006  2106              MOVS     r1,#6
000008  7020              STRB     r0,[r4,#0]            ;191
00000a  7061              STRB     r1,[r4,#1]
;;;193    	MasterSendbuf[2] = 0x00;
00000c  2100              MOVS     r1,#0
00000e  70a1              STRB     r1,[r4,#2]
;;;194    	MasterSendbuf[3] = 0x01;
000010  70e0              STRB     r0,[r4,#3]
;;;195    	MasterSendbuf[4] = (u8)(bit>>8);
000012  f89d0000          LDRB     r0,[sp,#0]
000016  7121              STRB     r1,[r4,#4]
;;;196    	MasterSendbuf[5] = (u8)(bit);
000018  f89d0000          LDRB     r0,[sp,#0]
00001c  7160              STRB     r0,[r4,#5]
;;;197    	MasterSendbuf[6] = (u8)(Hardware_CRC(MasterSendbuf,6));
00001e  2106              MOVS     r1,#6
000020  4620              MOV      r0,r4
000022  f7fffffe          BL       Hardware_CRC
000026  71a0              STRB     r0,[r4,#6]
;;;198    	MasterSendbuf[7] = (u8)(Hardware_CRC(MasterSendbuf,6)>>8);	
000028  2106              MOVS     r1,#6
00002a  4620              MOV      r0,r4
00002c  f7fffffe          BL       Hardware_CRC
000030  0a00              LSRS     r0,r0,#8
000032  71e0              STRB     r0,[r4,#7]
;;;199    	USART3WriteDMA(8);
000034  e8bd4038          POP      {r3-r5,lr}
000038  2008              MOVS     r0,#8
00003a  f7ffbffe          B.W      USART3WriteDMA
;;;200    }
;;;201    
                          ENDP

00003e  0000              DCW      0x0000
                  |L7.64|
                          DCD      ||area_number.31||+0xdc

                          AREA ||i.ReadPowData||, CODE, READONLY, ALIGN=2

                  ReadPowData PROC
;;;201    
;;;202    void ReadPowData(void)
000000  b510              PUSH     {r4,lr}
;;;203    {
;;;204    	MasterSendbuf[0] = 0x01;
000002  4c0e              LDR      r4,|L8.60|
000004  2001              MOVS     r0,#1
;;;205    	MasterSendbuf[1] = 0x03;
;;;206    	MasterSendbuf[2] = 0x00;
;;;207    	MasterSendbuf[3] = 0x10;
000006  2110              MOVS     r1,#0x10
000008  7020              STRB     r0,[r4,#0]            ;204
00000a  2003              MOVS     r0,#3                 ;205
00000c  7060              STRB     r0,[r4,#1]            ;205
00000e  2000              MOVS     r0,#0                 ;206
000010  70a0              STRB     r0,[r4,#2]            ;206
000012  70e1              STRB     r1,[r4,#3]
;;;208    	MasterSendbuf[4] = 0x00;
000014  7120              STRB     r0,[r4,#4]
;;;209    	MasterSendbuf[5] = 0x02;
000016  2002              MOVS     r0,#2
000018  7160              STRB     r0,[r4,#5]
;;;210    	MasterSendbuf[6] = (u8)(Hardware_CRC(MasterSendbuf,6));
00001a  2106              MOVS     r1,#6
00001c  4620              MOV      r0,r4
00001e  f7fffffe          BL       Hardware_CRC
000022  71a0              STRB     r0,[r4,#6]
;;;211    	MasterSendbuf[7] = (u8)(Hardware_CRC(MasterSendbuf,6)>>8);	
000024  2106              MOVS     r1,#6
000026  4620              MOV      r0,r4
000028  f7fffffe          BL       Hardware_CRC
00002c  0a00              LSRS     r0,r0,#8
00002e  71e0              STRB     r0,[r4,#7]
;;;212    	USART3WriteDMA(8);
000030  e8bd4010          POP      {r4,lr}
000034  2008              MOVS     r0,#8
000036  f7ffbffe          B.W      USART3WriteDMA
;;;213    }
;;;214    
                          ENDP

00003a  0000              DCW      0x0000
                  |L8.60|
                          DCD      ||area_number.31||+0xdc

                          AREA ||i.SerialRemoteHandleL||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_percent
                          REQUIRE _printf_d
                          REQUIRE _printf_int_dec
                          REQUIRE _printf_pre_padding
                          REQUIRE _printf_flags
                          REQUIRE _printf_widthprec
                          REQUIRE _printf_f
                          REQUIRE _printf_fp_dec
                  SerialRemoteHandleL PROC
;;;1015   
;;;1016   u16 SerialRemoteHandleL(u8 len,char* buf)
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;1017   {
000004  b0b3              SUB      sp,sp,#0xcc
000006  4604              MOV      r4,r0
;;;1018   
;;;1019     
;;;1020       u16 currCharNum;
;;;1021       u32 temp1;
;;;1022     u8 Gmode_Vale;
;;;1023   	u8 i,j;
;;;1024   	
;;;1025   	u8 addr = 0;
000008  2000              MOVS     r0,#0
00000a  460d              MOV      r5,r1                 ;1017
;;;1026   	char str[200]={0};
00000c  9032              STR      r0,[sp,#0xc8]
00000e  21c8              MOVS     r1,#0xc8
000010  4668              MOV      r0,sp
000012  f7fffffe          BL       __aeabi_memclr4
;;;1027   	int cmd_flag=255;
;;;1028   	u8 templen =0;
;;;1029   	u8 tmpFg;
;;;1030   	u8 LM_S_Vale,LOW_I_Vale,H_L_Vale,SWITCH_Vale;
;;;1031   	u16 I_ADC_Vale,V_ADC_Vale;
;;;1032   	int32_t V_CS_Vale,I_CS_Vale;
;;;1033   	float Lvl_Vale,fadcx,fsingal, fVale;
;;;1034    
;;;1035   //	u8 len = 11;
;;;1036   	u8 pntlen = 0;
;;;1037   
;;;1038   
;;;1039   	
;;;1040   	currCharNum=0;
;;;1041   	if((buf[currCharNum] != ChrStartR) || (buf[len-2] != ChrEndR)||(buf[len-1] != ChrEndS))
000016  7828              LDRB     r0,[r5,#0]
000018  283c              CMP      r0,#0x3c
00001a  d108              BNE      |L9.46|
00001c  1928              ADDS     r0,r5,r4
00001e  f8101c02          LDRB     r1,[r0,#-2]
000022  290d              CMP      r1,#0xd
000024  d103              BNE      |L9.46|
000026  f8100c01          LDRB     r0,[r0,#-1]
00002a  280a              CMP      r0,#0xa
00002c  d001              BEQ      |L9.50|
                  |L9.46|
;;;1042       {
;;;1043   		return SetErr_ACK(buf,addr ,CMD_ERR); 
00002e  2202              MOVS     r2,#2
000030  e14a              B        |L9.712|
                  |L9.50|
;;;1044       } 
;;;1045   	str[currCharNum++] = ChrStartR;
000032  213c              MOVS     r1,#0x3c
000034  f88d1000          STRB     r1,[sp,#0]
;;;1046   	sprintf(&str[currCharNum],"%d",addr);
000038  a1fe              ADR      r1,|L9.1076|
00003a  f10d0001          ADD      r0,sp,#1
00003e  9a32              LDR      r2,[sp,#0xc8]
000040  f7fffffe          BL       __2sprintf
;;;1047   	strncat(str,"/",1);
000044  2201              MOVS     r2,#1
000046  a1fc              ADR      r1,|L9.1080|
000048  4668              MOV      r0,sp
00004a  f7fffffe          BL       strncat
;;;1048   	currCharNum =strlen(str);
00004e  4668              MOV      r0,sp
000050  f7fffffe          BL       strlen
000054  fa1ffa80          UXTH     r10,r0
;;;1049   	cmd_flag=strncmp(buf,str,strlen(str));
000058  4668              MOV      r0,sp
00005a  f7fffffe          BL       strlen
00005e  4602              MOV      r2,r0
000060  4669              MOV      r1,sp
000062  4628              MOV      r0,r5
000064  f7fffffe          BL       strncmp
;;;1050   	//testflag = cmd_flag;
;;;1051   	if(0!=cmd_flag)
000068  2800              CMP      r0,#0
00006a  d1e0              BNE      |L9.46|
;;;1052   	{
;;;1053   		return SetErr_ACK(buf, addr ,CMD_ERR);
;;;1054   		
;;;1055   	}
;;;1056   	for (j=0;j<CmdNumb;j++)
;;;1057       {
;;;1058   		templen = strlen(CmdStr[j]);
00006c  f8dfb3cc          LDR      r11,|L9.1084|
000070  4680              MOV      r8,r0                 ;1056
;;;1059   		cmd_flag=strncmp(&buf[currCharNum],CmdStr[j],templen);
000072  eb05060a          ADD      r6,r5,r10
000076  bf00              NOP                            ;1058
                  |L9.120|
000078  eb0801c8          ADD      r1,r8,r8,LSL #3       ;1058
00007c  eb01040b          ADD      r4,r1,r11             ;1058
000080  4620              MOV      r0,r4                 ;1058
000082  f7fffffe          BL       strlen
000086  f00009ff          AND      r9,r0,#0xff           ;1058
00008a  4621              MOV      r1,r4
00008c  4630              MOV      r0,r6
00008e  464a              MOV      r2,r9
000090  f7fffffe          BL       strncmp
;;;1060   	    if(0==cmd_flag)
000094  b138              CBZ      r0,|L9.166|
000096  f1080801          ADD      r8,r8,#1
00009a  f00808ff          AND      r8,r8,#0xff           ;1056
00009e  f1b80f13          CMP      r8,#0x13              ;1056
0000a2  d3e9              BCC      |L9.120|
0000a4  e7c3              B        |L9.46|
                  |L9.166|
;;;1061   	    {
;;;1062   
;;;1063   		  buf[0] = ChrStartS;
0000a6  203e              MOVS     r0,#0x3e
0000a8  7028              STRB     r0,[r5,#0]
;;;1064   		  currCharNum+=templen;
0000aa  eb0a0009          ADD      r0,r10,r9
0000ae  b284              UXTH     r4,r0
;;;1065   		  switch(j)
;;;1066             {
;;;1067   			case 0:
;;;1068   				pntlen = 5;    //
;;;1069   				if(buf[currCharNum]=='?')
;;;1070   				{
;;;1071   
;;;1072   					
;;;1073   					sprintf(&buf[currCharNum],"%06d",Para.CVoltage);
;;;1074   					currCharNum+=6;
;;;1075   					
;;;1076   					buf[currCharNum++]=(',');
;;;1077   					sprintf(&buf[currCharNum],"%06d",Para.CLaod_Current);
;;;1078   					currCharNum+=6;
;;;1079   					
;;;1080   					buf[currCharNum++]=(',');
;;;1081   					sprintf(&buf[currCharNum],"%05d",Para.CPOW_Voltage);
;;;1082   					currCharNum+=pntlen;
;;;1083   					
;;;1084   					buf[currCharNum++]=(',');
;;;1085   					sprintf(&buf[currCharNum],"%05d",Para.CCurrent);
;;;1086   					currCharNum+=pntlen;
;;;1087   					
;;;1088   					buf[currCharNum++]=(',');
;;;1089   					sprintf(&buf[currCharNum],"%05d",Para.CR_VLUE);
;;;1090   					currCharNum+=pntlen;
;;;1091   					
;;;1092   					buf[currCharNum++]=(',');
;;;1093   					sprintf(&buf[currCharNum],"%04d",Para.CR1_VLUE);
;;;1094   					currCharNum+=4;
;;;1095   					
;;;1096   					buf[currCharNum++]=(',');
;;;1097   					sprintf(&buf[currCharNum],"%04d",Para.CR2_VLUE);
;;;1098   					currCharNum+=4;
;;;1099   
;;;1100   					buf[currCharNum++]=(',');
;;;1101   					sprintf(&buf[currCharNum],"%06d",(int)(max_discahrgeNum*1000));
;;;1102   					currCharNum+=6;
;;;1103   					
;;;1104   					buf[currCharNum++]=(',');
;;;1105   					sprintf(&buf[currCharNum],"%03d",shorttime);
;;;1106   					currCharNum+=3;
;;;1107   					
;;;1108   					buf[currCharNum++]=(',');
;;;1109   					sprintf(&buf[currCharNum],"%1d",mainswitch);
;;;1110   					currCharNum+=1;
;;;1111   					
;;;1112   					buf[currCharNum++]=(',');
;;;1113   					sprintf(&buf[currCharNum],"%1d",finishflag);
;;;1114   					currCharNum+=1;
;;;1115   					
;;;1116   					buf[currCharNum++]=(',');
;;;1117   					sprintf(&buf[currCharNum],"%1d",lockflag);
;;;1118   					currCharNum+=1;
;;;1119   					
;;;1120   					buf[currCharNum++]=(',');
;;;1121   					sprintf(&buf[currCharNum],"%2d",version);
;;;1122   					currCharNum+=2;
;;;1123   					
;;;1124   					buf[currCharNum++]=(',');
;;;1125   					sprintf(&buf[currCharNum],"%03d",Temperature);
;;;1126   					currCharNum+=3;
;;;1127   					
;;;1128   					buf[currCharNum++]=(',');
;;;1129   					sprintf(&buf[currCharNum],"%1d",overflag);
;;;1130   					currCharNum+=1;
;;;1131   //					buf[currCharNum++]=(',');
;;;1132   //					sprintf(&buf[currCharNum],"%d",H_L);
;;;1133   //					currCharNum++;
;;;1134   					
;;;1135   //					buf[currCharNum++]=(',');
;;;1136   //					sprintf(&buf[currCharNum],"%d",LM_S);
;;;1137   //					currCharNum++;
;;;1138   					
;;;1139   //					buf[currCharNum++]=(',');
;;;1140   //					sprintf(&buf[currCharNum],"%02d",(int)temperature);
;;;1141   //					currCharNum+=2;
;;;1142   					
;;;1143   				  buf[currCharNum++ ] = ChrEndR;
;;;1144   				  buf[currCharNum++ ] = ChrEndS;
;;;1145   				}
;;;1146   				else
;;;1147   				{
;;;1148   					return SetErr_ACK(buf, addr ,CMD_ERR);
;;;1149   				}
;;;1150   				break;
;;;1151   			case 1:
;;;1152   				pntlen = 1;
;;;1153   				if(buf[currCharNum]=='?')
;;;1154   				{
;;;1155   					  sprintf(&buf[currCharNum],"%1d",MODE);
;;;1156   				    currCharNum+=pntlen;
;;;1157   				    buf[currCharNum ++] = ChrEndS;
;;;1158   					
;;;1159   				}
;;;1160   				else
;;;1161   				{
;;;1162   					pntlen = 1;				
;;;1163   					for(i=0,temp1=0;i<pntlen;i++)
;;;1164   					{
;;;1165   						  temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1166   					}		                   
;;;1167   //					if(temp1>1)
;;;1168   //					{
;;;1169   //						return SetErr_ACK(buf, addr ,PARA_ERR);
;;;1170   //					}
;;;1171   					MODE=temp1;
;;;1172   //					Off_GPOI_ResetSet();
;;;1173   					OnOff_GPOI_ResetSet( 2, 0 );
;;;1174   					mainswitch = 0;
;;;1175   					sendwait = 3;
;;;1176   					MODE_PARASET(MODE);
;;;1177   	//				Change_LM_Val(LM_S_Vale);
;;;1178   					buf[currCharNum++] = ChrEndR;
;;;1179   				}
;;;1180   				break;
;;;1181   				case 2:
;;;1182   				pntlen = 1;
;;;1183   				if(buf[currCharNum]=='?')
;;;1184   				{
;;;1185   					sprintf(&buf[currCharNum],"%1d",C_DISCHARGE);
0000b0  48e3              LDR      r0,|L9.1088|
0000b2  f8dfa390          LDR      r10,|L9.1092|
0000b6  f04f0b0d          MOV      r11,#0xd              ;1041
0000ba  f04f090a          MOV      r9,#0xa               ;1041
0000be  f06f062f          MVN      r6,#0x2f              ;1165
0000c2  f1b80f13          CMP      r8,#0x13              ;1065
0000c6  d2b2              BCS      |L9.46|
0000c8  e8dff008          TBB      [pc,r8]               ;1065
0000cc  0bbce1fc          DCB      0x0b,0xbc,0xe1,0xfc
0000d0  fbfa0a0a          DCB      0xfb,0xfa,0x0a,0x0a
0000d4  0a0a0a0a          DCB      0x0a,0x0a,0x0a,0x0a
0000d8  f9f8f70a          DCB      0xf9,0xf8,0xf7,0x0a
0000dc  0a0af600          DCB      0x0a,0x0a,0xf6,0x00
0000e0  e7a5              B        |L9.46|
0000e2  5d28              LDRB     r0,[r5,r4]            ;1069
0000e4  283f              CMP      r0,#0x3f              ;1069
0000e6  d1a2              BNE      |L9.46|
0000e8  f8da202c          LDR      r2,[r10,#0x2c]        ;1073  ; Para
0000ec  4656              MOV      r6,r10                ;1073
0000ee  1928              ADDS     r0,r5,r4              ;1073
0000f0  a1d5              ADR      r1,|L9.1096|
0000f2  f7fffffe          BL       __2sprintf
0000f6  1da4              ADDS     r4,r4,#6              ;1073
0000f8  b2a0              UXTH     r0,r4                 ;1074
0000fa  242c              MOVS     r4,#0x2c              ;1076
0000fc  542c              STRB     r4,[r5,r0]            ;1076
0000fe  1c40              ADDS     r0,r0,#1              ;1076
000100  6b72              LDR      r2,[r6,#0x34]         ;1077  ; Para
000102  b287              UXTH     r7,r0                 ;1076
000104  19e8              ADDS     r0,r5,r7              ;1077
000106  a1d0              ADR      r1,|L9.1096|
000108  f7fffffe          BL       __2sprintf
00010c  1dbf              ADDS     r7,r7,#6              ;1077
00010e  b2b8              UXTH     r0,r7                 ;1078
000110  542c              STRB     r4,[r5,r0]            ;1080
000112  1c40              ADDS     r0,r0,#1              ;1080
000114  6ab2              LDR      r2,[r6,#0x28]         ;1081  ; Para
000116  b287              UXTH     r7,r0                 ;1080
000118  19e8              ADDS     r0,r5,r7              ;1081
00011a  a1cd              ADR      r1,|L9.1104|
00011c  f7fffffe          BL       __2sprintf
000120  1d7f              ADDS     r7,r7,#5              ;1081
000122  b2b8              UXTH     r0,r7                 ;1082
000124  542c              STRB     r4,[r5,r0]            ;1084
000126  1c40              ADDS     r0,r0,#1              ;1084
000128  6b32              LDR      r2,[r6,#0x30]         ;1085  ; Para
00012a  b287              UXTH     r7,r0                 ;1084
00012c  19e8              ADDS     r0,r5,r7              ;1085
00012e  a1c8              ADR      r1,|L9.1104|
000130  f7fffffe          BL       __2sprintf
000134  1d7f              ADDS     r7,r7,#5              ;1085
000136  b2b8              UXTH     r0,r7                 ;1086
000138  542c              STRB     r4,[r5,r0]            ;1088
00013a  1c40              ADDS     r0,r0,#1              ;1088
00013c  6bb2              LDR      r2,[r6,#0x38]         ;1089  ; Para
00013e  b287              UXTH     r7,r0                 ;1088
000140  19e8              ADDS     r0,r5,r7              ;1089
000142  a1c3              ADR      r1,|L9.1104|
000144  f7fffffe          BL       __2sprintf
000148  1d7f              ADDS     r7,r7,#5              ;1089
00014a  b2b8              UXTH     r0,r7                 ;1090
00014c  542c              STRB     r4,[r5,r0]            ;1092
00014e  1c40              ADDS     r0,r0,#1              ;1092
000150  6bf2              LDR      r2,[r6,#0x3c]         ;1093  ; Para
000152  b287              UXTH     r7,r0                 ;1092
000154  19e8              ADDS     r0,r5,r7              ;1093
000156  a1c0              ADR      r1,|L9.1112|
000158  f7fffffe          BL       __2sprintf
00015c  1d3f              ADDS     r7,r7,#4              ;1093
00015e  b2b8              UXTH     r0,r7                 ;1094
000160  542c              STRB     r4,[r5,r0]            ;1096
000162  1c40              ADDS     r0,r0,#1              ;1096
000164  6c32              LDR      r2,[r6,#0x40]         ;1097  ; Para
000166  b287              UXTH     r7,r0                 ;1096
000168  19e8              ADDS     r0,r5,r7              ;1097
00016a  a1bb              ADR      r1,|L9.1112|
00016c  f7fffffe          BL       __2sprintf
000170  1d3f              ADDS     r7,r7,#4              ;1097
000172  b2b8              UXTH     r0,r7                 ;1098
000174  542c              STRB     r4,[r5,r0]            ;1100
000176  1c40              ADDS     r0,r0,#1              ;1100
000178  b286              UXTH     r6,r0                 ;1100
00017a  48b9              LDR      r0,|L9.1120|
00017c  ed900a00          VLDR     s0,[r0,#0]            ;1101
000180  eddf0ab8          VLDR     s1,|L9.1124|
000184  19a8              ADDS     r0,r5,r6              ;1101
000186  a1b0              ADR      r1,|L9.1096|
000188  ee200a20          VMUL.F32 s0,s0,s1              ;1101
00018c  eebd0ac0          VCVT.S32.F32 s0,s0                 ;1101
000190  ee102a10          VMOV     r2,s0                 ;1101
000194  f7fffffe          BL       __2sprintf
000198  1db6              ADDS     r6,r6,#6              ;1101
00019a  b2b0              UXTH     r0,r6                 ;1102
00019c  49b2              LDR      r1,|L9.1128|
00019e  542c              STRB     r4,[r5,r0]            ;1104
0001a0  1c40              ADDS     r0,r0,#1              ;1104
0001a2  b286              UXTH     r6,r0                 ;1104
0001a4  780a              LDRB     r2,[r1,#0]            ;1105  ; shorttime
0001a6  19a8              ADDS     r0,r5,r6              ;1105
0001a8  a1b0              ADR      r1,|L9.1132|
0001aa  f7fffffe          BL       __2sprintf
0001ae  1cf6              ADDS     r6,r6,#3              ;1105
0001b0  b2b0              UXTH     r0,r6                 ;1106
0001b2  49a2              LDR      r1,|L9.1084|
0001b4  542c              STRB     r4,[r5,r0]            ;1108
0001b6  1c40              ADDS     r0,r0,#1              ;1108
0001b8  b286              UXTH     r6,r0                 ;1108
0001ba  19a8              ADDS     r0,r5,r6              ;1109
0001bc  3958              SUBS     r1,r1,#0x58           ;1109
0001be  798a              LDRB     r2,[r1,#6]            ;1109  ; mainswitch
0001c0  a1ac              ADR      r1,|L9.1140|
0001c2  f7fffffe          BL       __2sprintf
0001c6  1c76              ADDS     r6,r6,#1              ;1109
0001c8  b2b0              UXTH     r0,r6                 ;1110
0001ca  49ab              LDR      r1,|L9.1144|
0001cc  542c              STRB     r4,[r5,r0]            ;1112
0001ce  1c40              ADDS     r0,r0,#1              ;1112
0001d0  b286              UXTH     r6,r0                 ;1112
0001d2  780a              LDRB     r2,[r1,#0]            ;1113  ; finishflag
0001d4  19a8              ADDS     r0,r5,r6              ;1113
0001d6  a1a7              ADR      r1,|L9.1140|
0001d8  f7fffffe          BL       __2sprintf
0001dc  1c76              ADDS     r6,r6,#1              ;1113
0001de  b2b0              UXTH     r0,r6                 ;1114
0001e0  49a6              LDR      r1,|L9.1148|
0001e2  542c              STRB     r4,[r5,r0]            ;1116
0001e4  1c40              ADDS     r0,r0,#1              ;1116
0001e6  b286              UXTH     r6,r0                 ;1116
0001e8  780a              LDRB     r2,[r1,#0]            ;1117  ; lockflag
0001ea  19a8              ADDS     r0,r5,r6              ;1117
0001ec  a1a1              ADR      r1,|L9.1140|
0001ee  f7fffffe          BL       __2sprintf
0001f2  1c76              ADDS     r6,r6,#1              ;1117
0001f4  b2b0              UXTH     r0,r6                 ;1118
0001f6  49a2              LDR      r1,|L9.1152|
0001f8  542c              STRB     r4,[r5,r0]            ;1120
0001fa  1c40              ADDS     r0,r0,#1              ;1120
0001fc  b286              UXTH     r6,r0                 ;1120
0001fe  780a              LDRB     r2,[r1,#0]            ;1121  ; version
000200  19a8              ADDS     r0,r5,r6              ;1121
000202  a1a0              ADR      r1,|L9.1156|
000204  f7fffffe          BL       __2sprintf
000208  1cb6              ADDS     r6,r6,#2              ;1121
00020a  b2b0              UXTH     r0,r6                 ;1122
00020c  499e              LDR      r1,|L9.1160|
00020e  542c              STRB     r4,[r5,r0]            ;1124
000210  1c40              ADDS     r0,r0,#1              ;1124
000212  b286              UXTH     r6,r0                 ;1124
000214  f9b12000          LDRSH    r2,[r1,#0]            ;1125  ; Temperature
000218  19a8              ADDS     r0,r5,r6              ;1125
00021a  a194              ADR      r1,|L9.1132|
00021c  f7fffffe          BL       __2sprintf
000220  1cf6              ADDS     r6,r6,#3              ;1125
000222  b2b0              UXTH     r0,r6                 ;1126
000224  4999              LDR      r1,|L9.1164|
000226  542c              STRB     r4,[r5,r0]            ;1128
000228  1c40              ADDS     r0,r0,#1              ;1128
00022a  b284              UXTH     r4,r0                 ;1128
00022c  780a              LDRB     r2,[r1,#0]            ;1129  ; overflag
00022e  1928              ADDS     r0,r5,r4              ;1129
000230  a190              ADR      r1,|L9.1140|
000232  f7fffffe          BL       __2sprintf
000236  1c64              ADDS     r4,r4,#1              ;1129
000238  b2a0              UXTH     r0,r4                 ;1130
00023a  f805b000          STRB     r11,[r5,r0]           ;1143
00023e  1c40              ADDS     r0,r0,#1              ;1143
000240  b280              UXTH     r0,r0                 ;1143
000242  e3ef              B        |L9.2596|
000244  5d28              LDRB     r0,[r5,r4]            ;1153
000246  2201              MOVS     r2,#1                 ;1152
000248  283f              CMP      r0,#0x3f              ;1153
00024a  d01a              BEQ      |L9.642|
00024c  2100              MOVS     r1,#0                 ;1163
00024e  4608              MOV      r0,r1                 ;1163
                  |L9.592|
000250  5d2b              LDRB     r3,[r5,r4]            ;1165
000252  eb000080          ADD      r0,r0,r0,LSL #2       ;1165
000256  1c64              ADDS     r4,r4,#1              ;1165
000258  1c49              ADDS     r1,r1,#1              ;1165
00025a  eb060040          ADD      r0,r6,r0,LSL #1       ;1165
00025e  b2c9              UXTB     r1,r1                 ;1163
000260  4418              ADD      r0,r0,r3              ;1165
000262  b2a4              UXTH     r4,r4                 ;1165
000264  4291              CMP      r1,r2                 ;1163
000266  d3f3              BCC      |L9.592|
000268  4e74              LDR      r6,|L9.1084|
00026a  3e58              SUBS     r6,r6,#0x58           ;1171
00026c  7170              STRB     r0,[r6,#5]            ;1171
00026e  2100              MOVS     r1,#0                 ;1173
000270  2002              MOVS     r0,#2                 ;1173
000272  f7fffffe          BL       OnOff_GPOI_ResetSet
000276  2000              MOVS     r0,#0                 ;1174
000278  71b0              STRB     r0,[r6,#6]            ;1174
00027a  2003              MOVS     r0,#3                 ;1175
00027c  7230              STRB     r0,[r6,#8]            ;1175
00027e  7970              LDRB     r0,[r6,#5]            ;1176  ; MODE
000280  e21c              B        |L9.1724|
                  |L9.642|
000282  496e              LDR      r1,|L9.1084|
000284  1928              ADDS     r0,r5,r4              ;1155
000286  3958              SUBS     r1,r1,#0x58           ;1155
000288  794a              LDRB     r2,[r1,#5]            ;1155  ; MODE
00028a  a17a              ADR      r1,|L9.1140|
00028c  e023              B        |L9.726|
00028e  5d29              LDRB     r1,[r5,r4]            ;1183
000290  2201              MOVS     r2,#1                 ;1182
000292  293f              CMP      r1,#0x3f              ;1183
                  |L9.660|
000294  d07d              BEQ      |L9.914|
;;;1186   				    currCharNum+=pntlen;
;;;1187   				    buf[currCharNum ++] = ChrEndS;
;;;1188   					
;;;1189   				}
;;;1190   				else
;;;1191   				{
;;;1192   					pntlen = 1;				
;;;1193   					for(i=0,temp1=0;i<pntlen;i++)
000296  2100              MOVS     r1,#0
000298  4608              MOV      r0,r1
                  |L9.666|
;;;1194   					{
;;;1195   						  temp1 = temp1*10+(buf[currCharNum++]-0x30);
00029a  5d2b              LDRB     r3,[r5,r4]
00029c  eb000080          ADD      r0,r0,r0,LSL #2
0002a0  1c64              ADDS     r4,r4,#1
0002a2  1c49              ADDS     r1,r1,#1
0002a4  eb060040          ADD      r0,r6,r0,LSL #1
0002a8  b2c9              UXTB     r1,r1                 ;1193
0002aa  4418              ADD      r0,r0,r3
0002ac  b2a4              UXTH     r4,r4
0002ae  4291              CMP      r1,r2                 ;1193
0002b0  d3f3              BCC      |L9.666|
;;;1196   					}		                   
;;;1197   					if(temp1>1)
0002b2  2801              CMP      r0,#1
0002b4  d913              BLS      |L9.734|
                  |L9.694|
;;;1198   					{
;;;1199   						return SetErr_ACK(buf, addr ,PARA_ERR);
0002b6  e006              B        |L9.710|
0002b8  e3fe              B        |L9.2744|
0002ba  e3fe              B        |L9.2746|
0002bc  e3fe              B        |L9.2748|
0002be  e3fe              B        |L9.2750|
0002c0  e3fe              B        |L9.2752|
0002c2  e1fe              B        |L9.1730|
0002c4  e012              B        |L9.748|
                  |L9.710|
0002c6  2201              MOVS     r2,#1
                  |L9.712|
;;;1200   					}
;;;1201   //					MODE=temp1;
;;;1202   					
;;;1203   					
;;;1204   					mainswitch = temp1;
;;;1205   //						Para.CSET_Voltage = 5000;
;;;1206   //						Para.CSET_Current = 1000;
;;;1207   					
;;;1208   						
;;;1209   					MODE_ONOFF(mainswitch);
;;;1210   	//				Change_LM_Val(LM_S_Vale);
;;;1211   					buf[currCharNum++] = ChrEndR;
;;;1212   		        }
;;;1213   				break;
;;;1214   				case 3:
;;;1215   				pntlen = 1;
;;;1216   				if(buf[currCharNum]=='?')
;;;1217   				{
;;;1218   					  sprintf(&buf[currCharNum],"%1d",C_DISCHARGE);
;;;1219   				    currCharNum+=pntlen;
;;;1220   				    buf[currCharNum ++] = ChrEndS;
;;;1221   					
;;;1222   				}
;;;1223   				else
;;;1224   				{
;;;1225   					if(currCharNum == 0x0b)
;;;1226   					{						
;;;1227   						for(i=0,temp1=0;i<6;i++)
;;;1228   						{
;;;1229   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1230   						}
;;;1231   					}		
;;;1232   					Para.IR_Start_C = temp1;//起始电流
;;;1233   					temp1 = 0;
;;;1234   					
;;;1235   					if(buf[currCharNum++] == ',')
;;;1236   					{
;;;1237   						for(i=0,temp1=0;i<5;i++)
;;;1238   						{
;;;1239   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1240   						}
;;;1241   					}	
;;;1242   					Para.IR_Step_C = temp1;//步进电流
;;;1243   					temp1 = 0;
;;;1244   					 
;;;1245   					if(buf[currCharNum++] == ',')
;;;1246   					{
;;;1247   						for(i=0,temp1=0;i<5;i++)
;;;1248   						{
;;;1249   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1250   						}
;;;1251   					}	
;;;1252   					Para.IR_Threshold_V = temp1;//门槛电压
;;;1253   					temp1 = 0;
;;;1254   					
;;;1255   					if(buf[currCharNum++] == ',')
;;;1256   					{
;;;1257   						for(i=0,temp1=0;i<3;i++)
;;;1258   						{
;;;1259   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1260   						}
;;;1261   					}	
;;;1262   					Para.IR_Step_Time = temp1;//步进时间
;;;1263   					temp1 = 0;
;;;1264   					
;;;1265   					if(buf[currCharNum++] == ',')
;;;1266   					{
;;;1267   						for(i=0,temp1=0;i<6;i++)
;;;1268   						{
;;;1269   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1270   						}
;;;1271   					}	
;;;1272   					Para.POWER_OutPut_V = temp1;//电源电压
;;;1273   					temp1 = 0;
;;;1274   					
;;;1275   					if(buf[currCharNum++] == ',')
;;;1276   					{
;;;1277   						for(i=0,temp1=0;i<5;i++)
;;;1278   						{
;;;1279   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1280   						}
;;;1281   					}	
;;;1282   					Para.POWER_Limit_C = temp1;//电源电流
;;;1283   					temp1 = 0;
;;;1284   					
;;;1285   					if(buf[currCharNum++] == ',')
;;;1286   					{
;;;1287   						for(i=0,temp1=0;i<5;i++)
;;;1288   						{
;;;1289   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1290   						}
;;;1291   					}	
;;;1292   					Para.POWER_Cutoff_C = temp1;//设置充电截止电流
;;;1293   					temp1 = 0;
;;;1294   					
;;;1295   					if(buf[currCharNum++] == ',')
;;;1296   					{
;;;1297   						for(i=0,temp1=0;i<6;i++)
;;;1298   						{
;;;1299   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1300   						}
;;;1301   					}	
;;;1302   					Para.LOAD_V = temp1;//负载电压
;;;1303   					temp1 = 0;
;;;1304   					
;;;1305   					if(buf[currCharNum++] == ',')
;;;1306   					{
;;;1307   						for(i=0,temp1=0;i<6;i++)
;;;1308   						{
;;;1309   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1310   						}
;;;1311   					}	
;;;1312   					Para.LOAD_C = temp1;//负载电流
;;;1313   					temp1 = 0;
;;;1314   					
;;;1315   					if(buf[currCharNum++] == ',')
;;;1316   					{
;;;1317   						for(i=0,temp1=0;i<6;i++)
;;;1318   						{
;;;1319   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1320   						}
;;;1321   					}	
;;;1322   					Para.LOAD_Cutoff_V = temp1;//设置负载截止电压
;;;1323   					temp1 = 0;
;;;1324   					
;;;1325   					if(buf[currCharNum++] == ',')
;;;1326   					{
;;;1327   						for(i=0,temp1=0;i<5;i++)
;;;1328   						{
;;;1329   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1330   						}
;;;1331   					}	
;;;1332   					Para.CDC_OutPut_V = temp1;//设置容量测试充电电压
;;;1333   					temp1 = 0;
;;;1334   					
;;;1335   					if(buf[currCharNum++] == ',')
;;;1336   					{
;;;1337   						for(i=0,temp1=0;i<5;i++)
;;;1338   						{
;;;1339   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1340   						}
;;;1341   					}	
;;;1342   					Para.CDC_Limit_C = temp1;//设置容量测试充电限制电流
;;;1343   					temp1 = 0;
;;;1344   					
;;;1345   					if(buf[currCharNum++] == ',')
;;;1346   					{
;;;1347   						for(i=0,temp1=0;i<5;i++)
;;;1348   						{
;;;1349   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1350   						}
;;;1351   					}	
;;;1352   					Para.CDC_Ccutoff_V = temp1;//设置容量测试充电截止电压
;;;1353   					temp1 = 0;
;;;1354   					
;;;1355   					if(buf[currCharNum++] == ',')
;;;1356   					{
;;;1357   						for(i=0,temp1=0;i<5;i++)
;;;1358   						{
;;;1359   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1360   						}
;;;1361   					}	
;;;1362   					Para.CDC_Ccutoff_C = temp1;//设置容量测试充电截止电流
;;;1363   					temp1 = 0;
;;;1364   					
;;;1365   					if(buf[currCharNum++] == ',')
;;;1366   					{
;;;1367   						for(i=0,temp1=0;i<5;i++)
;;;1368   						{
;;;1369   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1370   						}
;;;1371   					}	
;;;1372   					Para.CDC_Load_C = temp1;//设置容量测试放电电流
;;;1373   					temp1 = 0;
;;;1374   					
;;;1375   					if(buf[currCharNum++] == ',')
;;;1376   					{
;;;1377   						for(i=0,temp1=0;i<5;i++)
;;;1378   						{
;;;1379   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1380   						}
;;;1381   					}	
;;;1382   					Para.CDC_Dcutoff_V = temp1;//设置容量测试放电截止电压
;;;1383   					temp1 = 0;
;;;1384   					
;;;1385   					if(buf[currCharNum++] == ',')
;;;1386   					{
;;;1387   						for(i=0,temp1=0;i<3;i++)
;;;1388   						{
;;;1389   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1390   						}
;;;1391   					}	
;;;1392   					Para.CDC_Cycle_Time = temp1;//循环次数
;;;1393   					temp1 = 0;
;;;1394   					
;;;1395   					if(buf[currCharNum++] == ',')
;;;1396   					{
;;;1397   						for(i=0,temp1=0;i<3;i++)
;;;1398   						{
;;;1399   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1400   						}
;;;1401   					}	
;;;1402   					if(MODE == 0)
;;;1403   					{
;;;1404   						Para.CLOAD_MODE = temp1;//负载模式
;;;1405   					}
;;;1406   					temp1 = 0;
;;;1407   //					MODE_PARASET(MODE);
;;;1408   					
;;;1409   					if(buf[currCharNum++] == ',')
;;;1410   					{
;;;1411   						for(i=0,temp1=0;i<3;i++)
;;;1412   						{
;;;1413   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1414   						}
;;;1415   					}	
;;;1416   					Rraly = temp1;//内阻档位
;;;1417   					temp1 = 0;
;;;1418   					
;;;1419   					if(buf[currCharNum++] == ',')
;;;1420   					{
;;;1421   						for(i=0,temp1=0;i<3;i++)
;;;1422   						{
;;;1423   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1424   						}
;;;1425   					}	
;;;1426   					Para.ACT_DELAY = temp1;//激活延时
;;;1427   					temp1 = 0;
;;;1428   					
;;;1429   					if(buf[currCharNum++] == ',')
;;;1430   					{
;;;1431   						for(i=0,temp1=0;i<6;i++)
;;;1432   						{
;;;1433   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1434   						}
;;;1435   					}	
;;;1436   					Para.LOAD_P = temp1*10;//负载功率
;;;1437   					temp1 = 0;
;;;1438   					
;;;1439   					MODE_PARASET(MODE);
;;;1440   					
;;;1441   					 buf[currCharNum++] = ChrEndR;
;;;1442   		        }
;;;1443   				break;
;;;1444   				case 4:
;;;1445   				pntlen = 1;
;;;1446   				if(buf[currCharNum]=='?')
;;;1447   				{
;;;1448   					  sprintf(&buf[currCharNum],"%1d",C_DISCHARGE);
;;;1449   				    currCharNum+=pntlen;
;;;1450   				    buf[currCharNum ++] = ChrEndS;
;;;1451   					
;;;1452   				}
;;;1453   				else
;;;1454   				{
;;;1455   					if(currCharNum == 0x0b)
;;;1456   					{						
;;;1457   						for(i=0,temp1=0;i<2;i++)
;;;1458   						{
;;;1459   							temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1460   						}
;;;1461   					}
;;;1462   					MODE = temp1;//项目
;;;1463   					temp1 = 0;
;;;1464   					
;;;1465   					if(MODE == 0)
;;;1466   					{
;;;1467   						if(buf[currCharNum++] == ',')
;;;1468   						{
;;;1469   							for(i=0,temp1=0;i<6;i++)
;;;1470   							{
;;;1471   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1472   							}
;;;1473   						}	
;;;1474   						
;;;1475   						temp1 = 0;
;;;1476   						
;;;1477   						if(buf[currCharNum++] == ',')
;;;1478   						{
;;;1479   							for(i=0,temp1=0;i<6;i++)
;;;1480   							{
;;;1481   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1482   							}
;;;1483   						}	
;;;1484   						Para.CSET_Current_Laod = temp1;//负载电流
;;;1485   						temp1 = 0;
;;;1486   						
;;;1487   	
;;;1488   						if(Para.CSET_Current_Laod > 15000)
;;;1489   						{
;;;1490   							LOAD_I_SW = 1;
;;;1491   							GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;1492   						}else{
;;;1493   							LOAD_I_SW = 0;
;;;1494   							GPIO_SetBits(GPIOC,GPIO_Pin_11);//电流测量为低档位
;;;1495   						}
;;;1496   						if(buf[currCharNum++] == ',')
;;;1497   						{
;;;1498   							for(i=0,temp1=0;i<1;i++)
;;;1499   							{
;;;1500   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1501   							}
;;;1502   						}
;;;1503   						mainswitch = temp1;//开关
;;;1504   						if(mainswitch == 0)
;;;1505   						{
;;;1506   							LOAD_I_SW = 1;
;;;1507   							GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;1508   						}
;;;1509   					}else if(MODE == 1){
;;;1510   						if(buf[currCharNum++] == ',')
;;;1511   						{
;;;1512   							for(i=0,temp1=0;i<6;i++)
;;;1513   							{
;;;1514   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1515   							}
;;;1516   						}	
;;;1517   						Para.CDC_OutPut_V = temp1;//电源电压
;;;1518   						temp1 = 0;
;;;1519   						
;;;1520   						if(buf[currCharNum++] == ',')
;;;1521   						{
;;;1522   							for(i=0,temp1=0;i<6;i++)
;;;1523   							{
;;;1524   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1525   							}
;;;1526   						}	
;;;1527   						Para.CDC_Limit_C = temp1;//电源电流
;;;1528   						temp1 = 0;
;;;1529   						
;;;1530   						if(buf[currCharNum++] == ',')
;;;1531   						{
;;;1532   							for(i=0,temp1=0;i<1;i++)
;;;1533   							{
;;;1534   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1535   							}
;;;1536   						}
;;;1537   						mainswitch = temp1;//开关
;;;1538   					}else if(MODE == 2){
;;;1539   						LOAD_I_SW = 1;
;;;1540   						GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;1541   						if(buf[currCharNum++] == ',')
;;;1542   						{
;;;1543   							for(i=0,temp1=0;i<6;i++)
;;;1544   							{
;;;1545   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1546   							}
;;;1547   						}	
;;;1548   						Para.IR_Start_C = temp1;//起始电流
;;;1549   						temp1 = 0;
;;;1550   						
;;;1551   						if(buf[currCharNum++] == ',')
;;;1552   						{
;;;1553   							for(i=0,temp1=0;i<6;i++)
;;;1554   							{
;;;1555   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1556   							}
;;;1557   						}	
;;;1558   						Para.IR_Step_C = temp1;//步进电流
;;;1559   						temp1 = 0;
;;;1560   						
;;;1561   						if(buf[currCharNum++] == ',')
;;;1562   						{
;;;1563   							for(i=0,temp1=0;i<1;i++)
;;;1564   							{
;;;1565   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1566   							}
;;;1567   						}
;;;1568   						mainswitch = temp1;//开关
;;;1569   						
;;;1570   						if(mainswitch == 1)
;;;1571   						{
;;;1572   							finishflag = 0;
;;;1573   						}
;;;1574   					}else if(MODE == 3){
;;;1575   						if(buf[currCharNum++] == ',')
;;;1576   						{
;;;1577   							for(i=0,temp1=0;i<6;i++)
;;;1578   							{
;;;1579   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1580   							}
;;;1581   						}	
;;;1582   						Para.CDC_OutPut_V = temp1;//电源电压
;;;1583   						temp1 = 0;
;;;1584   						
;;;1585   						
;;;1586   						if(buf[currCharNum++] == ',')
;;;1587   						{
;;;1588   							for(i=0,temp1=0;i<6;i++)
;;;1589   							{
;;;1590   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1591   							}
;;;1592   						}	
;;;1593   						Para.CDC_Limit_C = temp1;//电源电流
;;;1594   						temp1 = 0;
;;;1595   						
;;;1596   						if(buf[currCharNum++] == ',')
;;;1597   						{
;;;1598   							for(i=0,temp1=0;i<1;i++)
;;;1599   							{
;;;1600   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1601   							}
;;;1602   						}
;;;1603   						mainswitch = temp1;//开关
;;;1604   						
;;;1605   						
;;;1606   					}else if(MODE == 4){
;;;1607   						if(buf[currCharNum++] == ',')
;;;1608   						{
;;;1609   							for(i=0,temp1=0;i<6;i++)
;;;1610   							{
;;;1611   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1612   							}
;;;1613   						}	
;;;1614   						
;;;1615   						temp1 = 0;
;;;1616   						
;;;1617   						if(buf[currCharNum++] == ',')
;;;1618   						{
;;;1619   							for(i=0,temp1=0;i<6;i++)
;;;1620   							{
;;;1621   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1622   							}
;;;1623   						}	
;;;1624   						Para.CSET_Current_Laod = temp1;//负载电流
;;;1625   						temp1 = 0;
;;;1626   						
;;;1627   	
;;;1628   						if(Para.CSET_Current_Laod > 15000)
;;;1629   						{
;;;1630   							LOAD_I_SW = 1;
;;;1631   							GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;1632   						}else{
;;;1633   							LOAD_I_SW = 0;
;;;1634   							GPIO_SetBits(GPIOC,GPIO_Pin_11);//电流测量为低档位
;;;1635   						}
;;;1636   						if(buf[currCharNum++] == ',')
;;;1637   						{
;;;1638   							for(i=0,temp1=0;i<1;i++)
;;;1639   							{
;;;1640   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1641   							}
;;;1642   						}
;;;1643   						mainswitch = temp1;//开关
;;;1644   						if(mainswitch == 0)
;;;1645   						{
;;;1646   							LOAD_I_SW = 1;
;;;1647   							GPIO_ResetBits(GPIOC,GPIO_Pin_11);//电流测量为高档位
;;;1648   						}
;;;1649   					}else if(MODE == 5){
;;;1650   						if(buf[currCharNum++] == ',')
;;;1651   						{
;;;1652   							for(i=0,temp1=0;i<6;i++)
;;;1653   							{
;;;1654   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1655   							}
;;;1656   						}	
;;;1657   						temp1 = 0;
;;;1658   						
;;;1659   						if(buf[currCharNum++] == ',')
;;;1660   						{
;;;1661   							for(i=0,temp1=0;i<6;i++)
;;;1662   							{
;;;1663   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1664   							}
;;;1665   						}	
;;;1666   						temp1 = 0;
;;;1667   						
;;;1668   						if(buf[currCharNum++] == ',')
;;;1669   						{
;;;1670   							for(i=0,temp1=0;i<1;i++)
;;;1671   							{
;;;1672   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1673   							}
;;;1674   						}
;;;1675   						mainswitch = temp1;//开关
;;;1676   						if(mainswitch == 0)
;;;1677   						{
;;;1678   							mainswitch = 0;
;;;1679   						}
;;;1680   					}else if(MODE == 6){
;;;1681   						if(buf[currCharNum++] == ',')
;;;1682   						{
;;;1683   							for(i=0,temp1=0;i<6;i++)
;;;1684   							{
;;;1685   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1686   							}
;;;1687   						}	
;;;1688   						temp1 = 0;
;;;1689   						
;;;1690   						if(buf[currCharNum++] == ',')
;;;1691   						{
;;;1692   							for(i=0,temp1=0;i<6;i++)
;;;1693   							{
;;;1694   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1695   							}
;;;1696   						}	
;;;1697   						temp1 = 0;
;;;1698   						
;;;1699   						if(buf[currCharNum++] == ',')
;;;1700   						{
;;;1701   							for(i=0,temp1=0;i<1;i++)
;;;1702   							{
;;;1703   								temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1704   							}
;;;1705   						}
;;;1706   						mainswitch = temp1;//开关
;;;1707   					}
;;;1708   					
;;;1709   					temp1 = 0;
;;;1710   //					MODE_PARASET(MODE);
;;;1711   					Off_GPOI_ResetSet();
;;;1712   					LIST_ONOFF(mainswitch);
;;;1713   					buf[currCharNum++] = ChrEndR;
;;;1714   		        }
;;;1715   				break;
;;;1716   				case 12://电压校准
;;;1717   				{
;;;1718   					pntlen = 9;
;;;1719   					if(buf[currCharNum]=='?')
;;;1720   					{
;;;1721   						buf[currCharNum++]=(Lvl_Vale>=0?'+':'-');
;;;1722   						sprintf(&buf[currCharNum],"%03.3f",Lvl_Vale);
;;;1723   						currCharNum+=pntlen;
;;;1724   						buf[currCharNum++ ] = ChrEndS;
;;;1725   					}
;;;1726   					else
;;;1727   					{
;;;1728   						tmpFg = 1;
;;;1729   						for(i=0;i<pntlen;i++)
;;;1730   						{
;;;1731   						   if(i==0||i==5)
;;;1732   							  continue;
;;;1733   						   if(IsDigitChar(buf[currCharNum+i])==1)
;;;1734   						   {
;;;1735   							  tmpFg = (tmpFg&0x01);
;;;1736   						   }
;;;1737   						   else
;;;1738   						   {
;;;1739   							  tmpFg = 0;
;;;1740   						   }
;;;1741   						}
;;;1742   						if(tmpFg!=1||buf[currCharNum+pntlen]!=ChrEndR)
;;;1743   						{
;;;1744   							return SetErr_ACK(buf, addr ,CMD_ERR);
;;;1745   							
;;;1746   						}
;;;1747   						temp1=0;
;;;1748   						for(i=0;i<pntlen;i++)
;;;1749   						{
;;;1750   						   if(i==0)
;;;1751   						   {
;;;1752   							   fsingal = 10*(buf[currCharNum++]-0x30);
;;;1753   							   continue; 
;;;1754   						   }else if(i==1)
;;;1755   						   {
;;;1756   							  fsingal = fsingal+(buf[currCharNum++]-0x30);
;;;1757   							  continue; 
;;;1758   						   } 
;;;1759   						   else if(i==5)
;;;1760   						   {
;;;1761   							   currCharNum++;
;;;1762   							   continue; 
;;;1763   						   }
;;;1764   						   else									 
;;;1765   						   temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1766   						}	
;;;1767   						CalHandle(0,fsingal,temp1);
;;;1768   						
;;;1769   					}
;;;1770   				}break;
;;;1771   				case 5:
;;;1772   				pntlen = 1;
;;;1773   				if(buf[currCharNum]=='?')
;;;1774   				{
;;;1775   					sprintf(&buf[currCharNum],"%1d",C_DISCHARGE);
;;;1776   				    currCharNum+=pntlen;
;;;1777   				    buf[currCharNum ++] = ChrEndS;
;;;1778   					
;;;1779   				}
;;;1780   				else
;;;1781   				{
;;;1782   					pntlen = 1;				
;;;1783   					for(i=0,temp1=0;i<pntlen;i++)
;;;1784   					{
;;;1785   						  temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1786   					}		                   
;;;1787   					if(temp1>1)
;;;1788   					{
;;;1789   						return SetErr_ACK(buf, addr ,PARA_ERR);
;;;1790   					}
;;;1791   //					MODE=temp1;
;;;1792   					
;;;1793   					
;;;1794   					overflag = temp1;
;;;1795   //						Para.CSET_Voltage = 5000;
;;;1796   //						Para.CSET_Current = 1000;
;;;1797   					
;;;1798   						
;;;1799   //					MODE_ONOFF(mainswitch);
;;;1800   	//				Change_LM_Val(LM_S_Vale);
;;;1801   					buf[currCharNum++] = ChrEndR;
;;;1802   		        }
;;;1803   				break;
;;;1804   				case 13://电流校准
;;;1805   				{
;;;1806   					pntlen = 9;
;;;1807   					if(buf[currCharNum]=='?')
;;;1808   					{
;;;1809   //						buf[currCharNum++]=(Lvl_Vale>=0?'+':'-');
;;;1810   //									sprintf(&buf[currCharNum],"%03.3f",Lvl_Vale);
;;;1811   //						currCharNum+=pntlen;
;;;1812   //						buf[currCharNum++ ] = ChrEndS;
;;;1813   					}
;;;1814   					else
;;;1815   					{
;;;1816   						tmpFg = 1;
;;;1817   						for(i=0;i<pntlen;i++)
;;;1818   						{
;;;1819   						   if(i==0||i==5)
;;;1820   							  continue;
;;;1821   						   if(IsDigitChar(buf[currCharNum+i])==1)
;;;1822   						   {
;;;1823   							  tmpFg = (tmpFg&0x01);
;;;1824   						   }
;;;1825   						   else
;;;1826   						   {
;;;1827   							  tmpFg = 0;
;;;1828   						   }
;;;1829   						}
;;;1830   						if(tmpFg!=1||buf[currCharNum+pntlen]!=ChrEndR)
;;;1831   						{
;;;1832   							return SetErr_ACK(buf, addr ,CMD_ERR);
;;;1833   							
;;;1834   						}
;;;1835   						temp1=0;
;;;1836   						for(i=0;i<pntlen;i++)
;;;1837   						{
;;;1838   						   if(i==0)
;;;1839   						   {
;;;1840   							   fsingal = 10*(buf[currCharNum++]-0x30);
;;;1841   							   continue; 
;;;1842   						   }else if(i==1)
;;;1843   						   {
;;;1844   							  fsingal = fsingal+(buf[currCharNum++]-0x30);
;;;1845   							  continue; 
;;;1846   						   } 
;;;1847   						   else if(i==5)
;;;1848   						   {
;;;1849   							   currCharNum++;
;;;1850   							   continue; 
;;;1851   						   }
;;;1852   						   else									 
;;;1853   						   temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1854   						}
;;;1855   //						for(i=0;i<pntlen;i++)
;;;1856   //						{
;;;1857   //						   if(i==0)
;;;1858   //						   {
;;;1859   //							   fsingal = buf[currCharNum++]-0x30;
;;;1860   //							   continue; 
;;;1861   //						   } 
;;;1862   //						   else if(i==5)
;;;1863   //						   {
;;;1864   //							   currCharNum++;
;;;1865   //							   continue; 
;;;1866   //						   }
;;;1867   //						   else									 
;;;1868   //						   temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1869   //						}	
;;;1870   						CalHandle(1,fsingal,temp1);
;;;1871   						
;;;1872   					}
;;;1873   				}break;
;;;1874   				case 14://电阻校准
;;;1875   				{
;;;1876   					pntlen = 6;
;;;1877   					if(buf[currCharNum]=='?')
;;;1878   					{
;;;1879   						buf[currCharNum++]=(Lvl_Vale>=0?'+':'-');
;;;1880   									sprintf(&buf[currCharNum],"%03.3f",Lvl_Vale);
;;;1881   						currCharNum+=pntlen;
;;;1882   						buf[currCharNum++ ] = ChrEndS;
;;;1883   					}
;;;1884   					else
;;;1885   					{
;;;1886   						tmpFg = 1;
;;;1887   						for(i=0;i<pntlen;i++)
;;;1888   						{
;;;1889   						   if(i==0||i==4)
;;;1890   							  continue;
;;;1891   						   if(IsDigitChar(buf[currCharNum+i])==1)
;;;1892   						   {
;;;1893   							  tmpFg = (tmpFg&0x01);
;;;1894   						   }
;;;1895   						   else
;;;1896   						   {
;;;1897   							  tmpFg = 0;
;;;1898   						   }
;;;1899   						}
;;;1900   						if(tmpFg!=1||buf[currCharNum+pntlen]!=ChrEndR)
;;;1901   						{
;;;1902   							return SetErr_ACK(buf, addr ,CMD_ERR);
;;;1903   							
;;;1904   						}
;;;1905   						temp1=0;
;;;1906   						for(i=0;i<pntlen;i++)
;;;1907   						{
;;;1908   						   if(i==0)
;;;1909   						   {
;;;1910   							   fsingal = buf[currCharNum++]-0x30;
;;;1911   							   continue; 
;;;1912   						   } 
;;;1913   //						   else if(i==4)
;;;1914   //						   {
;;;1915   //							   currCharNum++;
;;;1916   //							   continue; 
;;;1917   //						   }
;;;1918   //						   else									 
;;;1919   						   temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1920   						}
;;;1921   						CalHandle(2,fsingal,temp1);
;;;1922   						
;;;1923   					}
;;;1924   				}break;
;;;1925   				case 18:
;;;1926   				{
;;;1927   					if(buf[currCharNum]=='?')
;;;1928   					{
;;;1929   //						sprintf(&buf[currCharNum],"%1d",C_DISCHARGE);
;;;1930   //						currCharNum+=pntlen;
;;;1931   //						buf[currCharNum ++] = ChrEndS;
;;;1932   						
;;;1933   					}
;;;1934   					else
;;;1935   					{
;;;1936   						pntlen = 1;				
;;;1937   						for(i=0,temp1=0;i<pntlen;i++)
;;;1938   						{
;;;1939   							  temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1940   						}		                   
;;;1941   						if(temp1>1)
;;;1942   						{
;;;1943   							return SetErr_ACK(buf, addr ,PARA_ERR);
;;;1944   						}
;;;1945   	//					MODE=temp1;
;;;1946   						
;;;1947   						jumpflag = temp1;
;;;1948   						bootflag=1;
;;;1949   						Write_Boot_Flag();
;;;1950   //						if(temp1 == 1)
;;;1951   //						{
;;;1952   //							JumpBoot(55);
;;;1953   //						}
;;;1954   						buf[currCharNum++] = ChrEndR;
;;;1955   					}
;;;1956   				}break;
;;;1957   //				case 15:
;;;1958   //				{
;;;1959   //					pntlen = 1;
;;;1960   //					if(buf[currCharNum]=='?')
;;;1961   //					{
;;;1962   //						sprintf(&buf[currCharNum],"%1d",Gmode_Vale);
;;;1963   //						currCharNum+=pntlen;
;;;1964   //						buf[currCharNum] = ChrEndR;
;;;1965   //						currCharNum++;
;;;1966   //	//				    buf[currCharNum ++] = ChrEndS;
;;;1967   //						
;;;1968   //					}
;;;1969   //					else
;;;1970   //					{
;;;1971   //						tmpFg = 1;
;;;1972   //						for(i=0;i<pntlen;i++)
;;;1973   //						{
;;;1974   //						   if(IsDigitChar(buf[currCharNum+i])==1)
;;;1975   //						   {
;;;1976   //							  tmpFg = (tmpFg&0x01);
;;;1977   //						   }
;;;1978   //						   else
;;;1979   //						   {
;;;1980   //							  tmpFg = 0;
;;;1981   //						   }
;;;1982   //						}
;;;1983   //						if(tmpFg!=1||buf[currCharNum+pntlen]!=ChrEndR)
;;;1984   //						{
;;;1985   //							return SetErr_ACK(buf, addr ,CMD_ERR);
;;;1986   //							
;;;1987   //						}					
;;;1988   //						for(i=0,temp1=0;i<pntlen;i++)
;;;1989   //						{
;;;1990   //							  temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;1991   //						}		                   
;;;1992   //						if(temp1 >Mode_H)
;;;1993   //						 {
;;;1994   //							 return SetErr_ACK(buf, addr ,PARA_ERR);
;;;1995   //							 
;;;1996   //						 }
;;;1997   //						 if(H_L == 1)
;;;1998   //						 {
;;;1999   //							CalHandle(3,1,temp1);
;;;2000   //						 }else{
;;;2001   //							 CalHandle(3,0,temp1);
;;;2002   //						 }
;;;2003   //						 
;;;2004   ////								 Mode=temp1;
;;;2005   ////								Change_MODE_Val(Mode);
;;;2006   ////						 buf[currCharNum++] = ChrEndS;
;;;2007   //					}
;;;2008   //					break;
;;;2009   //				}break;
;;;2010   //				case 16:
;;;2011   //				{
;;;2012   //					pntlen = 3;
;;;2013   //					if(buf[currCharNum]=='?')
;;;2014   //					{
;;;2015   //						sprintf(&buf[currCharNum],"%1d",Gmode_Vale);
;;;2016   //						currCharNum+=pntlen;
;;;2017   //						buf[currCharNum] = ChrEndR;
;;;2018   //						currCharNum++;
;;;2019   //	//				    buf[currCharNum ++] = ChrEndS;
;;;2020   //						
;;;2021   //					}
;;;2022   //					else
;;;2023   //					{
;;;2024   //						tmpFg = 1;
;;;2025   //						for(i=0;i<pntlen;i++)
;;;2026   //						{
;;;2027   //						   if(IsDigitChar(buf[currCharNum+i])==1)
;;;2028   //						   {
;;;2029   //							  tmpFg = (tmpFg&0x01);
;;;2030   //						   }
;;;2031   //						   else
;;;2032   //						   {
;;;2033   //							  tmpFg = 0;
;;;2034   //						   }
;;;2035   //						}
;;;2036   //						if(tmpFg!=1||buf[currCharNum+pntlen]!=ChrEndR)
;;;2037   //						{
;;;2038   //							return SetErr_ACK(buf, addr ,CMD_ERR);
;;;2039   //							
;;;2040   //						}					
;;;2041   //						for(i=0,temp1=0;i<pntlen;i++)
;;;2042   //						{
;;;2043   //							  temp1 = temp1*10+(buf[currCharNum++]-0x30);
;;;2044   //						}		                   
;;;2045   //						 overflag = temp1;
;;;2046   //						 
;;;2047   ////								 Mode=temp1;
;;;2048   ////								Change_MODE_Val(Mode);
;;;2049   ////						 buf[currCharNum++] = ChrEndS;
;;;2050   //					}
;;;2051   //					break;
;;;2052   //				}break;
;;;2053   //				case 17:
;;;2054   //				{
;;;2055   //					pntlen = 2;
;;;2056   //					if(buf[currCharNum]=='?')
;;;2057   //					{
;;;2058   ////						buf[currCharNum++]=(Lvl_Vale>=0?'+':'-');
;;;2059   //									sprintf(&buf[currCharNum],"%02d",(int)temperature);
;;;2060   //						currCharNum+=pntlen;
;;;2061   //						buf[currCharNum++ ] = ChrEndR;
;;;2062   //						buf[currCharNum++ ] = ChrEndS;
;;;2063   //					}
;;;2064   //				}break;
;;;2065   			default:    //ERR
;;;2066              		 return SetErr_ACK(buf, addr ,CMD_ERR);
;;;2067   	 			  
;;;2068   		  }
;;;2069   		  break;
;;;2070   		}
;;;2071   		
;;;2072   	}
;;;2073   	if(j>=CmdNumb)
;;;2074   	{
;;;2075   		return SetErr_ACK(buf, addr ,CMD_ERR);			  
0002c8  4628              MOV      r0,r5
0002ca  9932              LDR      r1,[sp,#0xc8]
0002cc  f7fffffe          BL       SetErr_ACK
;;;2076   	}
;;;2077   	return currCharNum+1;
;;;2078   }
0002d0  b033              ADD      sp,sp,#0xcc
0002d2  e8bd8ff0          POP      {r4-r11,pc}
                  |L9.726|
0002d6  f7fffffe          BL       __2sprintf
0002da  1c64              ADDS     r4,r4,#1              ;1155
0002dc  e3f1              B        |L9.2754|
                  |L9.734|
0002de  4957              LDR      r1,|L9.1084|
0002e0  3958              SUBS     r1,r1,#0x58           ;1204
0002e2  7188              STRB     r0,[r1,#6]            ;1204
0002e4  7988              LDRB     r0,[r1,#6]            ;1209  ; mainswitch
0002e6  f7fffffe          BL       MODE_ONOFF
0002ea  e3eb              B        |L9.2756|
                  |L9.748|
0002ec  5d29              LDRB     r1,[r5,r4]            ;1216
0002ee  293f              CMP      r1,#0x3f              ;1216
0002f0  d0d0              BEQ      |L9.660|
0002f2  2c0b              CMP      r4,#0xb               ;1225
0002f4  d10d              BNE      |L9.786|
0002f6  2000              MOVS     r0,#0                 ;1227
0002f8  4607              MOV      r7,r0                 ;1227
                  |L9.762|
0002fa  5d2a              LDRB     r2,[r5,r4]            ;1229
0002fc  eb070187          ADD      r1,r7,r7,LSL #2       ;1229
000300  eb060141          ADD      r1,r6,r1,LSL #1       ;1229
000304  1c64              ADDS     r4,r4,#1              ;1229
000306  1c40              ADDS     r0,r0,#1              ;1229
000308  1857              ADDS     r7,r2,r1              ;1229
00030a  b2c0              UXTB     r0,r0                 ;1227
00030c  b2a4              UXTH     r4,r4                 ;1229
00030e  2806              CMP      r0,#6                 ;1227
000310  d3f3              BCC      |L9.762|
                  |L9.786|
000312  4650              MOV      r0,r10                ;1232
000314  f8ca7044          STR      r7,[r10,#0x44]        ;1232  ; Para
000318  5d2b              LDRB     r3,[r5,r4]            ;1235
00031a  1c64              ADDS     r4,r4,#1              ;1235
00031c  2200              MOVS     r2,#0                 ;1233
00031e  b2a1              UXTH     r1,r4                 ;1235
000320  2b2c              CMP      r3,#0x2c              ;1235
000322  d10c              BNE      |L9.830|
000324  2300              MOVS     r3,#0                 ;1237
                  |L9.806|
000326  5c6c              LDRB     r4,[r5,r1]            ;1239
000328  eb020282          ADD      r2,r2,r2,LSL #2       ;1239
00032c  1c49              ADDS     r1,r1,#1              ;1239
00032e  1c5b              ADDS     r3,r3,#1              ;1239
000330  eb060242          ADD      r2,r6,r2,LSL #1       ;1239
000334  b2db              UXTB     r3,r3                 ;1237
000336  4422              ADD      r2,r2,r4              ;1239
000338  b289              UXTH     r1,r1                 ;1239
00033a  2b05              CMP      r3,#5                 ;1237
00033c  d3f3              BCC      |L9.806|
                  |L9.830|
00033e  f8a02048          STRH     r2,[r0,#0x48]         ;1242
000342  5c6a              LDRB     r2,[r5,r1]            ;1245
000344  1c49              ADDS     r1,r1,#1              ;1245
000346  2300              MOVS     r3,#0                 ;1243
000348  b289              UXTH     r1,r1                 ;1245
00034a  2a2c              CMP      r2,#0x2c              ;1245
00034c  d10c              BNE      |L9.872|
00034e  2200              MOVS     r2,#0                 ;1247
                  |L9.848|
000350  5c6c              LDRB     r4,[r5,r1]            ;1249
000352  eb030383          ADD      r3,r3,r3,LSL #2       ;1249
000356  1c49              ADDS     r1,r1,#1              ;1249
000358  1c52              ADDS     r2,r2,#1              ;1249
00035a  eb060343          ADD      r3,r6,r3,LSL #1       ;1249
00035e  b2d2              UXTB     r2,r2                 ;1247
000360  4423              ADD      r3,r3,r4              ;1249
000362  b289              UXTH     r1,r1                 ;1249
000364  2a05              CMP      r2,#5                 ;1247
000366  d3f3              BCC      |L9.848|
                  |L9.872|
000368  64c3              STR      r3,[r0,#0x4c]         ;1252  ; Para
00036a  5c6b              LDRB     r3,[r5,r1]            ;1255
00036c  1c49              ADDS     r1,r1,#1              ;1255
00036e  2200              MOVS     r2,#0                 ;1253
000370  b289              UXTH     r1,r1                 ;1255
000372  2b2c              CMP      r3,#0x2c              ;1255
000374  d10c              BNE      |L9.912|
000376  2300              MOVS     r3,#0                 ;1257
                  |L9.888|
000378  5c6c              LDRB     r4,[r5,r1]            ;1259
00037a  eb020282          ADD      r2,r2,r2,LSL #2       ;1259
00037e  1c49              ADDS     r1,r1,#1              ;1259
000380  1c5b              ADDS     r3,r3,#1              ;1259
000382  eb060242          ADD      r2,r6,r2,LSL #1       ;1259
000386  b2db              UXTB     r3,r3                 ;1257
000388  4422              ADD      r2,r2,r4              ;1259
00038a  b289              UXTH     r1,r1                 ;1259
00038c  2b03              CMP      r3,#3                 ;1257
00038e  d3f3              BCC      |L9.888|
                  |L9.912|
000390  e000              B        |L9.916|
                  |L9.914|
000392  e217              B        |L9.1988|
                  |L9.916|
000394  f8a02050          STRH     r2,[r0,#0x50]         ;1262
000398  5c6a              LDRB     r2,[r5,r1]            ;1265
00039a  1c49              ADDS     r1,r1,#1              ;1265
00039c  2300              MOVS     r3,#0                 ;1263
00039e  b289              UXTH     r1,r1                 ;1265
0003a0  2a2c              CMP      r2,#0x2c              ;1265
0003a2  d10c              BNE      |L9.958|
0003a4  2200              MOVS     r2,#0                 ;1267
                  |L9.934|
0003a6  5c6c              LDRB     r4,[r5,r1]            ;1269
0003a8  eb030383          ADD      r3,r3,r3,LSL #2       ;1269
0003ac  1c49              ADDS     r1,r1,#1              ;1269
0003ae  1c52              ADDS     r2,r2,#1              ;1269
0003b0  eb060343          ADD      r3,r6,r3,LSL #1       ;1269
0003b4  b2d2              UXTB     r2,r2                 ;1267
0003b6  4423              ADD      r3,r3,r4              ;1269
0003b8  b289              UXTH     r1,r1                 ;1269
0003ba  2a06              CMP      r2,#6                 ;1267
0003bc  d3f3              BCC      |L9.934|
                  |L9.958|
0003be  6543              STR      r3,[r0,#0x54]         ;1272  ; Para
0003c0  5c6b              LDRB     r3,[r5,r1]            ;1275
0003c2  1c49              ADDS     r1,r1,#1              ;1275
0003c4  2200              MOVS     r2,#0                 ;1273
0003c6  b289              UXTH     r1,r1                 ;1275
0003c8  2b2c              CMP      r3,#0x2c              ;1275
0003ca  d10c              BNE      |L9.998|
0003cc  2300              MOVS     r3,#0                 ;1277
                  |L9.974|
0003ce  5c6c              LDRB     r4,[r5,r1]            ;1279
0003d0  eb020282          ADD      r2,r2,r2,LSL #2       ;1279
0003d4  1c49              ADDS     r1,r1,#1              ;1279
0003d6  1c5b              ADDS     r3,r3,#1              ;1279
0003d8  eb060242          ADD      r2,r6,r2,LSL #1       ;1279
0003dc  b2db              UXTB     r3,r3                 ;1277
0003de  4422              ADD      r2,r2,r4              ;1279
0003e0  b289              UXTH     r1,r1                 ;1279
0003e2  2b05              CMP      r3,#5                 ;1277
0003e4  d3f3              BCC      |L9.974|
                  |L9.998|
0003e6  f8a02058          STRH     r2,[r0,#0x58]         ;1282
0003ea  5c6b              LDRB     r3,[r5,r1]            ;1285
0003ec  1c49              ADDS     r1,r1,#1              ;1285
0003ee  2200              MOVS     r2,#0                 ;1283
0003f0  b289              UXTH     r1,r1                 ;1285
0003f2  2b2c              CMP      r3,#0x2c              ;1285
0003f4  d10c              BNE      |L9.1040|
0003f6  2300              MOVS     r3,#0                 ;1287
                  |L9.1016|
0003f8  5c6c              LDRB     r4,[r5,r1]            ;1289
0003fa  eb020282          ADD      r2,r2,r2,LSL #2       ;1289
0003fe  1c49              ADDS     r1,r1,#1              ;1289
000400  1c5b              ADDS     r3,r3,#1              ;1289
000402  eb060242          ADD      r2,r6,r2,LSL #1       ;1289
000406  b2db              UXTB     r3,r3                 ;1287
000408  4422              ADD      r2,r2,r4              ;1289
00040a  b289              UXTH     r1,r1                 ;1289
00040c  2b05              CMP      r3,#5                 ;1287
00040e  d3f3              BCC      |L9.1016|
                  |L9.1040|
000410  f8a0205a          STRH     r2,[r0,#0x5a]         ;1292
000414  5c6a              LDRB     r2,[r5,r1]            ;1295
000416  1c49              ADDS     r1,r1,#1              ;1295
000418  2300              MOVS     r3,#0                 ;1293
00041a  b289              UXTH     r1,r1                 ;1295
00041c  2a2c              CMP      r2,#0x2c              ;1295
00041e  d13b              BNE      |L9.1176|
000420  2200              MOVS     r2,#0                 ;1297
                  |L9.1058|
000422  5c6c              LDRB     r4,[r5,r1]            ;1299
000424  eb030383          ADD      r3,r3,r3,LSL #2       ;1299
000428  eb060343          ADD      r3,r6,r3,LSL #1       ;1299
00042c  1c49              ADDS     r1,r1,#1              ;1299
00042e  4423              ADD      r3,r3,r4              ;1299
000430  b289              UXTH     r1,r1                 ;1299
000432  e02d              B        |L9.1168|
                  |L9.1076|
000434  256400            DCB      "%d",0
000437  00                DCB      0
                  |L9.1080|
000438  2f00              DCB      "/",0
00043a  00                DCB      0
00043b  00                DCB      0
                  |L9.1084|
                          DCD      ||.data||+0x58
                  |L9.1088|
                          DCD      C_DISCHARGE
                  |L9.1092|
                          DCD      Para
                  |L9.1096|
000448  25303664          DCB      "%06d",0
00044c  00      
00044d  00                DCB      0
00044e  00                DCB      0
00044f  00                DCB      0
                  |L9.1104|
000450  25303564          DCB      "%05d",0
000454  00      
000455  00                DCB      0
000456  00                DCB      0
000457  00                DCB      0
                  |L9.1112|
000458  25303464          DCB      "%04d",0
00045c  00      
00045d  00                DCB      0
00045e  00                DCB      0
00045f  00                DCB      0
                  |L9.1120|
                          DCD      max_discahrgeNum
                  |L9.1124|
000464  447a0000          DCFS     0x447a0000 ; 1000
                  |L9.1128|
                          DCD      shorttime
                  |L9.1132|
00046c  25303364          DCB      "%03d",0
000470  00      
000471  00                DCB      0
000472  00                DCB      0
000473  00                DCB      0
                  |L9.1140|
000474  25316400          DCB      "%1d",0
                  |L9.1144|
                          DCD      finishflag
                  |L9.1148|
                          DCD      lockflag
                  |L9.1152|
                          DCD      version
                  |L9.1156|
000484  25326400          DCB      "%2d",0
                  |L9.1160|
                          DCD      Temperature
                  |L9.1164|
                          DCD      overflag
                  |L9.1168|
000490  1c52              ADDS     r2,r2,#1              ;1299
000492  b2d2              UXTB     r2,r2                 ;1297
000494  2a06              CMP      r2,#6                 ;1297
000496  d3c4              BCC      |L9.1058|
                  |L9.1176|
000498  6603              STR      r3,[r0,#0x60]         ;1302  ; Para
00049a  5c6a              LDRB     r2,[r5,r1]            ;1305
00049c  1c49              ADDS     r1,r1,#1              ;1305
00049e  2300              MOVS     r3,#0                 ;1303
0004a0  b289              UXTH     r1,r1                 ;1305
0004a2  2a2c              CMP      r2,#0x2c              ;1305
0004a4  d10c              BNE      |L9.1216|
0004a6  2200              MOVS     r2,#0                 ;1307
                  |L9.1192|
0004a8  5c6c              LDRB     r4,[r5,r1]            ;1309
0004aa  eb030383          ADD      r3,r3,r3,LSL #2       ;1309
0004ae  1c49              ADDS     r1,r1,#1              ;1309
0004b0  1c52              ADDS     r2,r2,#1              ;1309
0004b2  eb060343          ADD      r3,r6,r3,LSL #1       ;1309
0004b6  b2d2              UXTB     r2,r2                 ;1307
0004b8  4423              ADD      r3,r3,r4              ;1309
0004ba  b289              UXTH     r1,r1                 ;1309
0004bc  2a06              CMP      r2,#6                 ;1307
0004be  d3f3              BCC      |L9.1192|
                  |L9.1216|
0004c0  65c3              STR      r3,[r0,#0x5c]         ;1312  ; Para
0004c2  5c6b              LDRB     r3,[r5,r1]            ;1315
0004c4  1c49              ADDS     r1,r1,#1              ;1315
0004c6  2200              MOVS     r2,#0                 ;1313
0004c8  b289              UXTH     r1,r1                 ;1315
0004ca  2b2c              CMP      r3,#0x2c              ;1315
0004cc  d10c              BNE      |L9.1256|
0004ce  2300              MOVS     r3,#0                 ;1317
                  |L9.1232|
0004d0  5c6c              LDRB     r4,[r5,r1]            ;1319
0004d2  eb020282          ADD      r2,r2,r2,LSL #2       ;1319
0004d6  1c49              ADDS     r1,r1,#1              ;1319
0004d8  1c5b              ADDS     r3,r3,#1              ;1319
0004da  eb060242          ADD      r2,r6,r2,LSL #1       ;1319
0004de  b2db              UXTB     r3,r3                 ;1317
0004e0  4422              ADD      r2,r2,r4              ;1319
0004e2  b289              UXTH     r1,r1                 ;1319
0004e4  2b06              CMP      r3,#6                 ;1317
0004e6  d3f3              BCC      |L9.1232|
                  |L9.1256|
0004e8  f8a02068          STRH     r2,[r0,#0x68]         ;1322
0004ec  5c6a              LDRB     r2,[r5,r1]            ;1325
0004ee  1c49              ADDS     r1,r1,#1              ;1325
0004f0  2300              MOVS     r3,#0                 ;1323
0004f2  b289              UXTH     r1,r1                 ;1325
0004f4  2a2c              CMP      r2,#0x2c              ;1325
0004f6  d10c              BNE      |L9.1298|
0004f8  2200              MOVS     r2,#0                 ;1327
                  |L9.1274|
0004fa  5c6c              LDRB     r4,[r5,r1]            ;1329
0004fc  eb030383          ADD      r3,r3,r3,LSL #2       ;1329
000500  1c49              ADDS     r1,r1,#1              ;1329
000502  1c52              ADDS     r2,r2,#1              ;1329
000504  eb060343          ADD      r3,r6,r3,LSL #1       ;1329
000508  b2d2              UXTB     r2,r2                 ;1327
00050a  4423              ADD      r3,r3,r4              ;1329
00050c  b289              UXTH     r1,r1                 ;1329
00050e  2a05              CMP      r2,#5                 ;1327
000510  d3f3              BCC      |L9.1274|
                  |L9.1298|
000512  66c3              STR      r3,[r0,#0x6c]         ;1332  ; Para
000514  5c6b              LDRB     r3,[r5,r1]            ;1335
000516  1c49              ADDS     r1,r1,#1              ;1335
000518  2200              MOVS     r2,#0                 ;1333
00051a  b289              UXTH     r1,r1                 ;1335
00051c  2b2c              CMP      r3,#0x2c              ;1335
00051e  d10c              BNE      |L9.1338|
000520  2300              MOVS     r3,#0                 ;1337
                  |L9.1314|
000522  5c6c              LDRB     r4,[r5,r1]            ;1339
000524  eb020282          ADD      r2,r2,r2,LSL #2       ;1339
000528  1c49              ADDS     r1,r1,#1              ;1339
00052a  1c5b              ADDS     r3,r3,#1              ;1339
00052c  eb060242          ADD      r2,r6,r2,LSL #1       ;1339
000530  b2db              UXTB     r3,r3                 ;1337
000532  4422              ADD      r2,r2,r4              ;1339
000534  b289              UXTH     r1,r1                 ;1339
000536  2b05              CMP      r3,#5                 ;1337
000538  d3f3              BCC      |L9.1314|
                  |L9.1338|
00053a  f8a02070          STRH     r2,[r0,#0x70]         ;1342
00053e  5c6a              LDRB     r2,[r5,r1]            ;1345
000540  1c49              ADDS     r1,r1,#1              ;1345
000542  2300              MOVS     r3,#0                 ;1343
000544  b289              UXTH     r1,r1                 ;1345
000546  2a2c              CMP      r2,#0x2c              ;1345
000548  d10c              BNE      |L9.1380|
00054a  2200              MOVS     r2,#0                 ;1347
                  |L9.1356|
00054c  5c6c              LDRB     r4,[r5,r1]            ;1349
00054e  eb030383          ADD      r3,r3,r3,LSL #2       ;1349
000552  1c49              ADDS     r1,r1,#1              ;1349
000554  1c52              ADDS     r2,r2,#1              ;1349
000556  eb060343          ADD      r3,r6,r3,LSL #1       ;1349
00055a  b2d2              UXTB     r2,r2                 ;1347
00055c  4423              ADD      r3,r3,r4              ;1349
00055e  b289              UXTH     r1,r1                 ;1349
000560  2a05              CMP      r2,#5                 ;1347
000562  d3f3              BCC      |L9.1356|
                  |L9.1380|
000564  6743              STR      r3,[r0,#0x74]         ;1352  ; Para
000566  5c6b              LDRB     r3,[r5,r1]            ;1355
000568  1c49              ADDS     r1,r1,#1              ;1355
00056a  2200              MOVS     r2,#0                 ;1353
00056c  b289              UXTH     r1,r1                 ;1355
00056e  2b2c              CMP      r3,#0x2c              ;1355
000570  d10c              BNE      |L9.1420|
000572  2300              MOVS     r3,#0                 ;1357
                  |L9.1396|
000574  5c6c              LDRB     r4,[r5,r1]            ;1359
000576  eb020282          ADD      r2,r2,r2,LSL #2       ;1359
00057a  1c49              ADDS     r1,r1,#1              ;1359
00057c  1c5b              ADDS     r3,r3,#1              ;1359
00057e  eb060242          ADD      r2,r6,r2,LSL #1       ;1359
000582  b2db              UXTB     r3,r3                 ;1357
000584  4422              ADD      r2,r2,r4              ;1359
000586  b289              UXTH     r1,r1                 ;1359
000588  2b05              CMP      r3,#5                 ;1357
00058a  d3f3              BCC      |L9.1396|
                  |L9.1420|
00058c  f8a02078          STRH     r2,[r0,#0x78]         ;1362
000590  5c6a              LDRB     r2,[r5,r1]            ;1365
000592  1c49              ADDS     r1,r1,#1              ;1365
000594  2300              MOVS     r3,#0                 ;1363
000596  b289              UXTH     r1,r1                 ;1365
000598  2a2c              CMP      r2,#0x2c              ;1365
00059a  d10c              BNE      |L9.1462|
00059c  2200              MOVS     r2,#0                 ;1367
                  |L9.1438|
00059e  5c6c              LDRB     r4,[r5,r1]            ;1369
0005a0  eb030383          ADD      r3,r3,r3,LSL #2       ;1369
0005a4  1c49              ADDS     r1,r1,#1              ;1369
0005a6  1c52              ADDS     r2,r2,#1              ;1369
0005a8  eb060343          ADD      r3,r6,r3,LSL #1       ;1369
0005ac  b2d2              UXTB     r2,r2                 ;1367
0005ae  4423              ADD      r3,r3,r4              ;1369
0005b0  b289              UXTH     r1,r1                 ;1369
0005b2  2a05              CMP      r2,#5                 ;1367
0005b4  d3f3              BCC      |L9.1438|
                  |L9.1462|
0005b6  67c3              STR      r3,[r0,#0x7c]         ;1372  ; Para
0005b8  5c6a              LDRB     r2,[r5,r1]            ;1375
0005ba  1c49              ADDS     r1,r1,#1              ;1375
0005bc  2300              MOVS     r3,#0                 ;1373
0005be  b289              UXTH     r1,r1                 ;1375
0005c0  2a2c              CMP      r2,#0x2c              ;1375
0005c2  d10c              BNE      |L9.1502|
0005c4  2200              MOVS     r2,#0                 ;1377
                  |L9.1478|
0005c6  5c6c              LDRB     r4,[r5,r1]            ;1379
0005c8  eb030383          ADD      r3,r3,r3,LSL #2       ;1379
0005cc  1c49              ADDS     r1,r1,#1              ;1379
0005ce  1c52              ADDS     r2,r2,#1              ;1379
0005d0  eb060343          ADD      r3,r6,r3,LSL #1       ;1379
0005d4  b2d2              UXTB     r2,r2                 ;1377
0005d6  4423              ADD      r3,r3,r4              ;1379
0005d8  b289              UXTH     r1,r1                 ;1379
0005da  2a05              CMP      r2,#5                 ;1377
0005dc  d3f3              BCC      |L9.1478|
                  |L9.1502|
0005de  f8c03080          STR      r3,[r0,#0x80]         ;1382  ; Para
0005e2  5c6b              LDRB     r3,[r5,r1]            ;1385
0005e4  1c49              ADDS     r1,r1,#1              ;1385
0005e6  2200              MOVS     r2,#0                 ;1383
0005e8  b289              UXTH     r1,r1                 ;1385
0005ea  2b2c              CMP      r3,#0x2c              ;1385
0005ec  d10c              BNE      |L9.1544|
0005ee  2300              MOVS     r3,#0                 ;1387
                  |L9.1520|
0005f0  5c6c              LDRB     r4,[r5,r1]            ;1389
0005f2  eb020282          ADD      r2,r2,r2,LSL #2       ;1389
0005f6  1c49              ADDS     r1,r1,#1              ;1389
0005f8  1c5b              ADDS     r3,r3,#1              ;1389
0005fa  eb060242          ADD      r2,r6,r2,LSL #1       ;1389
0005fe  b2db              UXTB     r3,r3                 ;1387
000600  4422              ADD      r2,r2,r4              ;1389
000602  b289              UXTH     r1,r1                 ;1389
000604  2b03              CMP      r3,#3                 ;1387
000606  d3f3              BCC      |L9.1520|
                  |L9.1544|
000608  f8802084          STRB     r2,[r0,#0x84]         ;1392
00060c  5c6a              LDRB     r2,[r5,r1]            ;1395
00060e  1c49              ADDS     r1,r1,#1              ;1395
000610  2300              MOVS     r3,#0                 ;1393
000612  b289              UXTH     r1,r1                 ;1395
000614  2a2c              CMP      r2,#0x2c              ;1395
000616  d10c              BNE      |L9.1586|
000618  2200              MOVS     r2,#0                 ;1397
                  |L9.1562|
00061a  5c6c              LDRB     r4,[r5,r1]            ;1399
00061c  eb030383          ADD      r3,r3,r3,LSL #2       ;1399
000620  1c49              ADDS     r1,r1,#1              ;1399
000622  1c52              ADDS     r2,r2,#1              ;1399
000624  eb060343          ADD      r3,r6,r3,LSL #1       ;1399
000628  b2d2              UXTB     r2,r2                 ;1397
00062a  4423              ADD      r3,r3,r4              ;1399
00062c  b289              UXTH     r1,r1                 ;1399
00062e  2a03              CMP      r2,#3                 ;1397
000630  d3f3              BCC      |L9.1562|
                  |L9.1586|
000632  4af8              LDR      r2,|L9.2580|
000634  7954              LDRB     r4,[r2,#5]            ;1402  ; MODE
000636  b904              CBNZ     r4,|L9.1594|
000638  6183              STR      r3,[r0,#0x18]         ;1404  ; Para
                  |L9.1594|
00063a  5c6c              LDRB     r4,[r5,r1]            ;1409
00063c  1c49              ADDS     r1,r1,#1              ;1409
00063e  2300              MOVS     r3,#0                 ;1406
000640  b289              UXTH     r1,r1                 ;1409
000642  2c2c              CMP      r4,#0x2c              ;1409
000644  d10c              BNE      |L9.1632|
000646  2400              MOVS     r4,#0                 ;1411
                  |L9.1608|
000648  5c6f              LDRB     r7,[r5,r1]            ;1413
00064a  eb030383          ADD      r3,r3,r3,LSL #2       ;1413
00064e  1c49              ADDS     r1,r1,#1              ;1413
000650  1c64              ADDS     r4,r4,#1              ;1413
000652  eb060343          ADD      r3,r6,r3,LSL #1       ;1413
000656  b2e4              UXTB     r4,r4                 ;1411
000658  443b              ADD      r3,r3,r7              ;1413
00065a  b289              UXTH     r1,r1                 ;1413
00065c  2c03              CMP      r4,#3                 ;1411
00065e  d3f3              BCC      |L9.1608|
                  |L9.1632|
000660  71d3              STRB     r3,[r2,#7]            ;1416
000662  5c6c              LDRB     r4,[r5,r1]            ;1419
000664  1c49              ADDS     r1,r1,#1              ;1419
000666  2300              MOVS     r3,#0                 ;1417
000668  b289              UXTH     r1,r1                 ;1419
00066a  2c2c              CMP      r4,#0x2c              ;1419
00066c  d10c              BNE      |L9.1672|
00066e  2400              MOVS     r4,#0                 ;1421
                  |L9.1648|
000670  5c6f              LDRB     r7,[r5,r1]            ;1423
000672  eb030383          ADD      r3,r3,r3,LSL #2       ;1423
000676  1c49              ADDS     r1,r1,#1              ;1423
000678  1c64              ADDS     r4,r4,#1              ;1423
00067a  eb060343          ADD      r3,r6,r3,LSL #1       ;1423
00067e  b2e4              UXTB     r4,r4                 ;1421
000680  443b              ADD      r3,r3,r7              ;1423
000682  b289              UXTH     r1,r1                 ;1423
000684  2c03              CMP      r4,#3                 ;1421
000686  d3f3              BCC      |L9.1648|
                  |L9.1672|
000688  f8803052          STRB     r3,[r0,#0x52]         ;1426
00068c  5c6f              LDRB     r7,[r5,r1]            ;1429
00068e  1c49              ADDS     r1,r1,#1              ;1429
000690  2300              MOVS     r3,#0                 ;1427
000692  b28c              UXTH     r4,r1                 ;1429
000694  2f2c              CMP      r7,#0x2c              ;1429
000696  d10c              BNE      |L9.1714|
000698  2100              MOVS     r1,#0                 ;1431
                  |L9.1690|
00069a  5d2f              LDRB     r7,[r5,r4]            ;1433
00069c  eb030383          ADD      r3,r3,r3,LSL #2       ;1433
0006a0  1c64              ADDS     r4,r4,#1              ;1433
0006a2  1c49              ADDS     r1,r1,#1              ;1433
0006a4  eb060343          ADD      r3,r6,r3,LSL #1       ;1433
0006a8  b2c9              UXTB     r1,r1                 ;1431
0006aa  443b              ADD      r3,r3,r7              ;1433
0006ac  b2a4              UXTH     r4,r4                 ;1433
0006ae  2906              CMP      r1,#6                 ;1431
0006b0  d3f3              BCC      |L9.1690|
                  |L9.1714|
0006b2  eb030183          ADD      r1,r3,r3,LSL #2       ;1436
0006b6  0049              LSLS     r1,r1,#1              ;1436
0006b8  6641              STR      r1,[r0,#0x64]         ;1436  ; Para
0006ba  7950              LDRB     r0,[r2,#5]            ;1439  ; MODE
                  |L9.1724|
0006bc  f7fffffe          BL       MODE_PARASET
0006c0  e36a              B        |L9.3480|
                  |L9.1730|
0006c2  5d29              LDRB     r1,[r5,r4]            ;1446
0006c4  293f              CMP      r1,#0x3f              ;1446
0006c6  d07d              BEQ      |L9.1988|
0006c8  2c0b              CMP      r4,#0xb               ;1455
0006ca  d10d              BNE      |L9.1768|
0006cc  2000              MOVS     r0,#0                 ;1457
0006ce  4607              MOV      r7,r0                 ;1457
                  |L9.1744|
0006d0  5d29              LDRB     r1,[r5,r4]            ;1459
0006d2  eb070287          ADD      r2,r7,r7,LSL #2       ;1459
0006d6  eb060242          ADD      r2,r6,r2,LSL #1       ;1459
0006da  1c64              ADDS     r4,r4,#1              ;1459
0006dc  1c40              ADDS     r0,r0,#1              ;1459
0006de  188f              ADDS     r7,r1,r2              ;1459
0006e0  b2c0              UXTB     r0,r0                 ;1457
0006e2  b2a4              UXTH     r4,r4                 ;1459
0006e4  2802              CMP      r0,#2                 ;1457
0006e6  d3f3              BCC      |L9.1744|
                  |L9.1768|
0006e8  f8df9328          LDR      r9,|L9.2580|
0006ec  f8897005          STRB     r7,[r9,#5]            ;1462
0006f0  f8990005          LDRB     r0,[r9,#5]            ;1465  ; MODE
0006f4  2700              MOVS     r7,#0                 ;1463
0006f6  f8df8320          LDR      r8,|L9.2584|
0006fa  f6432198          MOV      r1,#0x3a98            ;1488
0006fe  b1c0              CBZ      r0,|L9.1842|
000700  f8990005          LDRB     r0,[r9,#5]            ;1509  ; MODE
000704  464b              MOV      r3,r9                 ;1509
000706  2801              CMP      r0,#1                 ;1509
000708  d05d              BEQ      |L9.1990|
00070a  7958              LDRB     r0,[r3,#5]            ;1538  ; MODE
00070c  2802              CMP      r0,#2                 ;1538
00070e  d07d              BEQ      |L9.2060|
000710  f8990005          LDRB     r0,[r9,#5]            ;1574  ; MODE
000714  464a              MOV      r2,r9                 ;1574
000716  2803              CMP      r0,#3                 ;1574
000718  d079              BEQ      |L9.2062|
00071a  7950              LDRB     r0,[r2,#5]            ;1606  ; MODE
00071c  2804              CMP      r0,#4                 ;1606
00071e  d077              BEQ      |L9.2064|
000720  f8991005          LDRB     r1,[r9,#5]            ;1649  ; MODE
000724  4648              MOV      r0,r9                 ;1649
000726  2905              CMP      r1,#5                 ;1649
000728  d073              BEQ      |L9.2066|
00072a  7941              LDRB     r1,[r0,#5]            ;1680  ; MODE
00072c  2906              CMP      r1,#6                 ;1680
00072e  d071              BEQ      |L9.2068|
000730  e1e0              B        |L9.2804|
                  |L9.1842|
000732  5d2a              LDRB     r2,[r5,r4]            ;1467
000734  1c64              ADDS     r4,r4,#1              ;1467
000736  b2a0              UXTH     r0,r4                 ;1467
000738  2a2c              CMP      r2,#0x2c              ;1467
00073a  d106              BNE      |L9.1866|
00073c  2200              MOVS     r2,#0                 ;1469
                  |L9.1854|
00073e  1c40              ADDS     r0,r0,#1              ;1469
000740  1c52              ADDS     r2,r2,#1              ;1471
000742  b2d2              UXTB     r2,r2                 ;1469
000744  b280              UXTH     r0,r0                 ;1471
000746  2a06              CMP      r2,#6                 ;1469
000748  d3f9              BCC      |L9.1854|
                  |L9.1866|
00074a  5c2b              LDRB     r3,[r5,r0]            ;1477
00074c  1c40              ADDS     r0,r0,#1              ;1477
00074e  2200              MOVS     r2,#0                 ;1475
000750  b284              UXTH     r4,r0                 ;1477
000752  2b2c              CMP      r3,#0x2c              ;1477
000754  d10c              BNE      |L9.1904|
000756  2000              MOVS     r0,#0                 ;1479
                  |L9.1880|
000758  5d2b              LDRB     r3,[r5,r4]            ;1481
00075a  eb020282          ADD      r2,r2,r2,LSL #2       ;1481
00075e  1c64              ADDS     r4,r4,#1              ;1481
000760  1c40              ADDS     r0,r0,#1              ;1481
000762  eb060242          ADD      r2,r6,r2,LSL #1       ;1481
000766  b2c0              UXTB     r0,r0                 ;1479
000768  441a              ADD      r2,r2,r3              ;1481
00076a  b2a4              UXTH     r4,r4                 ;1481
00076c  2806              CMP      r0,#6                 ;1479
00076e  d3f3              BCC      |L9.1880|
                  |L9.1904|
000770  f8ca2014          STR      r2,[r10,#0x14]        ;1484  ; Para
000774  f8da0014          LDR      r0,[r10,#0x14]        ;1488  ; Para
000778  2700              MOVS     r7,#0                 ;1485
00077a  4288              CMP      r0,r1                 ;1488
00077c  d907              BLS      |L9.1934|
00077e  2001              MOVS     r0,#1                 ;1490
000780  f8c80020          STR      r0,[r8,#0x20]         ;1490  ; Run_Control
000784  02c1              LSLS     r1,r0,#11             ;1491
000786  48a5              LDR      r0,|L9.2588|
000788  f7fffffe          BL       GPIO_ResetBits
00078c  e007              B        |L9.1950|
                  |L9.1934|
00078e  2000              MOVS     r0,#0                 ;1493
000790  f8c80020          STR      r0,[r8,#0x20]         ;1493  ; Run_Control
000794  f44f6100          MOV      r1,#0x800             ;1494
000798  48a0              LDR      r0,|L9.2588|
00079a  f7fffffe          BL       GPIO_SetBits
                  |L9.1950|
00079e  5d28              LDRB     r0,[r5,r4]            ;1496
0007a0  1c64              ADDS     r4,r4,#1              ;1496
0007a2  b2a4              UXTH     r4,r4                 ;1496
0007a4  282c              CMP      r0,#0x2c              ;1496
0007a6  d10c              BNE      |L9.1986|
0007a8  2000              MOVS     r0,#0                 ;1498
                  |L9.1962|
0007aa  5d29              LDRB     r1,[r5,r4]            ;1500
0007ac  eb070287          ADD      r2,r7,r7,LSL #2       ;1500
0007b0  eb060242          ADD      r2,r6,r2,LSL #1       ;1500
0007b4  1c64              ADDS     r4,r4,#1              ;1500
0007b6  188f              ADDS     r7,r1,r2              ;1500
0007b8  1c40              ADDS     r0,r0,#1              ;1500
0007ba  b2a4              UXTH     r4,r4                 ;1500
0007bc  f01000ff          ANDS     r0,r0,#0xff           ;1498
0007c0  d0f3              BEQ      |L9.1962|
                  |L9.1986|
0007c2  e11a              B        |L9.2554|
                  |L9.1988|
0007c4  e21d              B        |L9.3074|
                  |L9.1990|
0007c6  5d29              LDRB     r1,[r5,r4]            ;1510
0007c8  1c64              ADDS     r4,r4,#1              ;1510
0007ca  b2a0              UXTH     r0,r4                 ;1510
0007cc  292c              CMP      r1,#0x2c              ;1510
0007ce  d10c              BNE      |L9.2026|
0007d0  2100              MOVS     r1,#0                 ;1512
                  |L9.2002|
0007d2  5c2a              LDRB     r2,[r5,r0]            ;1514
0007d4  eb070487          ADD      r4,r7,r7,LSL #2       ;1514
0007d8  eb060444          ADD      r4,r6,r4,LSL #1       ;1514
0007dc  1c40              ADDS     r0,r0,#1              ;1514
0007de  1c49              ADDS     r1,r1,#1              ;1514
0007e0  1917              ADDS     r7,r2,r4              ;1514
0007e2  b2c9              UXTB     r1,r1                 ;1512
0007e4  b280              UXTH     r0,r0                 ;1514
0007e6  2906              CMP      r1,#6                 ;1512
0007e8  d3f3              BCC      |L9.2002|
                  |L9.2026|
0007ea  4654              MOV      r4,r10                ;1517
0007ec  f8ca706c          STR      r7,[r10,#0x6c]        ;1517  ; Para
0007f0  5c29              LDRB     r1,[r5,r0]            ;1520
0007f2  1c40              ADDS     r0,r0,#1              ;1520
0007f4  2200              MOVS     r2,#0                 ;1518
0007f6  b280              UXTH     r0,r0                 ;1520
0007f8  292c              CMP      r1,#0x2c              ;1520
0007fa  d112              BNE      |L9.2082|
0007fc  2100              MOVS     r1,#0                 ;1522
                  |L9.2046|
0007fe  5c2f              LDRB     r7,[r5,r0]            ;1524
000800  eb020282          ADD      r2,r2,r2,LSL #2       ;1524
000804  eb060242          ADD      r2,r6,r2,LSL #1       ;1524
000808  443a              ADD      r2,r2,r7              ;1524
00080a  e004              B        |L9.2070|
                  |L9.2060|
00080c  e020              B        |L9.2128|
                  |L9.2062|
00080e  e06d              B        |L9.2284|
                  |L9.2064|
000810  e0ab              B        |L9.2410|
                  |L9.2066|
000812  e108              B        |L9.2598|
                  |L9.2068|
000814  e13a              B        |L9.2700|
                  |L9.2070|
000816  1c40              ADDS     r0,r0,#1              ;1524
000818  1c49              ADDS     r1,r1,#1              ;1524
00081a  b2c9              UXTB     r1,r1                 ;1522
00081c  b280              UXTH     r0,r0                 ;1524
00081e  2906              CMP      r1,#6                 ;1522
000820  d3ed              BCC      |L9.2046|
                  |L9.2082|
000822  f8a42070          STRH     r2,[r4,#0x70]         ;1527
000826  5c2a              LDRB     r2,[r5,r0]            ;1530
000828  1c40              ADDS     r0,r0,#1              ;1530
00082a  2100              MOVS     r1,#0                 ;1528
00082c  b284              UXTH     r4,r0                 ;1530
00082e  2a2c              CMP      r2,#0x2c              ;1530
000830  d10c              BNE      |L9.2124|
000832  2000              MOVS     r0,#0                 ;1532
                  |L9.2100|
000834  5d2a              LDRB     r2,[r5,r4]            ;1534
000836  1c64              ADDS     r4,r4,#1              ;1534
000838  eb010181          ADD      r1,r1,r1,LSL #2       ;1534
00083c  eb060141          ADD      r1,r6,r1,LSL #1       ;1534
000840  1c40              ADDS     r0,r0,#1              ;1534
000842  4411              ADD      r1,r1,r2              ;1534
000844  b2a4              UXTH     r4,r4                 ;1534
000846  f01000ff          ANDS     r0,r0,#0xff           ;1532
00084a  d0f3              BEQ      |L9.2100|
                  |L9.2124|
00084c  7199              STRB     r1,[r3,#6]            ;1537
00084e  e151              B        |L9.2804|
                  |L9.2128|
000850  2001              MOVS     r0,#1                 ;1539
000852  f8c80020          STR      r0,[r8,#0x20]         ;1539  ; Run_Control
000856  02c1              LSLS     r1,r0,#11             ;1540
000858  4870              LDR      r0,|L9.2588|
00085a  f7fffffe          BL       GPIO_ResetBits
00085e  5d29              LDRB     r1,[r5,r4]            ;1541
000860  1c64              ADDS     r4,r4,#1              ;1541
000862  b2a0              UXTH     r0,r4                 ;1541
000864  292c              CMP      r1,#0x2c              ;1541
000866  d10c              BNE      |L9.2178|
000868  2100              MOVS     r1,#0                 ;1543
                  |L9.2154|
00086a  5c2a              LDRB     r2,[r5,r0]            ;1545
00086c  eb070387          ADD      r3,r7,r7,LSL #2       ;1545
000870  eb060343          ADD      r3,r6,r3,LSL #1       ;1545
000874  1c40              ADDS     r0,r0,#1              ;1545
000876  1c49              ADDS     r1,r1,#1              ;1545
000878  18d7              ADDS     r7,r2,r3              ;1545
00087a  b2c9              UXTB     r1,r1                 ;1543
00087c  b280              UXTH     r0,r0                 ;1545
00087e  2906              CMP      r1,#6                 ;1543
000880  d3f3              BCC      |L9.2154|
                  |L9.2178|
000882  4653              MOV      r3,r10                ;1548
000884  f8ca7044          STR      r7,[r10,#0x44]        ;1548  ; Para
000888  5c2a              LDRB     r2,[r5,r0]            ;1551
00088a  1c40              ADDS     r0,r0,#1              ;1551
00088c  2100              MOVS     r1,#0                 ;1549
00088e  b280              UXTH     r0,r0                 ;1551
000890  2a2c              CMP      r2,#0x2c              ;1551
000892  d10c              BNE      |L9.2222|
000894  2200              MOVS     r2,#0                 ;1553
                  |L9.2198|
000896  5c2c              LDRB     r4,[r5,r0]            ;1555
000898  eb010181          ADD      r1,r1,r1,LSL #2       ;1555
00089c  1c40              ADDS     r0,r0,#1              ;1555
00089e  1c52              ADDS     r2,r2,#1              ;1555
0008a0  eb060141          ADD      r1,r6,r1,LSL #1       ;1555
0008a4  b2d2              UXTB     r2,r2                 ;1553
0008a6  4421              ADD      r1,r1,r4              ;1555
0008a8  b280              UXTH     r0,r0                 ;1555
0008aa  2a06              CMP      r2,#6                 ;1553
0008ac  d3f3              BCC      |L9.2198|
                  |L9.2222|
0008ae  f8a31048          STRH     r1,[r3,#0x48]         ;1558
0008b2  5c2a              LDRB     r2,[r5,r0]            ;1561
0008b4  1c40              ADDS     r0,r0,#1              ;1561
0008b6  2100              MOVS     r1,#0                 ;1559
0008b8  b284              UXTH     r4,r0                 ;1561
0008ba  2a2c              CMP      r2,#0x2c              ;1561
0008bc  d10c              BNE      |L9.2264|
0008be  2000              MOVS     r0,#0                 ;1563
                  |L9.2240|
0008c0  5d2a              LDRB     r2,[r5,r4]            ;1565
0008c2  1c64              ADDS     r4,r4,#1              ;1565
0008c4  eb010181          ADD      r1,r1,r1,LSL #2       ;1565
0008c8  eb060141          ADD      r1,r6,r1,LSL #1       ;1565
0008cc  1c40              ADDS     r0,r0,#1              ;1565
0008ce  4411              ADD      r1,r1,r2              ;1565
0008d0  b2a4              UXTH     r4,r4                 ;1565
0008d2  f01000ff          ANDS     r0,r0,#0xff           ;1563
0008d6  d0f3              BEQ      |L9.2240|
                  |L9.2264|
0008d8  f8891006          STRB     r1,[r9,#6]            ;1568
0008dc  f8990006          LDRB     r0,[r9,#6]            ;1570  ; mainswitch
0008e0  2801              CMP      r0,#1                 ;1570
0008e2  d102              BNE      |L9.2282|
0008e4  494e              LDR      r1,|L9.2592|
0008e6  2000              MOVS     r0,#0                 ;1572
0008e8  7008              STRB     r0,[r1,#0]            ;1572
                  |L9.2282|
0008ea  e103              B        |L9.2804|
                  |L9.2284|
0008ec  5d29              LDRB     r1,[r5,r4]            ;1575
0008ee  1c64              ADDS     r4,r4,#1              ;1575
0008f0  b2a0              UXTH     r0,r4                 ;1575
0008f2  292c              CMP      r1,#0x2c              ;1575
0008f4  d10c              BNE      |L9.2320|
0008f6  2100              MOVS     r1,#0                 ;1577
                  |L9.2296|
0008f8  5c2b              LDRB     r3,[r5,r0]            ;1579
0008fa  eb070487          ADD      r4,r7,r7,LSL #2       ;1579
0008fe  eb060444          ADD      r4,r6,r4,LSL #1       ;1579
000902  1c40              ADDS     r0,r0,#1              ;1579
000904  1c49              ADDS     r1,r1,#1              ;1579
000906  191f              ADDS     r7,r3,r4              ;1579
000908  b2c9              UXTB     r1,r1                 ;1577
00090a  b280              UXTH     r0,r0                 ;1579
00090c  2906              CMP      r1,#6                 ;1577
00090e  d3f3              BCC      |L9.2296|
                  |L9.2320|
000910  4654              MOV      r4,r10                ;1582
000912  f8ca706c          STR      r7,[r10,#0x6c]        ;1582  ; Para
000916  5c2b              LDRB     r3,[r5,r0]            ;1586
000918  1c40              ADDS     r0,r0,#1              ;1586
00091a  2100              MOVS     r1,#0                 ;1583
00091c  b280              UXTH     r0,r0                 ;1586
00091e  2b2c              CMP      r3,#0x2c              ;1586
000920  d10c              BNE      |L9.2364|
000922  2300              MOVS     r3,#0                 ;1588
                  |L9.2340|
000924  5c2f              LDRB     r7,[r5,r0]            ;1590
000926  eb010181          ADD      r1,r1,r1,LSL #2       ;1590
00092a  1c40              ADDS     r0,r0,#1              ;1590
00092c  1c5b              ADDS     r3,r3,#1              ;1590
00092e  eb060141          ADD      r1,r6,r1,LSL #1       ;1590
000932  b2db              UXTB     r3,r3                 ;1588
000934  4439              ADD      r1,r1,r7              ;1590
000936  b280              UXTH     r0,r0                 ;1590
000938  2b06              CMP      r3,#6                 ;1588
00093a  d3f3              BCC      |L9.2340|
                  |L9.2364|
00093c  f8a41070          STRH     r1,[r4,#0x70]         ;1593
000940  5c2b              LDRB     r3,[r5,r0]            ;1596
000942  1c40              ADDS     r0,r0,#1              ;1596
000944  2100              MOVS     r1,#0                 ;1594
000946  b284              UXTH     r4,r0                 ;1596
000948  2b2c              CMP      r3,#0x2c              ;1596
00094a  d10c              BNE      |L9.2406|
00094c  2000              MOVS     r0,#0                 ;1598
                  |L9.2382|
00094e  5d2b              LDRB     r3,[r5,r4]            ;1600
000950  1c64              ADDS     r4,r4,#1              ;1600
000952  eb010181          ADD      r1,r1,r1,LSL #2       ;1600
000956  eb060141          ADD      r1,r6,r1,LSL #1       ;1600
00095a  1c40              ADDS     r0,r0,#1              ;1600
00095c  4419              ADD      r1,r1,r3              ;1600
00095e  b2a4              UXTH     r4,r4                 ;1600
000960  f01000ff          ANDS     r0,r0,#0xff           ;1598
000964  d0f3              BEQ      |L9.2382|
                  |L9.2406|
000966  7191              STRB     r1,[r2,#6]            ;1603
000968  e0c4              B        |L9.2804|
                  |L9.2410|
00096a  5d2a              LDRB     r2,[r5,r4]            ;1607
00096c  1c64              ADDS     r4,r4,#1              ;1607
00096e  b2a0              UXTH     r0,r4                 ;1607
000970  2a2c              CMP      r2,#0x2c              ;1607
000972  d106              BNE      |L9.2434|
000974  2200              MOVS     r2,#0                 ;1609
                  |L9.2422|
000976  1c40              ADDS     r0,r0,#1              ;1609
000978  1c52              ADDS     r2,r2,#1              ;1611
00097a  b2d2              UXTB     r2,r2                 ;1609
00097c  b280              UXTH     r0,r0                 ;1611
00097e  2a06              CMP      r2,#6                 ;1609
000980  d3f9              BCC      |L9.2422|
                  |L9.2434|
000982  5c2b              LDRB     r3,[r5,r0]            ;1617
000984  1c40              ADDS     r0,r0,#1              ;1617
000986  2200              MOVS     r2,#0                 ;1615
000988  b284              UXTH     r4,r0                 ;1617
00098a  2b2c              CMP      r3,#0x2c              ;1617
00098c  d10c              BNE      |L9.2472|
00098e  2000              MOVS     r0,#0                 ;1619
                  |L9.2448|
000990  5d2b              LDRB     r3,[r5,r4]            ;1621
000992  eb020282          ADD      r2,r2,r2,LSL #2       ;1621
000996  1c64              ADDS     r4,r4,#1              ;1621
000998  1c40              ADDS     r0,r0,#1              ;1621
00099a  eb060242          ADD      r2,r6,r2,LSL #1       ;1621
00099e  b2c0              UXTB     r0,r0                 ;1619
0009a0  441a              ADD      r2,r2,r3              ;1621
0009a2  b2a4              UXTH     r4,r4                 ;1621
0009a4  2806              CMP      r0,#6                 ;1619
0009a6  d3f3              BCC      |L9.2448|
                  |L9.2472|
0009a8  f8ca2014          STR      r2,[r10,#0x14]        ;1624  ; Para
0009ac  f8da0014          LDR      r0,[r10,#0x14]        ;1628  ; Para
0009b0  2700              MOVS     r7,#0                 ;1625
0009b2  4288              CMP      r0,r1                 ;1628
0009b4  d907              BLS      |L9.2502|
0009b6  2001              MOVS     r0,#1                 ;1630
0009b8  f8c80020          STR      r0,[r8,#0x20]         ;1630  ; Run_Control
0009bc  02c1              LSLS     r1,r0,#11             ;1631
0009be  4817              LDR      r0,|L9.2588|
0009c0  f7fffffe          BL       GPIO_ResetBits
0009c4  e007              B        |L9.2518|
                  |L9.2502|
0009c6  2000              MOVS     r0,#0                 ;1633
0009c8  f8c80020          STR      r0,[r8,#0x20]         ;1633  ; Run_Control
0009cc  f44f6100          MOV      r1,#0x800             ;1634
0009d0  4812              LDR      r0,|L9.2588|
0009d2  f7fffffe          BL       GPIO_SetBits
                  |L9.2518|
0009d6  5d28              LDRB     r0,[r5,r4]            ;1636
0009d8  1c64              ADDS     r4,r4,#1              ;1636
0009da  b2a4              UXTH     r4,r4                 ;1636
0009dc  282c              CMP      r0,#0x2c              ;1636
0009de  d10c              BNE      |L9.2554|
0009e0  2000              MOVS     r0,#0                 ;1638
                  |L9.2530|
0009e2  5d29              LDRB     r1,[r5,r4]            ;1640
0009e4  eb070287          ADD      r2,r7,r7,LSL #2       ;1640
0009e8  eb060242          ADD      r2,r6,r2,LSL #1       ;1640
0009ec  1c64              ADDS     r4,r4,#1              ;1640
0009ee  188f              ADDS     r7,r1,r2              ;1640
0009f0  1c40              ADDS     r0,r0,#1              ;1640
0009f2  b2a4              UXTH     r4,r4                 ;1640
0009f4  f01000ff          ANDS     r0,r0,#0xff           ;1638
0009f8  d0f3              BEQ      |L9.2530|
                  |L9.2554|
0009fa  f8897006          STRB     r7,[r9,#6]            ;1643
0009fe  f8990006          LDRB     r0,[r9,#6]            ;1644  ; mainswitch
000a02  bbe8              CBNZ     r0,|L9.2688|
000a04  2001              MOVS     r0,#1                 ;1646
000a06  f8c80020          STR      r0,[r8,#0x20]         ;1646  ; Run_Control
000a0a  02c1              LSLS     r1,r0,#11             ;1647
000a0c  4803              LDR      r0,|L9.2588|
000a0e  f7fffffe          BL       GPIO_ResetBits
000a12  e06f              B        |L9.2804|
                  |L9.2580|
                          DCD      ||.data||
                  |L9.2584|
                          DCD      Run_Control
                  |L9.2588|
                          DCD      0x40020800
                  |L9.2592|
                          DCD      finishflag
                  |L9.2596|
000a24  e161              B        |L9.3306|
                  |L9.2598|
000a26  5d2a              LDRB     r2,[r5,r4]            ;1650
000a28  1c64              ADDS     r4,r4,#1              ;1650
000a2a  b2a1              UXTH     r1,r4                 ;1650
000a2c  2a2c              CMP      r2,#0x2c              ;1650
000a2e  d106              BNE      |L9.2622|
000a30  2200              MOVS     r2,#0                 ;1652
                  |L9.2610|
000a32  1c49              ADDS     r1,r1,#1              ;1652
000a34  1c52              ADDS     r2,r2,#1              ;1654
000a36  b2d2              UXTB     r2,r2                 ;1652
000a38  b289              UXTH     r1,r1                 ;1654
000a3a  2a06              CMP      r2,#6                 ;1652
000a3c  d3f9              BCC      |L9.2610|
                  |L9.2622|
000a3e  5c6a              LDRB     r2,[r5,r1]            ;1659
000a40  1c49              ADDS     r1,r1,#1              ;1659
000a42  b289              UXTH     r1,r1                 ;1659
000a44  2a2c              CMP      r2,#0x2c              ;1659
000a46  d106              BNE      |L9.2646|
000a48  2200              MOVS     r2,#0                 ;1661
                  |L9.2634|
000a4a  1c49              ADDS     r1,r1,#1              ;1661
000a4c  1c52              ADDS     r2,r2,#1              ;1663
000a4e  b2d2              UXTB     r2,r2                 ;1661
000a50  b289              UXTH     r1,r1                 ;1663
000a52  2a06              CMP      r2,#6                 ;1661
000a54  d3f9              BCC      |L9.2634|
                  |L9.2646|
000a56  5c6b              LDRB     r3,[r5,r1]            ;1668
000a58  1c49              ADDS     r1,r1,#1              ;1668
000a5a  2200              MOVS     r2,#0                 ;1666
000a5c  b28c              UXTH     r4,r1                 ;1668
000a5e  2b2c              CMP      r3,#0x2c              ;1668
000a60  d10c              BNE      |L9.2684|
000a62  2100              MOVS     r1,#0                 ;1670
                  |L9.2660|
000a64  5d2b              LDRB     r3,[r5,r4]            ;1672
000a66  1c64              ADDS     r4,r4,#1              ;1672
000a68  eb020282          ADD      r2,r2,r2,LSL #2       ;1672
000a6c  eb060242          ADD      r2,r6,r2,LSL #1       ;1672
000a70  1c49              ADDS     r1,r1,#1              ;1672
000a72  441a              ADD      r2,r2,r3              ;1672
000a74  b2a4              UXTH     r4,r4                 ;1672
000a76  f01101ff          ANDS     r1,r1,#0xff           ;1670
000a7a  d0f3              BEQ      |L9.2660|
                  |L9.2684|
000a7c  7182              STRB     r2,[r0,#6]            ;1675
000a7e  e000              B        |L9.2690|
                  |L9.2688|
000a80  e038              B        |L9.2804|
                  |L9.2690|
000a82  7981              LDRB     r1,[r0,#6]            ;1676  ; mainswitch
000a84  bbb1              CBNZ     r1,|L9.2804|
000a86  2100              MOVS     r1,#0                 ;1678
000a88  7181              STRB     r1,[r0,#6]            ;1678
000a8a  e033              B        |L9.2804|
                  |L9.2700|
000a8c  5d2a              LDRB     r2,[r5,r4]            ;1681
000a8e  1c64              ADDS     r4,r4,#1              ;1681
000a90  b2a1              UXTH     r1,r4                 ;1681
000a92  2a2c              CMP      r2,#0x2c              ;1681
000a94  d106              BNE      |L9.2724|
000a96  2200              MOVS     r2,#0                 ;1683
                  |L9.2712|
000a98  1c49              ADDS     r1,r1,#1              ;1683
000a9a  1c52              ADDS     r2,r2,#1              ;1685
000a9c  b2d2              UXTB     r2,r2                 ;1683
000a9e  b289              UXTH     r1,r1                 ;1685
000aa0  2a06              CMP      r2,#6                 ;1683
000aa2  d3f9              BCC      |L9.2712|
                  |L9.2724|
000aa4  5c6a              LDRB     r2,[r5,r1]            ;1690
000aa6  1c49              ADDS     r1,r1,#1              ;1690
000aa8  b289              UXTH     r1,r1                 ;1690
000aaa  2a2c              CMP      r2,#0x2c              ;1690
000aac  d10e              BNE      |L9.2764|
000aae  2200              MOVS     r2,#0                 ;1692
                  |L9.2736|
000ab0  1c49              ADDS     r1,r1,#1              ;1692
000ab2  b289              UXTH     r1,r1                 ;1694
000ab4  1c52              ADDS     r2,r2,#1              ;1694
000ab6  e006              B        |L9.2758|
                  |L9.2744|
000ab8  e152              B        |L9.3424|
                  |L9.2746|
000aba  e0f6              B        |L9.3242|
                  |L9.2748|
000abc  e0a8              B        |L9.3088|
                  |L9.2750|
000abe  e020              B        |L9.2818|
                  |L9.2752|
000ac0  e087              B        |L9.3026|
                  |L9.2754|
000ac2  e111              B        |L9.3304|
                  |L9.2756|
000ac4  e168              B        |L9.3480|
                  |L9.2758|
000ac6  b2d2              UXTB     r2,r2                 ;1692
000ac8  2a06              CMP      r2,#6                 ;1692
000aca  d3f1              BCC      |L9.2736|
                  |L9.2764|
000acc  5c6b              LDRB     r3,[r5,r1]            ;1699
000ace  1c49              ADDS     r1,r1,#1              ;1699
000ad0  2200              MOVS     r2,#0                 ;1697
000ad2  b28c              UXTH     r4,r1                 ;1699
000ad4  2b2c              CMP      r3,#0x2c              ;1699
000ad6  d10c              BNE      |L9.2802|
000ad8  2100              MOVS     r1,#0                 ;1701
                  |L9.2778|
000ada  5d2b              LDRB     r3,[r5,r4]            ;1703
000adc  1c64              ADDS     r4,r4,#1              ;1703
000ade  eb020282          ADD      r2,r2,r2,LSL #2       ;1703
000ae2  eb060242          ADD      r2,r6,r2,LSL #1       ;1703
000ae6  1c49              ADDS     r1,r1,#1              ;1703
000ae8  441a              ADD      r2,r2,r3              ;1703
000aea  b2a4              UXTH     r4,r4                 ;1703
000aec  f01101ff          ANDS     r1,r1,#0xff           ;1701
000af0  d0f3              BEQ      |L9.2778|
                  |L9.2802|
000af2  7182              STRB     r2,[r0,#6]            ;1706
                  |L9.2804|
000af4  f7fffffe          BL       Off_GPOI_ResetSet
000af8  f8990006          LDRB     r0,[r9,#6]            ;1712  ; mainswitch
000afc  f7fffffe          BL       LIST_ONOFF
000b00  e14a              B        |L9.3480|
                  |L9.2818|
000b02  5d28              LDRB     r0,[r5,r4]            ;1719
000b04  2309              MOVS     r3,#9                 ;1718
000b06  283f              CMP      r0,#0x3f              ;1719
000b08  d002              BEQ      |L9.2832|
000b0a  2201              MOVS     r2,#1                 ;1728
000b0c  2100              MOVS     r1,#0                 ;1729
000b0e  e022              B        |L9.2902|
                  |L9.2832|
000b10  eeb58ac0          VCMPE.F32 s16,#0.0              ;1721
000b14  eef1fa10          VMRS     APSR_nzcv,FPSCR       ;1721
000b18  db01              BLT      |L9.2846|
000b1a  202b              MOVS     r0,#0x2b              ;1721
000b1c  e000              B        |L9.2848|
                  |L9.2846|
000b1e  202d              MOVS     r0,#0x2d              ;1721
                  |L9.2848|
000b20  5528              STRB     r0,[r5,r4]            ;1721
000b22  1c64              ADDS     r4,r4,#1              ;1721
000b24  b2a4              UXTH     r4,r4                 ;1721
000b26  ee180a10          VMOV     r0,s16                ;1722
000b2a  f7fffffe          BL       __aeabi_f2d
000b2e  ec410b10          VMOV     d0,r0,r1              ;1722
000b32  1928              ADDS     r0,r5,r4              ;1722
000b34  ec532b10          VMOV     r2,r3,d0              ;1722
000b38  a19c              ADR      r1,|L9.3500|
000b3a  f7fffffe          BL       __2sprintf
000b3e  3409              ADDS     r4,r4,#9              ;1722
000b40  e0d2              B        |L9.3304|
                  |L9.2882|
000b42  b141              CBZ      r1,|L9.2902|
000b44  2905              CMP      r1,#5                 ;1731
000b46  d006              BEQ      |L9.2902|
000b48  1860              ADDS     r0,r4,r1              ;1733
000b4a  5c28              LDRB     r0,[r5,r0]            ;1733
000b4c  f7fffffe          BL       IsDigitChar
000b50  2801              CMP      r0,#1                 ;1733
000b52  d000              BEQ      |L9.2902|
000b54  2200              MOVS     r2,#0                 ;1739
                  |L9.2902|
000b56  1c49              ADDS     r1,r1,#1              ;1739
000b58  b2c9              UXTB     r1,r1                 ;1729
000b5a  4299              CMP      r1,r3                 ;1729
000b5c  d3f1              BCC      |L9.2882|
000b5e  2a00              CMP      r2,#0                 ;1742
                  |L9.2912|
000b60  f43faa65          BEQ      |L9.46|
000b64  18e0              ADDS     r0,r4,r3              ;1742
000b66  5c28              LDRB     r0,[r5,r0]            ;1742
000b68  280d              CMP      r0,#0xd               ;1742
                  |L9.2922|
000b6a  f47faa60          BNE      |L9.46|
000b6e  2200              MOVS     r2,#0                 ;1747
000b70  4610              MOV      r0,r2                 ;1748
000b72  e00d              B        |L9.2960|
                  |L9.2932|
000b74  b160              CBZ      r0,|L9.2960|
000b76  2801              CMP      r0,#1                 ;1754
000b78  d016              BEQ      |L9.2984|
000b7a  2805              CMP      r0,#5                 ;1759
000b7c  d005              BEQ      |L9.2954|
000b7e  5d29              LDRB     r1,[r5,r4]            ;1765
000b80  eb020282          ADD      r2,r2,r2,LSL #2       ;1765
000b84  eb060242          ADD      r2,r6,r2,LSL #1       ;1765
000b88  440a              ADD      r2,r2,r1              ;1765
                  |L9.2954|
000b8a  1c64              ADDS     r4,r4,#1              ;1765
000b8c  b2a4              UXTH     r4,r4                 ;1761
000b8e  e015              B        |L9.3004|
                  |L9.2960|
000b90  5d29              LDRB     r1,[r5,r4]            ;1752
000b92  3930              SUBS     r1,r1,#0x30           ;1752
000b94  eb010181          ADD      r1,r1,r1,LSL #2       ;1752
000b98  0049              LSLS     r1,r1,#1              ;1752
000b9a  ee001a10          VMOV     s0,r1                 ;1752
000b9e  1c64              ADDS     r4,r4,#1              ;1752
000ba0  b2a4              UXTH     r4,r4                 ;1752
000ba2  eeb80ac0          VCVT.F32.S32 s0,s0                 ;1752
000ba6  e009              B        |L9.3004|
                  |L9.2984|
000ba8  5d29              LDRB     r1,[r5,r4]            ;1756
000baa  1c64              ADDS     r4,r4,#1              ;1756
000bac  3930              SUBS     r1,r1,#0x30           ;1756
000bae  ee001a90          VMOV     s1,r1                 ;1756
000bb2  b2a4              UXTH     r4,r4                 ;1756
000bb4  eef80ae0          VCVT.F32.S32 s1,s1                 ;1756
000bb8  ee300a80          VADD.F32 s0,s1,s0              ;1756
                  |L9.3004|
000bbc  1c40              ADDS     r0,r0,#1              ;1756
000bbe  b2c0              UXTB     r0,r0                 ;1748
000bc0  4298              CMP      r0,r3                 ;1748
000bc2  d3d7              BCC      |L9.2932|
000bc4  eebc0ac0          VCVT.U32.F32 s0,s0                 ;1767
000bc8  ee100a10          VMOV     r0,s0                 ;1767
000bcc  b2c1              UXTB     r1,r0                 ;1767
000bce  2000              MOVS     r0,#0                 ;1767
000bd0  e0ba              B        |L9.3400|
                  |L9.3026|
000bd2  5d29              LDRB     r1,[r5,r4]            ;1773
000bd4  2201              MOVS     r2,#1                 ;1772
000bd6  293f              CMP      r1,#0x3f              ;1773
000bd8  d013              BEQ      |L9.3074|
000bda  2100              MOVS     r1,#0                 ;1783
000bdc  4608              MOV      r0,r1                 ;1783
                  |L9.3038|
000bde  5d2b              LDRB     r3,[r5,r4]            ;1785
000be0  eb000080          ADD      r0,r0,r0,LSL #2       ;1785
000be4  1c64              ADDS     r4,r4,#1              ;1785
000be6  1c49              ADDS     r1,r1,#1              ;1785
000be8  eb060040          ADD      r0,r6,r0,LSL #1       ;1785
000bec  b2c9              UXTB     r1,r1                 ;1783
000bee  4418              ADD      r0,r0,r3              ;1785
000bf0  b2a4              UXTH     r4,r4                 ;1785
000bf2  4291              CMP      r1,r2                 ;1783
000bf4  d3f3              BCC      |L9.3038|
000bf6  2801              CMP      r0,#1                 ;1787
000bf8  f63fab5d          BHI      |L9.694|
000bfc  496d              LDR      r1,|L9.3508|
000bfe  7008              STRB     r0,[r1,#0]            ;1794
000c00  e0ca              B        |L9.3480|
                  |L9.3074|
000c02  7802              LDRB     r2,[r0,#0]            ;1775  ; C_DISCHARGE
000c04  192b              ADDS     r3,r5,r4              ;1775
000c06  f2af7194          ADR      r1,|L9.1140|
000c0a  4618              MOV      r0,r3                 ;1775
000c0c  f7ffbb63          B        |L9.726|
                  |L9.3088|
000c10  5d28              LDRB     r0,[r5,r4]            ;1807
000c12  2309              MOVS     r3,#9                 ;1806
000c14  283f              CMP      r0,#0x3f              ;1807
000c16  d06c              BEQ      |L9.3314|
000c18  2201              MOVS     r2,#1                 ;1816
000c1a  2100              MOVS     r1,#0                 ;1817
000c1c  e009              B        |L9.3122|
                  |L9.3102|
000c1e  b141              CBZ      r1,|L9.3122|
000c20  2905              CMP      r1,#5                 ;1819
000c22  d006              BEQ      |L9.3122|
000c24  1860              ADDS     r0,r4,r1              ;1821
000c26  5c28              LDRB     r0,[r5,r0]            ;1821
000c28  f7fffffe          BL       IsDigitChar
000c2c  2801              CMP      r0,#1                 ;1821
000c2e  d000              BEQ      |L9.3122|
000c30  2200              MOVS     r2,#0                 ;1827
                  |L9.3122|
000c32  1c49              ADDS     r1,r1,#1              ;1827
000c34  b2c9              UXTB     r1,r1                 ;1817
000c36  4299              CMP      r1,r3                 ;1817
000c38  d3f1              BCC      |L9.3102|
000c3a  2a00              CMP      r2,#0                 ;1830
                  |L9.3132|
000c3c  d090              BEQ      |L9.2912|
000c3e  18e0              ADDS     r0,r4,r3              ;1830
000c40  5c28              LDRB     r0,[r5,r0]            ;1830
000c42  280d              CMP      r0,#0xd               ;1830
                  |L9.3140|
000c44  d191              BNE      |L9.2922|
000c46  2200              MOVS     r2,#0                 ;1835
000c48  4610              MOV      r0,r2                 ;1836
000c4a  e00d              B        |L9.3176|
                  |L9.3148|
000c4c  b160              CBZ      r0,|L9.3176|
000c4e  2801              CMP      r0,#1                 ;1842
000c50  d016              BEQ      |L9.3200|
000c52  2805              CMP      r0,#5                 ;1847
000c54  d005              BEQ      |L9.3170|
000c56  5d29              LDRB     r1,[r5,r4]            ;1853
000c58  eb020282          ADD      r2,r2,r2,LSL #2       ;1853
000c5c  eb060242          ADD      r2,r6,r2,LSL #1       ;1853
000c60  440a              ADD      r2,r2,r1              ;1853
                  |L9.3170|
000c62  1c64              ADDS     r4,r4,#1              ;1853
000c64  b2a4              UXTH     r4,r4                 ;1849
000c66  e015              B        |L9.3220|
                  |L9.3176|
000c68  5d29              LDRB     r1,[r5,r4]            ;1840
000c6a  3930              SUBS     r1,r1,#0x30           ;1840
000c6c  eb010181          ADD      r1,r1,r1,LSL #2       ;1840
000c70  0049              LSLS     r1,r1,#1              ;1840
000c72  ee001a10          VMOV     s0,r1                 ;1840
000c76  1c64              ADDS     r4,r4,#1              ;1840
000c78  b2a4              UXTH     r4,r4                 ;1840
000c7a  eeb80ac0          VCVT.F32.S32 s0,s0                 ;1840
000c7e  e009              B        |L9.3220|
                  |L9.3200|
000c80  5d29              LDRB     r1,[r5,r4]            ;1844
000c82  1c64              ADDS     r4,r4,#1              ;1844
000c84  3930              SUBS     r1,r1,#0x30           ;1844
000c86  ee001a90          VMOV     s1,r1                 ;1844
000c8a  b2a4              UXTH     r4,r4                 ;1844
000c8c  eef80ae0          VCVT.F32.S32 s1,s1                 ;1844
000c90  ee300a80          VADD.F32 s0,s1,s0              ;1844
                  |L9.3220|
000c94  1c40              ADDS     r0,r0,#1              ;1844
000c96  b2c0              UXTB     r0,r0                 ;1836
000c98  4298              CMP      r0,r3                 ;1836
000c9a  d3d7              BCC      |L9.3148|
000c9c  eebc0ac0          VCVT.U32.F32 s0,s0                 ;1870
000ca0  ee100a10          VMOV     r0,s0                 ;1870
000ca4  b2c1              UXTB     r1,r0                 ;1870
000ca6  2001              MOVS     r0,#1                 ;1870
000ca8  e04e              B        |L9.3400|
                  |L9.3242|
000caa  5d28              LDRB     r0,[r5,r4]            ;1877
000cac  2306              MOVS     r3,#6                 ;1876
000cae  283f              CMP      r0,#0x3f              ;1877
000cb0  d002              BEQ      |L9.3256|
000cb2  2201              MOVS     r2,#1                 ;1886
000cb4  2100              MOVS     r1,#0                 ;1887
000cb6  e027              B        |L9.3336|
                  |L9.3256|
000cb8  eeb58ac0          VCMPE.F32 s16,#0.0              ;1879
000cbc  eef1fa10          VMRS     APSR_nzcv,FPSCR       ;1879
000cc0  db01              BLT      |L9.3270|
000cc2  202b              MOVS     r0,#0x2b              ;1879
000cc4  e000              B        |L9.3272|
                  |L9.3270|
000cc6  202d              MOVS     r0,#0x2d              ;1879
                  |L9.3272|
000cc8  5528              STRB     r0,[r5,r4]            ;1879
000cca  1c64              ADDS     r4,r4,#1              ;1879
000ccc  b2a4              UXTH     r4,r4                 ;1879
000cce  ee180a10          VMOV     r0,s16                ;1880
000cd2  f7fffffe          BL       __aeabi_f2d
000cd6  ec410b10          VMOV     d0,r0,r1              ;1880
000cda  1928              ADDS     r0,r5,r4              ;1880
000cdc  ec532b10          VMOV     r2,r3,d0              ;1880
000ce0  a132              ADR      r1,|L9.3500|
000ce2  f7fffffe          BL       __2sprintf
000ce6  1da4              ADDS     r4,r4,#6              ;1880
                  |L9.3304|
000ce8  b2a0              UXTH     r0,r4                 ;1881
                  |L9.3306|
000cea  f8059000          STRB     r9,[r5,r0]            ;1882
000cee  1c40              ADDS     r0,r0,#1              ;1882
000cf0  b284              UXTH     r4,r0                 ;1882
                  |L9.3314|
000cf2  e055              B        |L9.3488|
                  |L9.3316|
000cf4  b141              CBZ      r1,|L9.3336|
000cf6  2904              CMP      r1,#4                 ;1889
000cf8  d006              BEQ      |L9.3336|
000cfa  1860              ADDS     r0,r4,r1              ;1891
000cfc  5c28              LDRB     r0,[r5,r0]            ;1891
000cfe  f7fffffe          BL       IsDigitChar
000d02  2801              CMP      r0,#1                 ;1891
000d04  d000              BEQ      |L9.3336|
000d06  2200              MOVS     r2,#0                 ;1897
                  |L9.3336|
000d08  1c49              ADDS     r1,r1,#1              ;1897
000d0a  b2c9              UXTB     r1,r1                 ;1887
000d0c  4299              CMP      r1,r3                 ;1887
000d0e  d3f1              BCC      |L9.3316|
000d10  2a00              CMP      r2,#0                 ;1900
000d12  d093              BEQ      |L9.3132|
000d14  18e0              ADDS     r0,r4,r3              ;1900
000d16  5c28              LDRB     r0,[r5,r0]            ;1900
000d18  280d              CMP      r0,#0xd               ;1900
000d1a  d193              BNE      |L9.3140|
000d1c  2200              MOVS     r2,#0                 ;1905
000d1e  4610              MOV      r0,r2                 ;1906
000d20  e015              B        |L9.3406|
                  |L9.3362|
000d22  b1a0              CBZ      r0,|L9.3406|
000d24  5d29              LDRB     r1,[r5,r4]            ;1919
000d26  eb020282          ADD      r2,r2,r2,LSL #2       ;1919
000d2a  eb060242          ADD      r2,r6,r2,LSL #1       ;1919
000d2e  1c64              ADDS     r4,r4,#1              ;1919
000d30  440a              ADD      r2,r2,r1              ;1919
000d32  b2a4              UXTH     r4,r4                 ;1919
                  |L9.3380|
000d34  1c40              ADDS     r0,r0,#1              ;1919
000d36  b2c0              UXTB     r0,r0                 ;1906
000d38  4298              CMP      r0,r3                 ;1906
000d3a  d3f2              BCC      |L9.3362|
000d3c  eebc0ac0          VCVT.U32.F32 s0,s0                 ;1921
000d40  ee100a10          VMOV     r0,s0                 ;1921
000d44  b2c1              UXTB     r1,r0                 ;1921
000d46  2002              MOVS     r0,#2                 ;1921
                  |L9.3400|
000d48  f7fffffe          BL       CalHandle
000d4c  e028              B        |L9.3488|
                  |L9.3406|
000d4e  5d29              LDRB     r1,[r5,r4]            ;1910
000d50  1c64              ADDS     r4,r4,#1              ;1910
000d52  3930              SUBS     r1,r1,#0x30           ;1910
000d54  ee001a10          VMOV     s0,r1                 ;1910
000d58  b2a4              UXTH     r4,r4                 ;1910
000d5a  eeb80ac0          VCVT.F32.S32 s0,s0                 ;1910
000d5e  e7e9              B        |L9.3380|
                  |L9.3424|
000d60  5d28              LDRB     r0,[r5,r4]            ;1927
000d62  283f              CMP      r0,#0x3f              ;1927
000d64  d01c              BEQ      |L9.3488|
000d66  2201              MOVS     r2,#1                 ;1936
000d68  2100              MOVS     r1,#0                 ;1937
000d6a  4608              MOV      r0,r1                 ;1937
                  |L9.3436|
000d6c  5d2b              LDRB     r3,[r5,r4]            ;1939
000d6e  eb000080          ADD      r0,r0,r0,LSL #2       ;1939
000d72  1c64              ADDS     r4,r4,#1              ;1939
000d74  1c49              ADDS     r1,r1,#1              ;1939
000d76  eb060040          ADD      r0,r6,r0,LSL #1       ;1939
000d7a  b2c9              UXTB     r1,r1                 ;1937
000d7c  4418              ADD      r0,r0,r3              ;1939
000d7e  b2a4              UXTH     r4,r4                 ;1939
000d80  4291              CMP      r1,r2                 ;1937
000d82  d3f3              BCC      |L9.3436|
000d84  2801              CMP      r0,#1                 ;1941
000d86  f63faa96          BHI      |L9.694|
000d8a  490b              LDR      r1,|L9.3512|
000d8c  7008              STRB     r0,[r1,#0]            ;1947
000d8e  490b              LDR      r1,|L9.3516|
000d90  2001              MOVS     r0,#1                 ;1948
000d92  7008              STRB     r0,[r1,#0]            ;1948
000d94  f7fffffe          BL       Write_Boot_Flag
                  |L9.3480|
000d98  f805b004          STRB     r11,[r5,r4]           ;1954
000d9c  1c64              ADDS     r4,r4,#1              ;1954
000d9e  b2a4              UXTH     r4,r4                 ;1954
                  |L9.3488|
000da0  1c64              ADDS     r4,r4,#1              ;1954
000da2  b033              ADD      sp,sp,#0xcc
000da4  b2a0              UXTH     r0,r4                 ;2077
000da6  e8bd8ff0          POP      {r4-r11,pc}
;;;2079   
                          ENDP

000daa  0000              DCW      0x0000
                  |L9.3500|
000dac  2530332e          DCB      "%03.3f",0
000db0  336600  
000db3  00                DCB      0
                  |L9.3508|
                          DCD      overflag
                  |L9.3512|
                          DCD      jumpflag
                  |L9.3516|
                          DCD      bootflag

                          AREA ||i.SetErr_ACK||, CODE, READONLY, ALIGN=2

                          REQUIRE _printf_percent
                          REQUIRE _printf_d
                          REQUIRE _printf_int_dec
                  SetErr_ACK PROC
;;;977    
;;;978    u16 SetErr_ACK(char *buf, u8 addr ,u8 ucErr)
000000  b5f8              PUSH     {r3-r7,lr}
;;;979    {
000002  4604              MOV      r4,r0
;;;980    		u16 i=0;
;;;981    		u8 len = 0;
;;;982    		char stradd[3] = {0};
000004  2000              MOVS     r0,#0
;;;983    		int addlen=0;
;;;984    		memset(buf,0,sizeof(buf));
000006  9000              STR      r0,[sp,#0]
000008  6020              STR      r0,[r4,#0]
00000a  4616              MOV      r6,r2                 ;979
;;;985        	buf[i++] = ChrStartS;
00000c  203e              MOVS     r0,#0x3e
00000e  7020              STRB     r0,[r4,#0]
;;;986    		sprintf(stradd,"%d",addr);
000010  460a              MOV      r2,r1
000012  a11a              ADR      r1,|L10.124|
000014  4668              MOV      r0,sp
000016  f7fffffe          BL       __2sprintf
;;;987    		addlen=strlen(stradd);
00001a  4668              MOV      r0,sp
00001c  f7fffffe          BL       strlen
000020  4605              MOV      r5,r0
;;;988    		strncat(&buf[i],stradd,addlen);
000022  1c60              ADDS     r0,r4,#1
000024  462a              MOV      r2,r5
000026  4669              MOV      r1,sp
000028  f7fffffe          BL       strncat
00002c  1c6d              ADDS     r5,r5,#1
;;;989    		i+=addlen;
00002e  b2a8              UXTH     r0,r5
;;;990    		buf[i++] = '/';
000030  212f              MOVS     r1,#0x2f
000032  5421              STRB     r1,[r4,r0]
000034  1c40              ADDS     r0,r0,#1
000036  b285              UXTH     r5,r0
;;;991    		switch(ucErr)
000038  2e01              CMP      r6,#1
00003a  d008              BEQ      |L10.78|
00003c  2e02              CMP      r6,#2
00003e  d001              BEQ      |L10.68|
000040  2e03              CMP      r6,#3
000042  d015              BEQ      |L10.112|
                  |L10.68|
;;;992            {
;;;993              case 1:         //
;;;994              	   len = 9;
;;;995              	   memmove(&buf[i],"PARA ERR!",len);   
;;;996              	   break;
;;;997    	      case 2:         //
;;;998              	   len = 8;
;;;999              	   memmove(&buf[i],"CMD ERR!",len);   
;;;1000             	   break;
;;;1001   	      case 3:         //
;;;1002             	   len = 8;
;;;1003             	   memmove(&buf[i],"REM ERR!",len);   
;;;1004             	   break;
;;;1005   		  default:    
;;;1006                  len = 8;
000044  2608              MOVS     r6,#8
;;;1007             	   memmove(&buf[i],"CMD ERR!",len);   
000046  1960              ADDS     r0,r4,r5
000048  4632              MOV      r2,r6
00004a  a10d              ADR      r1,|L10.128|
;;;1008                  break;
00004c  e003              B        |L10.86|
                  |L10.78|
00004e  2609              MOVS     r6,#9                 ;994
000050  1960              ADDS     r0,r4,r5              ;995
000052  4632              MOV      r2,r6                 ;995
000054  a10d              ADR      r1,|L10.140|
                  |L10.86|
000056  f7fffffe          BL       __aeabi_memmove
;;;1009   	    }
;;;1010   	    i+=len;
00005a  19a8              ADDS     r0,r5,r6
00005c  b280              UXTH     r0,r0
;;;1011   		buf[i++] = ChrEndR;
00005e  210d              MOVS     r1,#0xd
000060  5421              STRB     r1,[r4,r0]
000062  1c40              ADDS     r0,r0,#1
000064  b280              UXTH     r0,r0
;;;1012   		buf[i++] = ChrEndS;
000066  210a              MOVS     r1,#0xa
000068  5421              STRB     r1,[r4,r0]
00006a  1c40              ADDS     r0,r0,#1
00006c  b280              UXTH     r0,r0
;;;1013   		return i;
;;;1014   }
00006e  bdf8              POP      {r3-r7,pc}
                  |L10.112|
000070  2608              MOVS     r6,#8                 ;1002
000072  1960              ADDS     r0,r4,r5              ;1003
000074  4632              MOV      r2,r6                 ;1003
000076  a108              ADR      r1,|L10.152|
000078  e7ed              B        |L10.86|
;;;1015   
                          ENDP

00007a  0000              DCW      0x0000
                  |L10.124|
00007c  256400            DCB      "%d",0
00007f  00                DCB      0
                  |L10.128|
000080  434d4420          DCB      "CMD ERR!",0
000084  45525221
000088  00      
000089  00                DCB      0
00008a  00                DCB      0
00008b  00                DCB      0
                  |L10.140|
00008c  50415241          DCB      "PARA ERR!",0
000090  20455252
000094  2100    
000096  00                DCB      0
000097  00                DCB      0
                  |L10.152|
000098  52454d20          DCB      "REM ERR!",0
00009c  45525221
0000a0  00      
0000a1  00                DCB      0
0000a2  00                DCB      0
0000a3  00                DCB      0

                          AREA ||i.SetListPC||, CODE, READONLY, ALIGN=2

                  SetListPC PROC
;;;162    
;;;163    void SetListPC(void)
000000  4804              LDR      r0,|L11.20|
;;;164    {
000002  b510              PUSH     {r4,lr}
;;;165    	SetPowerC(Para.CDC_Limit_C);
000004  f8b00070          LDRH     r0,[r0,#0x70]  ; Para
000008  f7fffffe          BL       SetPowerC
;;;166    	listsend = 3;
00000c  4902              LDR      r1,|L11.24|
00000e  2003              MOVS     r0,#3
000010  7248              STRB     r0,[r1,#9]
;;;167    }
000012  bd10              POP      {r4,pc}
;;;168    
                          ENDP

                  |L11.20|
                          DCD      Para
                  |L11.24|
                          DCD      ||.data||

                          AREA ||i.SetListPS||, CODE, READONLY, ALIGN=2

                  SetListPS PROC
;;;169    
;;;170    void SetListPS(void)
000000  b570              PUSH     {r4-r6,lr}
;;;171    {
;;;172    	if(mainswitch == 1)
000002  4c0f              LDR      r4,|L12.64|
000004  79a0              LDRB     r0,[r4,#6]  ; mainswitch
;;;173    	{
;;;174    		GPIO_SetBits(GPIOE,GPIO_Pin_2);
000006  4d0f              LDR      r5,|L12.68|
000008  2801              CMP      r0,#1                 ;172
00000a  d109              BNE      |L12.32|
00000c  2104              MOVS     r1,#4
00000e  4628              MOV      r0,r5
000010  f7fffffe          BL       GPIO_SetBits
;;;175    		Delay_ms(POWER_SW_DELAY);
000014  200a              MOVS     r0,#0xa
000016  f7fffffe          BL       Delay_ms
;;;176    		PowerSwitch(mainswitch);
00001a  79a0              LDRB     r0,[r4,#6]  ; mainswitch
00001c  f7fffffe          BL       PowerSwitch
                  |L12.32|
;;;177    	}
;;;178    	
;;;179    	if(mainswitch == 0)
000020  79a0              LDRB     r0,[r4,#6]  ; mainswitch
000022  b948              CBNZ     r0,|L12.56|
;;;180    	{
;;;181    		PowerSwitch(mainswitch);
000024  79a0              LDRB     r0,[r4,#6]  ; mainswitch
000026  f7fffffe          BL       PowerSwitch
;;;182    		Delay_ms(POWER_SW_DELAY);
00002a  200a              MOVS     r0,#0xa
00002c  f7fffffe          BL       Delay_ms
;;;183    		GPIO_ResetBits(GPIOE,GPIO_Pin_2); //关闭电源输出继电器
000030  2104              MOVS     r1,#4
000032  4628              MOV      r0,r5
000034  f7fffffe          BL       GPIO_ResetBits
                  |L12.56|
;;;184    	}
;;;185    	
;;;186    	listsend = 0;
000038  2000              MOVS     r0,#0
00003a  7260              STRB     r0,[r4,#9]
;;;187    }
00003c  bd70              POP      {r4-r6,pc}
;;;188    
                          ENDP

00003e  0000              DCW      0x0000
                  |L12.64|
                          DCD      ||.data||
                  |L12.68|
                          DCD      0x40021000

                          AREA ||i.SetListPV||, CODE, READONLY, ALIGN=2

                  SetListPV PROC
;;;156    }
;;;157    void SetListPV(void)
000000  4804              LDR      r0,|L13.20|
;;;158    {
000002  b510              PUSH     {r4,lr}
;;;159    	SetPowerV(Para.CDC_OutPut_V);
000004  6ec0              LDR      r0,[r0,#0x6c]  ; Para
000006  f7fffffe          BL       SetPowerV
;;;160    	listsend = 2;
00000a  4903              LDR      r1,|L13.24|
00000c  2002              MOVS     r0,#2
00000e  7248              STRB     r0,[r1,#9]
;;;161    }
000010  bd10              POP      {r4,pc}
;;;162    
                          ENDP

000012  0000              DCW      0x0000
                  |L13.20|
                          DCD      Para
                  |L13.24|
                          DCD      ||.data||

                          AREA ||i.SetPowerC||, CODE, READONLY, ALIGN=2

                  SetPowerC PROC
;;;115    
;;;116    void SetPowerC(vu16 powc)
000000  b531              PUSH     {r0,r4,r5,lr}
;;;117    {
;;;118    	MasterSendbuf[0] = 0x01;
000002  4c12              LDR      r4,|L14.76|
000004  2001              MOVS     r0,#1
000006  7020              STRB     r0,[r4,#0]
;;;119    	MasterSendbuf[1] = 0x06;
000008  2006              MOVS     r0,#6
00000a  7060              STRB     r0,[r4,#1]
;;;120    	MasterSendbuf[2] = 0x00;
00000c  2000              MOVS     r0,#0
00000e  70a0              STRB     r0,[r4,#2]
;;;121    	MasterSendbuf[3] = 0x31;
000010  2031              MOVS     r0,#0x31
000012  70e0              STRB     r0,[r4,#3]
;;;122    	MasterSendbuf[4] = (u8)(powc/10>>8);
000014  f8bd1000          LDRH     r1,[sp,#0]
000018  200a              MOVS     r0,#0xa
00001a  fbb1f1f0          UDIV     r1,r1,r0
00001e  0a09              LSRS     r1,r1,#8
000020  7121              STRB     r1,[r4,#4]
;;;123    	MasterSendbuf[5] = (u8)(powc/10);
000022  f8bd1000          LDRH     r1,[sp,#0]
000026  fbb1f0f0          UDIV     r0,r1,r0
00002a  7160              STRB     r0,[r4,#5]
;;;124    	MasterSendbuf[6] = (u8)(Hardware_CRC(MasterSendbuf,6));
00002c  2106              MOVS     r1,#6
00002e  4620              MOV      r0,r4
000030  f7fffffe          BL       Hardware_CRC
000034  71a0              STRB     r0,[r4,#6]
;;;125    	MasterSendbuf[7] = (u8)(Hardware_CRC(MasterSendbuf,6)>>8);	
000036  2106              MOVS     r1,#6
000038  4620              MOV      r0,r4
00003a  f7fffffe          BL       Hardware_CRC
00003e  0a00              LSRS     r0,r0,#8
000040  71e0              STRB     r0,[r4,#7]
;;;126    	USART3WriteDMA(8);
000042  e8bd4038          POP      {r3-r5,lr}
000046  2008              MOVS     r0,#8
000048  f7ffbffe          B.W      USART3WriteDMA
;;;127    }
;;;128    
                          ENDP

                  |L14.76|
                          DCD      ||area_number.31||+0xdc

                          AREA ||i.SetPowerModeC||, CODE, READONLY, ALIGN=2

                  SetPowerModeC PROC
;;;134    
;;;135    void SetPowerModeC(void)
000000  4804              LDR      r0,|L15.20|
;;;136    {
000002  b510              PUSH     {r4,lr}
;;;137    	SetPowerC(Para.POWER_Limit_C);
000004  f8b00058          LDRH     r0,[r0,#0x58]  ; Para
000008  f7fffffe          BL       SetPowerC
;;;138    	sendwait = 3;
00000c  4902              LDR      r1,|L15.24|
00000e  2003              MOVS     r0,#3
000010  7208              STRB     r0,[r1,#8]
;;;139    }
000012  bd10              POP      {r4,pc}
;;;140    
                          ENDP

                  |L15.20|
                          DCD      Para
                  |L15.24|
                          DCD      ||.data||

                          AREA ||i.SetPowerModeS||, CODE, READONLY, ALIGN=2

                  SetPowerModeS PROC
;;;140    
;;;141    void SetPowerModeS(void)
000000  b570              PUSH     {r4-r6,lr}
;;;142    {
;;;143    	if(mainswitch == 1)
000002  4c10              LDR      r4,|L16.68|
000004  79a0              LDRB     r0,[r4,#6]  ; mainswitch
;;;144    	{
;;;145    		GPIO_SetBits(GPIOE,GPIO_Pin_2);
000006  4d10              LDR      r5,|L16.72|
000008  2801              CMP      r0,#1                 ;143
00000a  d002              BEQ      |L16.18|
;;;146    		Delay_ms(POWER_SW_DELAY);
;;;147    		PowerSwitch(mainswitch);
;;;148    	}else if(mainswitch == 0)
00000c  79a0              LDRB     r0,[r4,#6]  ; mainswitch
00000e  b158              CBZ      r0,|L16.40|
000010  e014              B        |L16.60|
                  |L16.18|
000012  2104              MOVS     r1,#4                 ;145
000014  4628              MOV      r0,r5                 ;145
000016  f7fffffe          BL       GPIO_SetBits
00001a  200a              MOVS     r0,#0xa               ;146
00001c  f7fffffe          BL       Delay_ms
000020  79a0              LDRB     r0,[r4,#6]            ;147  ; mainswitch
000022  f7fffffe          BL       PowerSwitch
000026  e009              B        |L16.60|
                  |L16.40|
;;;149    	{
;;;150    		PowerSwitch(mainswitch);
000028  79a0              LDRB     r0,[r4,#6]  ; mainswitch
00002a  f7fffffe          BL       PowerSwitch
;;;151    		Delay_ms(POWER_SW_DELAY);
00002e  200a              MOVS     r0,#0xa
000030  f7fffffe          BL       Delay_ms
;;;152    		GPIO_ResetBits(GPIOE,GPIO_Pin_2); //关闭电源输出继电器
000034  2104              MOVS     r1,#4
000036  4628              MOV      r0,r5
000038  f7fffffe          BL       GPIO_ResetBits
                  |L16.60|
;;;153    	}
;;;154    	
;;;155    	sendwait = 0;
00003c  2000              MOVS     r0,#0
00003e  7220              STRB     r0,[r4,#8]
;;;156    }
000040  bd70              POP      {r4-r6,pc}
;;;157    void SetListPV(void)
                          ENDP

000042  0000              DCW      0x0000
                  |L16.68|
                          DCD      ||.data||
                  |L16.72|
                          DCD      0x40021000

                          AREA ||i.SetPowerModeV||, CODE, READONLY, ALIGN=2

                  SetPowerModeV PROC
;;;128    
;;;129    void SetPowerModeV(void)
000000  4804              LDR      r0,|L17.20|
;;;130    {
000002  b510              PUSH     {r4,lr}
;;;131    	SetPowerV(Para.POWER_OutPut_V);
000004  6d40              LDR      r0,[r0,#0x54]  ; Para
000006  f7fffffe          BL       SetPowerV
;;;132    	sendwait = 2;
00000a  4903              LDR      r1,|L17.24|
00000c  2002              MOVS     r0,#2
00000e  7208              STRB     r0,[r1,#8]
;;;133    }
000010  bd10              POP      {r4,pc}
;;;134    
                          ENDP

000012  0000              DCW      0x0000
                  |L17.20|
                          DCD      Para
                  |L17.24|
                          DCD      ||.data||

                          AREA ||i.SetPowerV||, CODE, READONLY, ALIGN=2

                  SetPowerV PROC
;;;102    }
;;;103    void SetPowerV(vu32 powv)
000000  b531              PUSH     {r0,r4,r5,lr}
;;;104    {
;;;105    	MasterSendbuf[0] = 0x01;
000002  4c11              LDR      r4,|L18.72|
000004  2001              MOVS     r0,#1
000006  7020              STRB     r0,[r4,#0]
;;;106    	MasterSendbuf[1] = 0x06;
000008  2006              MOVS     r0,#6
00000a  7060              STRB     r0,[r4,#1]
;;;107    	MasterSendbuf[2] = 0x00;
00000c  2000              MOVS     r0,#0
00000e  70a0              STRB     r0,[r4,#2]
;;;108    	MasterSendbuf[3] = 0x30;
000010  2030              MOVS     r0,#0x30
000012  70e0              STRB     r0,[r4,#3]
;;;109    	MasterSendbuf[4] = (u8)(powv/10>>8);
000014  9900              LDR      r1,[sp,#0]
000016  200a              MOVS     r0,#0xa
000018  fbb1f1f0          UDIV     r1,r1,r0
00001c  0a09              LSRS     r1,r1,#8
00001e  7121              STRB     r1,[r4,#4]
;;;110    	MasterSendbuf[5] = (u8)(powv/10);
000020  9900              LDR      r1,[sp,#0]
000022  fbb1f0f0          UDIV     r0,r1,r0
000026  7160              STRB     r0,[r4,#5]
;;;111    	MasterSendbuf[6] = (u8)(Hardware_CRC(MasterSendbuf,6));
000028  2106              MOVS     r1,#6
00002a  4620              MOV      r0,r4
00002c  f7fffffe          BL       Hardware_CRC
000030  71a0              STRB     r0,[r4,#6]
;;;112    	MasterSendbuf[7] = (u8)(Hardware_CRC(MasterSendbuf,6)>>8);	
000032  2106              MOVS     r1,#6
000034  4620              MOV      r0,r4
000036  f7fffffe          BL       Hardware_CRC
00003a  0a00              LSRS     r0,r0,#8
00003c  71e0              STRB     r0,[r4,#7]
;;;113    	USART3WriteDMA(8);
00003e  e8bd4038          POP      {r3-r5,lr}
000042  2008              MOVS     r0,#8
000044  f7ffbffe          B.W      USART3WriteDMA
;;;114    }
;;;115    
                          ENDP

                  |L18.72|
                          DCD      ||area_number.31||+0xdc

                          AREA ||i.UART1_Send||, CODE, READONLY, ALIGN=2

                  UART1_Send PROC
;;;2471   
;;;2472   void UART1_Send(void)
000000  b570              PUSH     {r4-r6,lr}
;;;2473   {
;;;2474   	static vu8 UART_Buffer_Send_pointer=0;
;;;2475   		if (UART_Buffer_Send_pointer < Transmit_BUFFERsize)
000002  4c11              LDR      r4,|L19.72|
000004  78e0              LDRB     r0,[r4,#3]  ; UART_Buffer_Send_pointer
000006  7921              LDRB     r1,[r4,#4]  ; Transmit_BUFFERsize
000008  4288              CMP      r0,r1
00000a  d215              BCS      |L19.56|
;;;2476            {
;;;2477   				 if(UART_Buffer_Send[0]==ADDR)
00000c  480f              LDR      r0,|L19.76|
00000e  7801              LDRB     r1,[r0,#0]  ; UART_Buffer_Send
000010  4a0f              LDR      r2,|L19.80|
000012  7812              LDRB     r2,[r2,#0]  ; ADDR
000014  4291              CMP      r1,r2
000016  d10e              BNE      |L19.54|
;;;2478   				 {
;;;2479   					USART_SendData(USART1,UART_Buffer_Send[UART_Buffer_Send_pointer]);
000018  78e1              LDRB     r1,[r4,#3]  ; UART_Buffer_Send_pointer
00001a  5c41              LDRB     r1,[r0,r1]
00001c  4d0d              LDR      r5,|L19.84|
00001e  4628              MOV      r0,r5
000020  f7fffffe          BL       USART_SendData
                  |L19.36|
;;;2480   					while (USART_GetFlagStatus(USART1,USART_FLAG_TXE) == RESET);//等待发送完成
000024  2180              MOVS     r1,#0x80
000026  4628              MOV      r0,r5
000028  f7fffffe          BL       USART_GetFlagStatus
00002c  2800              CMP      r0,#0
00002e  d0f9              BEQ      |L19.36|
;;;2481   					UART_Buffer_Send_pointer++;
000030  78e0              LDRB     r0,[r4,#3]  ; UART_Buffer_Send_pointer
000032  1c40              ADDS     r0,r0,#1
000034  70e0              STRB     r0,[r4,#3]
                  |L19.54|
;;;2482   				 }
;;;2483            }
;;;2484   		else 
;;;2485   		{
;;;2486   			UART_Buffer_Send_pointer=0;
;;;2487   			UART_SEND_flag=0;//发送完成一帧数据
;;;2488   		}
;;;2489   }
000036  bd70              POP      {r4-r6,pc}
                  |L19.56|
000038  2000              MOVS     r0,#0                 ;2486
00003a  70e0              STRB     r0,[r4,#3]            ;2486
00003c  4806              LDR      r0,|L19.88|
00003e  6801              LDR      r1,[r0,#0]            ;2487  ; flagA
000040  f0210110          BIC      r1,r1,#0x10           ;2487
000044  6001              STR      r1,[r0,#0]            ;2487  ; flagA
000046  bd70              POP      {r4-r6,pc}
;;;2490   
                          ENDP

                  |L19.72|
                          DCD      ||.data||
                  |L19.76|
                          DCD      ||area_number.31||
                  |L19.80|
                          DCD      ADDR
                  |L19.84|
                          DCD      0x40011000
                  |L19.88|
                          DCD      flagA

                          AREA ||i.UART2_Send||, CODE, READONLY, ALIGN=2

                  UART2_Send PROC
;;;2452   }
;;;2453   void UART2_Send(void)
000000  b570              PUSH     {r4-r6,lr}
;;;2454   {
;;;2455   	static vu8 UART_Buffer_Send_pointer=0;
;;;2456   		if (UART_Buffer_Send_pointer < Transmit_BUFFERsize)
000002  4c11              LDR      r4,|L20.72|
000004  78a0              LDRB     r0,[r4,#2]  ; UART_Buffer_Send_pointer
000006  7921              LDRB     r1,[r4,#4]  ; Transmit_BUFFERsize
000008  4288              CMP      r0,r1
00000a  d215              BCS      |L20.56|
;;;2457            {
;;;2458   					 if(UART_Buffer_Send[0]==ADDR)
00000c  480f              LDR      r0,|L20.76|
00000e  7801              LDRB     r1,[r0,#0]  ; UART_Buffer_Send
000010  4a0f              LDR      r2,|L20.80|
000012  7812              LDRB     r2,[r2,#0]  ; ADDR
000014  4291              CMP      r1,r2
000016  d10e              BNE      |L20.54|
;;;2459   					 {
;;;2460   						USART_SendData(USART2,UART_Buffer_Send[UART_Buffer_Send_pointer]);
000018  78a1              LDRB     r1,[r4,#2]  ; UART_Buffer_Send_pointer
00001a  5c41              LDRB     r1,[r0,r1]
00001c  480d              LDR      r0,|L20.84|
00001e  f7fffffe          BL       USART_SendData
;;;2461   						while (USART_GetFlagStatus(USART1,USART_FLAG_TXE) == RESET);//等待发送完成
000022  4d0d              LDR      r5,|L20.88|
                  |L20.36|
000024  2180              MOVS     r1,#0x80
000026  4628              MOV      r0,r5
000028  f7fffffe          BL       USART_GetFlagStatus
00002c  2800              CMP      r0,#0
00002e  d0f9              BEQ      |L20.36|
;;;2462   						UART_Buffer_Send_pointer++;
000030  78a0              LDRB     r0,[r4,#2]  ; UART_Buffer_Send_pointer
000032  1c40              ADDS     r0,r0,#1
000034  70a0              STRB     r0,[r4,#2]
                  |L20.54|
;;;2463   					}
;;;2464            }
;;;2465   		else 
;;;2466   		{
;;;2467   			UART_Buffer_Send_pointer=0;
;;;2468   			UART_SEND_flag=0;//发送完成一帧数据
;;;2469   		}
;;;2470   }
000036  bd70              POP      {r4-r6,pc}
                  |L20.56|
000038  2000              MOVS     r0,#0                 ;2467
00003a  70a0              STRB     r0,[r4,#2]            ;2467
00003c  4807              LDR      r0,|L20.92|
00003e  6801              LDR      r1,[r0,#0]            ;2468  ; flagA
000040  f0210110          BIC      r1,r1,#0x10           ;2468
000044  6001              STR      r1,[r0,#0]            ;2468  ; flagA
000046  bd70              POP      {r4-r6,pc}
;;;2471   
                          ENDP

                  |L20.72|
                          DCD      ||.data||
                  |L20.76|
                          DCD      ||area_number.31||
                  |L20.80|
                          DCD      ADDR
                  |L20.84|
                          DCD      0x40004400
                  |L20.88|
                          DCD      0x40011000
                  |L20.92|
                          DCD      flagA

                          AREA ||i.USART2_Configuration||, CODE, READONLY, ALIGN=2

                  USART2_Configuration PROC
;;;2148   
;;;2149   void USART2_Configuration(void)//串口初始化函数
000000  b570              PUSH     {r4-r6,lr}
;;;2150   {  
;;;2151   	GPIO_InitTypeDef GPIO_InitStructure;
;;;2152   	USART_InitTypeDef USART_InitStructure;
;;;2153   	
;;;2154   	/* config USART1 clock */
;;;2155   	RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART2, ENABLE);
000002  2101              MOVS     r1,#1
000004  b088              SUB      sp,sp,#0x20           ;2150
000006  0448              LSLS     r0,r1,#17
000008  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;2156   	GPIO_PinAFConfig(GPIOA,GPIO_PinSource2,GPIO_AF_USART2);
00000c  4e2a              LDR      r6,|L21.184|
00000e  2207              MOVS     r2,#7
000010  2102              MOVS     r1,#2
000012  4630              MOV      r0,r6
000014  f7fffffe          BL       GPIO_PinAFConfig
;;;2157   	GPIO_PinAFConfig(GPIOA,GPIO_PinSource3,GPIO_AF_USART2);
000018  2207              MOVS     r2,#7
00001a  2103              MOVS     r1,#3
00001c  4630              MOV      r0,r6
00001e  f7fffffe          BL       GPIO_PinAFConfig
;;;2158   	/* USART1 GPIO config */
;;;2159   	/* Configure USART1 Tx (PA.02) as alternate function push-pull */
;;;2160   	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_2;
;;;2161   	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
000022  2502              MOVS     r5,#2
000024  2004              MOVS     r0,#4                 ;2160
000026  f88d5004          STRB     r5,[sp,#4]
;;;2162   	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
00002a  2400              MOVS     r4,#0
00002c  9000              STR      r0,[sp,#0]            ;2161
00002e  f88d4006          STRB     r4,[sp,#6]
;;;2163   	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
000032  f88d5005          STRB     r5,[sp,#5]
;;;2164   	GPIO_Init(GPIOA, &GPIO_InitStructure);    
000036  4669              MOV      r1,sp
000038  4630              MOV      r0,r6
00003a  f7fffffe          BL       GPIO_Init
;;;2165   	/* Configure USART1 Rx (PA.03) as input floating */
;;;2166   	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_3;
00003e  2008              MOVS     r0,#8
;;;2167   	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
000040  9000              STR      r0,[sp,#0]
000042  f88d5004          STRB     r5,[sp,#4]
;;;2168   	GPIO_Init(GPIOA, &GPIO_InitStructure);
000046  4669              MOV      r1,sp
000048  4630              MOV      r0,r6
00004a  f7fffffe          BL       GPIO_Init
;;;2169   	
;;;2170   	/* USART1 mode config */
;;;2171   	USART_InitStructure.USART_BaudRate = 115200;
00004e  f44f30e1          MOV      r0,#0x1c200
;;;2172   	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
000052  9002              STR      r0,[sp,#8]
;;;2173   	USART_InitStructure.USART_StopBits = USART_StopBits_1;
;;;2174   	USART_InitStructure.USART_Parity = USART_Parity_No ;
000054  f8ad4010          STRH     r4,[sp,#0x10]
;;;2175   	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
;;;2176   	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
000058  200c              MOVS     r0,#0xc
;;;2177   	USART_Init(USART2, &USART_InitStructure);
00005a  4d18              LDR      r5,|L21.188|
00005c  f8ad400c          STRH     r4,[sp,#0xc]          ;2172
000060  f8ad0012          STRH     r0,[sp,#0x12]         ;2176
000064  f8ad400e          STRH     r4,[sp,#0xe]          ;2173
000068  f8ad4014          STRH     r4,[sp,#0x14]         ;2175
00006c  a902              ADD      r1,sp,#8
00006e  4628              MOV      r0,r5
000070  f7fffffe          BL       USART_Init
;;;2178   	
;;;2179   	/******使能串口接收中断******************/
;;;2180   	USART_ITConfig(USART2, USART_IT_RXNE, ENABLE);
000074  2201              MOVS     r2,#1
000076  f2405125          MOV      r1,#0x525
00007a  4628              MOV      r0,r5
00007c  f7fffffe          BL       USART_ITConfig
;;;2181   //	USART_ITConfig(USART2, USART_IT_ORE, ENABLE);	
;;;2182   	USART_Cmd(USART2, ENABLE);//使能串口1
000080  2101              MOVS     r1,#1
000082  4628              MOV      r0,r5
000084  f7fffffe          BL       USART_Cmd
;;;2183     USART_ClearFlag(USART2, USART_FLAG_TC);
000088  2140              MOVS     r1,#0x40
00008a  4628              MOV      r0,r5
00008c  f7fffffe          BL       USART_ClearFlag
000090  f44f60e0          MOV      r0,#0x700
000094  f7fffffe          BL       NVIC_PriorityGroupConfig
000098  2026              MOVS     r0,#0x26
00009a  f88d0018          STRB     r0,[sp,#0x18]
00009e  f88d4019          STRB     r4,[sp,#0x19]
0000a2  2001              MOVS     r0,#1
0000a4  f88d001a          STRB     r0,[sp,#0x1a]
0000a8  f88d001b          STRB     r0,[sp,#0x1b]
0000ac  a806              ADD      r0,sp,#0x18
0000ae  f7fffffe          BL       NVIC_Init
;;;2184     
;;;2185     USART2_NVIC_Config();//串口中断配置
;;;2186   }
0000b2  b008              ADD      sp,sp,#0x20
0000b4  bd70              POP      {r4-r6,pc}
;;;2187   
                          ENDP

0000b6  0000              DCW      0x0000
                  |L21.184|
                          DCD      0x40020000
                  |L21.188|
                          DCD      0x40004400

                          AREA ||i.USART2_IRQHandler||, CODE, READONLY, ALIGN=2

                  USART2_IRQHandler PROC
;;;2410   
;;;2411   void USART2_IRQHandler(void)
000000  b570              PUSH     {r4-r6,lr}
;;;2412   {
;;;2413   	u8 Res;
;;;2414    	if(USART_GetITStatus(USART2, USART_IT_RXNE) != RESET)
000002  4c1c              LDR      r4,|L22.116|
000004  f2405525          MOV      r5,#0x525
000008  4629              MOV      r1,r5
00000a  4620              MOV      r0,r4
00000c  f7fffffe          BL       USART_GetITStatus
000010  2800              CMP      r0,#0
000012  d013              BEQ      |L22.60|
;;;2415   	{
;;;2416   		USART_ClearITPendingBit(USART2,USART_IT_RXNE);
000014  4629              MOV      r1,r5
000016  4620              MOV      r0,r4
000018  f7fffffe          BL       USART_ClearITPendingBit
;;;2417   		Res=USART_ReceiveData(USART2);
00001c  4620              MOV      r0,r4
00001e  f7fffffe          BL       USART_ReceiveData
;;;2418   
;;;2419   		if((USART_RX_STA&0x8000)==0)//接收未完成
000022  4915              LDR      r1,|L22.120|
000024  b2c2              UXTB     r2,r0                 ;2417
000026  89c8              LDRH     r0,[r1,#0xe]  ; USART_RX_STA
000028  0403              LSLS     r3,r0,#16
00002a  d407              BMI      |L22.60|
;;;2420   		{
;;;2421   		if(USART_RX_STA&0x4000)//接收到了0x0d
;;;2422   		{
;;;2423   			if(Res!=0x0a)
;;;2424   				USART_RX_STA=0;//接收错误,重新开始
;;;2425   			else 
;;;2426   			{
;;;2427   		//		SerialRemoteHandleL(USART_RX_STA,USART_RX_BUF);
;;;2428   				USART_RX_BUF[USART_RX_STA&0X3FFF]=Res ;			//将接收的数据 存入数组中
00002c  4b13              LDR      r3,|L22.124|
00002e  0445              LSLS     r5,r0,#17             ;2421
000030  f04f0400          MOV      r4,#0                 ;2421
000034  d50b              BPL      |L22.78|
000036  2a0a              CMP      r2,#0xa               ;2423
000038  d001              BEQ      |L22.62|
                  |L22.58|
00003a  81cc              STRH     r4,[r1,#0xe]          ;2424
                  |L22.60|
;;;2429   				USART_RX_STA++;
;;;2430   				USART_RX_CNT = USART_RX_STA;
;;;2431   				USART_RX_STA|=0x8000;	//接收完成了 			  //接收到回车的后字节  置位状态寄存器 
;;;2432   			}
;;;2433   		}
;;;2434   		else //还没收到0X0D
;;;2435   		{	
;;;2436   			if(Res==0x0d)
;;;2437   			{
;;;2438   				USART_RX_BUF[USART_RX_STA&0X3FFF]=Res ;			//将接收的数据 存入数组中
;;;2439   				USART_RX_STA++;	
;;;2440   				USART_RX_STA|=0x4000;					 //接收到回车的前一字节  置位状态寄存器
;;;2441   			}
;;;2442   			else
;;;2443   				{
;;;2444   				USART_RX_BUF[USART_RX_STA&0X3FFF]=Res ;			//将接收的数据 存入数组中
;;;2445   					USART_RX_STA++;									//长度+1 为下一次做准备
;;;2446   				if(USART_RX_STA>(USART_REC_LEN-1))
;;;2447   					USART_RX_STA=0;//接收数据错误,重新开始接收	  
;;;2448   				}		 
;;;2449   			}
;;;2450   		} 
;;;2451   	}
;;;2452   }
00003c  bd70              POP      {r4-r6,pc}
                  |L22.62|
00003e  f3c0040d          UBFX     r4,r0,#0,#14          ;2428
000042  1c40              ADDS     r0,r0,#1              ;2428
000044  551a              STRB     r2,[r3,r4]            ;2428
000046  8208              STRH     r0,[r1,#0x10]         ;2430
000048  f4404000          ORR      r0,r0,#0x8000         ;2431
00004c  e010              B        |L22.112|
                  |L22.78|
00004e  2a0d              CMP      r2,#0xd               ;2436
000050  d008              BEQ      |L22.100|
000052  f3c0050d          UBFX     r5,r0,#0,#14          ;2444
000056  1c40              ADDS     r0,r0,#1              ;2444
000058  b280              UXTH     r0,r0                 ;2445
00005a  555a              STRB     r2,[r3,r5]            ;2444
00005c  81c8              STRH     r0,[r1,#0xe]          ;2445
00005e  28c7              CMP      r0,#0xc7              ;2446
000060  d8eb              BHI      |L22.58|
000062  bd70              POP      {r4-r6,pc}
                  |L22.100|
000064  f3c0040d          UBFX     r4,r0,#0,#14          ;2438
000068  1c40              ADDS     r0,r0,#1              ;2438
00006a  551a              STRB     r2,[r3,r4]            ;2438
00006c  f4404080          ORR      r0,r0,#0x4000         ;2440
                  |L22.112|
000070  81c8              STRH     r0,[r1,#0xe]          ;2431
000072  bd70              POP      {r4-r6,pc}
;;;2453   void UART2_Send(void)
                          ENDP

                  |L22.116|
                          DCD      0x40004400
                  |L22.120|
                          DCD      ||.data||
                  |L22.124|
                          DCD      ||area_number.31||+0x14

                          AREA ||i.USART3HANDLE||, CODE, READONLY, ALIGN=2

                  USART3HANDLE PROC
;;;214    
;;;215    void USART3HANDLE(void)
000000  b538              PUSH     {r3-r5,lr}
;;;216    {
;;;217    	vu16 crcres;
;;;218    
;;;219    	if(MasterRecbuf[0] == 0x01)
000002  4d28              LDR      r5,|L23.164|
;;;220    	{
;;;221    		if(MasterRecbuf[1] == 0x03)
;;;222    		{
;;;223    			crcres = (MasterRecbuf[8] << 8) + MasterRecbuf[7];
;;;224    			if(crcres == Hardware_CRC(MasterRecbuf,7))
;;;225    			{
;;;226    				 
;;;227    				Para.CPOW_Voltage = (MasterRecbuf[3] << 8) + MasterRecbuf[4];
;;;228    				Para.CCurrent = (MasterRecbuf[5] << 8) + MasterRecbuf[6];
;;;229    				memset(MasterRecbuf,0,sizeof(MasterRecbuf));
;;;230    			}
;;;231    				if(sendwait == 3)
000004  4c28              LDR      r4,|L23.168|
000006  7828              LDRB     r0,[r5,#0]            ;219  ; MasterRecbuf
000008  2801              CMP      r0,#1                 ;219
00000a  d148              BNE      |L23.158|
00000c  7868              LDRB     r0,[r5,#1]            ;221  ; MasterRecbuf
00000e  2803              CMP      r0,#3                 ;221
000010  d002              BEQ      |L23.24|
;;;232    				{
;;;233    					SetPowerModeS();
;;;234    				}
;;;235    				if(sendwait == 2)
;;;236    				{
;;;237    					SetPowerModeC();
;;;238    				}
;;;239    				if(sendwait == 1)
;;;240    				{
;;;241    					SetPowerModeV();
;;;242    				}
;;;243    				if(listsend == 3)
;;;244    				{
;;;245    					SetListPS();
;;;246    				}
;;;247    				if(listsend == 2)
;;;248    				{
;;;249    					SetListPC();
;;;250    				}
;;;251    				if(listsend == 1)
;;;252    				{
;;;253    					SetListPV();
;;;254    				}
;;;255    		}else if(MasterRecbuf[1] == 0x06){
000012  2806              CMP      r0,#6
000014  d03c              BEQ      |L23.144|
000016  e042              B        |L23.158|
                  |L23.24|
000018  79e8              LDRB     r0,[r5,#7]            ;223  ; MasterRecbuf
00001a  7a29              LDRB     r1,[r5,#8]            ;223  ; MasterRecbuf
00001c  eb002001          ADD      r0,r0,r1,LSL #8       ;223
000020  f8ad0000          STRH     r0,[sp,#0]            ;223
000024  2107              MOVS     r1,#7                 ;224
000026  481f              LDR      r0,|L23.164|
000028  f7fffffe          BL       Hardware_CRC
00002c  f8bd1000          LDRH     r1,[sp,#0]            ;224
000030  4288              CMP      r0,r1                 ;224
000032  d10e              BNE      |L23.82|
000034  7928              LDRB     r0,[r5,#4]            ;227  ; MasterRecbuf
000036  78e9              LDRB     r1,[r5,#3]            ;227  ; MasterRecbuf
000038  eb002101          ADD      r1,r0,r1,LSL #8       ;227
00003c  481b              LDR      r0,|L23.172|
00003e  6281              STR      r1,[r0,#0x28]         ;227  ; Para
000040  79a9              LDRB     r1,[r5,#6]            ;228  ; MasterRecbuf
000042  796a              LDRB     r2,[r5,#5]            ;228  ; MasterRecbuf
000044  eb012102          ADD      r1,r1,r2,LSL #8       ;228
000048  6301              STR      r1,[r0,#0x30]         ;228  ; Para
00004a  2180              MOVS     r1,#0x80              ;229
00004c  4815              LDR      r0,|L23.164|
00004e  f7fffffe          BL       __aeabi_memclr
                  |L23.82|
000052  7a20              LDRB     r0,[r4,#8]            ;231  ; sendwait
000054  2803              CMP      r0,#3                 ;231
000056  d101              BNE      |L23.92|
000058  f7fffffe          BL       SetPowerModeS
                  |L23.92|
00005c  7a20              LDRB     r0,[r4,#8]            ;235  ; sendwait
00005e  2802              CMP      r0,#2                 ;235
000060  d101              BNE      |L23.102|
000062  f7fffffe          BL       SetPowerModeC
                  |L23.102|
000066  7a20              LDRB     r0,[r4,#8]            ;239  ; sendwait
000068  2801              CMP      r0,#1                 ;239
00006a  d101              BNE      |L23.112|
00006c  f7fffffe          BL       SetPowerModeV
                  |L23.112|
000070  7a60              LDRB     r0,[r4,#9]            ;243  ; listsend
000072  2803              CMP      r0,#3                 ;243
000074  d101              BNE      |L23.122|
000076  f7fffffe          BL       SetListPS
                  |L23.122|
00007a  7a60              LDRB     r0,[r4,#9]            ;247  ; listsend
00007c  2802              CMP      r0,#2                 ;247
00007e  d101              BNE      |L23.132|
000080  f7fffffe          BL       SetListPC
                  |L23.132|
000084  7a60              LDRB     r0,[r4,#9]            ;251  ; listsend
000086  2801              CMP      r0,#1                 ;251
000088  d109              BNE      |L23.158|
00008a  f7fffffe          BL       SetListPV
00008e  e006              B        |L23.158|
                  |L23.144|
;;;256    			memset(MasterRecbuf,0,sizeof(MasterRecbuf));
000090  2180              MOVS     r1,#0x80
000092  4804              LDR      r0,|L23.164|
000094  f7fffffe          BL       __aeabi_memclr
;;;257    			watchtest ++;
000098  6d60              LDR      r0,[r4,#0x54]  ; watchtest
00009a  1c40              ADDS     r0,r0,#1
00009c  6560              STR      r0,[r4,#0x54]  ; watchtest
                  |L23.158|
;;;258    		}
;;;259    	}	
;;;260    
;;;261    	
;;;262    	USART3_Recive_flg = 0;
00009e  2000              MOVS     r0,#0
0000a0  7060              STRB     r0,[r4,#1]
;;;263    }
0000a2  bd38              POP      {r3-r5,pc}
;;;264    
                          ENDP

                  |L23.164|
                          DCD      ||area_number.31||+0x15c
                  |L23.168|
                          DCD      ||.data||
                  |L23.172|
                          DCD      Para

                          AREA ||i.USART3WriteDMA||, CODE, READONLY, ALIGN=2

                  USART3WriteDMA PROC
;;;2353   
;;;2354   void USART3WriteDMA(u16 len)
000000  b570              PUSH     {r4-r6,lr}
;;;2355   {
000002  4604              MOV      r4,r0
;;;2356       USART_ClearFlag(USART3, USART_FLAG_TC);     //串口发送准备
000004  2140              MOVS     r1,#0x40
000006  4809              LDR      r0,|L24.44|
000008  f7fffffe          BL       USART_ClearFlag
;;;2357   	DMA_Cmd(DMA1_Stream3, DISABLE);//关闭DMA 数据流3
00000c  4d08              LDR      r5,|L24.48|
00000e  2100              MOVS     r1,#0
000010  4628              MOV      r0,r5
000012  f7fffffe          BL       DMA_Cmd
;;;2358       DMA_SetCurrDataCounter(DMA1_Stream3,len);//设置DMA发生长度
000016  4621              MOV      r1,r4
000018  4628              MOV      r0,r5
00001a  f7fffffe          BL       DMA_SetCurrDataCounter
;;;2359   	DMA_Cmd(DMA1_Stream3, ENABLE);// 打开DMA 数据流3
00001e  4628              MOV      r0,r5
000020  e8bd4070          POP      {r4-r6,lr}
000024  2101              MOVS     r1,#1
000026  f7ffbffe          B.W      DMA_Cmd
;;;2360      
;;;2361   }
;;;2362   
                          ENDP

00002a  0000              DCW      0x0000
                  |L24.44|
                          DCD      0x40004800
                  |L24.48|
                          DCD      0x40026058

                          AREA ||i.USART3_Configuration||, CODE, READONLY, ALIGN=2

                  USART3_Configuration PROC
;;;2300   
;;;2301   void USART3_Configuration()//???????
000000  b570              PUSH     {r4-r6,lr}
;;;2302   {  
;;;2303       GPIO_InitTypeDef GPIO_InitStructure;
;;;2304   	USART_InitTypeDef USART_InitStructure;
;;;2305   	
;;;2306   	/* config USART1 clock */
;;;2307   	RCC_APB1PeriphClockCmd(RCC_APB1Periph_USART3, ENABLE);
000002  2101              MOVS     r1,#1
000004  b088              SUB      sp,sp,#0x20           ;2302
000006  0488              LSLS     r0,r1,#18
000008  f7fffffe          BL       RCC_APB1PeriphClockCmd
;;;2308   //    RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_GPIOB,ENABLE); //?? GPIOA ??
;;;2309       
;;;2310   	GPIO_PinAFConfig(GPIOD,GPIO_PinSource8,GPIO_AF_USART3);
00000c  4c2a              LDR      r4,|L25.184|
00000e  2207              MOVS     r2,#7
000010  2108              MOVS     r1,#8
000012  4620              MOV      r0,r4
000014  f7fffffe          BL       GPIO_PinAFConfig
;;;2311   	GPIO_PinAFConfig(GPIOD,GPIO_PinSource9,GPIO_AF_USART3);
000018  2207              MOVS     r2,#7
00001a  2109              MOVS     r1,#9
00001c  4620              MOV      r0,r4
00001e  f7fffffe          BL       GPIO_PinAFConfig
;;;2312       
;;;2313   
;;;2314       
;;;2315       
;;;2316   	/* USART1 GPIO config */
;;;2317   	/* Configure USART1 Tx (PA.09) as alternate function push-pull */
;;;2318   	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_8;
000022  15a0              ASRS     r0,r4,#22
;;;2319   	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
000024  2502              MOVS     r5,#2
000026  9004              STR      r0,[sp,#0x10]
000028  f88d5014          STRB     r5,[sp,#0x14]
;;;2320   //     GPIO_InitStructure.GPIO_OType = GPIO_OType_PP; //??????
;;;2321   	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
00002c  f88d5015          STRB     r5,[sp,#0x15]
;;;2322   	GPIO_Init(GPIOD, &GPIO_InitStructure);    
000030  a904              ADD      r1,sp,#0x10
000032  4620              MOV      r0,r4
000034  f7fffffe          BL       GPIO_Init
;;;2323   	/* Configure USART1 Rx (PA.10) as input floating */
;;;2324   	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
000038  1560              ASRS     r0,r4,#21
;;;2325       GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
00003a  9004              STR      r0,[sp,#0x10]
00003c  f88d5014          STRB     r5,[sp,#0x14]
;;;2326   	GPIO_Init(GPIOD, &GPIO_InitStructure);
000040  a904              ADD      r1,sp,#0x10
000042  4620              MOV      r0,r4
000044  f7fffffe          BL       GPIO_Init
;;;2327       
;;;2328   
;;;2329   	
;;;2330   	/* USART1 mode config */
;;;2331   	USART_InitStructure.USART_BaudRate = 9600;
;;;2332   	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
000048  2400              MOVS     r4,#0
00004a  f44f5016          MOV      r0,#0x2580            ;2331
00004e  9000              STR      r0,[sp,#0]
;;;2333   	USART_InitStructure.USART_StopBits = USART_StopBits_1;
;;;2334   	USART_InitStructure.USART_Parity = USART_Parity_No ;
000050  f8ad4008          STRH     r4,[sp,#8]
;;;2335   	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
;;;2336   	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
000054  200c              MOVS     r0,#0xc
;;;2337   	USART_Init(USART3, &USART_InitStructure);
000056  4e19              LDR      r6,|L25.188|
000058  f8ad4004          STRH     r4,[sp,#4]            ;2332
00005c  f8ad000a          STRH     r0,[sp,#0xa]          ;2336
000060  f8ad4006          STRH     r4,[sp,#6]            ;2333
000064  f8ad400c          STRH     r4,[sp,#0xc]          ;2335
000068  4669              MOV      r1,sp
00006a  4630              MOV      r0,r6
00006c  f7fffffe          BL       USART_Init
;;;2338       
;;;2339   
;;;2340   	
;;;2341   	/******????????******************/
;;;2342   	USART_ITConfig(USART3, USART_IT_IDLE, ENABLE);
000070  2201              MOVS     r2,#1
000072  f2404124          MOV      r1,#0x424
000076  4630              MOV      r0,r6
000078  f7fffffe          BL       USART_ITConfig
00007c  f44f60e0          MOV      r0,#0x700
000080  f7fffffe          BL       NVIC_PriorityGroupConfig
000084  2027              MOVS     r0,#0x27
000086  f88d0018          STRB     r0,[sp,#0x18]
00008a  f88d4019          STRB     r4,[sp,#0x19]
00008e  f88d501a          STRB     r5,[sp,#0x1a]
000092  2001              MOVS     r0,#1
000094  f88d001b          STRB     r0,[sp,#0x1b]
000098  a806              ADD      r0,sp,#0x18
00009a  f7fffffe          BL       NVIC_Init
;;;2343   	USART3_NVIC_Config();//??????
;;;2344   	USART3_DMA_init();
00009e  f7fffffe          BL       USART3_DMA_init
;;;2345   	USART_Cmd(USART3, ENABLE);//????1
0000a2  2101              MOVS     r1,#1
0000a4  4630              MOV      r0,r6
0000a6  f7fffffe          BL       USART_Cmd
;;;2346       USART_ClearFlag(USART3, USART_FLAG_TC);
0000aa  2140              MOVS     r1,#0x40
0000ac  4630              MOV      r0,r6
0000ae  f7fffffe          BL       USART_ClearFlag
;;;2347       
;;;2348     
;;;2349       
;;;2350   	
;;;2351   }
0000b2  b008              ADD      sp,sp,#0x20
0000b4  bd70              POP      {r4-r6,pc}
;;;2352   
                          ENDP

0000b6  0000              DCW      0x0000
                  |L25.184|
                          DCD      0x40020c00
                  |L25.188|
                          DCD      0x40004800

                          AREA ||i.USART3_DMA_init||, CODE, READONLY, ALIGN=2

                  USART3_DMA_init PROC
;;;2201   
;;;2202   static void USART3_DMA_init(void)
000000  e92d4ff0          PUSH     {r4-r11,lr}
;;;2203   {
;;;2204       DMA_InitTypeDef DMA_InitStructure;
;;;2205       NVIC_InitTypeDef NVIC_InitStructure;
;;;2206   	
;;;2207   	//串口3使用DMA1 发送为数据流3  通道4   
;;;2208       //F4与F1DMA多了一个数据流的说法详细参考中文数据手册DMA 表35
;;;2209       /* 1.使能DMA2时钟 */
;;;2210   	RCC_AHB1PeriphClockCmd(RCC_AHB1Periph_DMA1, ENABLE);
000004  2101              MOVS     r1,#1
000006  b091              SUB      sp,sp,#0x44           ;2203
000008  0548              LSLS     r0,r1,#21
00000a  f7fffffe          BL       RCC_AHB1PeriphClockCmd
;;;2211   	
;;;2212   	//串口发送DMA配置
;;;2213       /* 2.配置使用DMA发送数据 */
;;;2214       DMA_DeInit(DMA1_Stream3); //DMA1 数据流 3
00000e  f8dfa0d8          LDR      r10,|L26.232|
000012  4650              MOV      r0,r10
000014  f7fffffe          BL       DMA_DeInit
;;;2215       DMA_InitStructure.DMA_Channel = DMA_Channel_4;  /* 配置DMA1通道4 */
000018  f04f6600          MOV      r6,#0x8000000
;;;2216       DMA_InitStructure.DMA_PeripheralBaseAddr  = (uint32_t)(&(USART3->DR)); /* 目的 */
;;;2217       DMA_InitStructure.DMA_Memory0BaseAddr     = (uint32_t)MasterSendbuf; /*源内存地址*/
00001c  4834              LDR      r0,|L26.240|
00001e  4f33              LDR      r7,|L26.236|
000020  9600              STR      r6,[sp,#0]
000022  e9cd7001          STRD     r7,r0,[sp,#4]
;;;2218       DMA_InitStructure.DMA_DIR                 = DMA_DIR_MemoryToPeripheral;  /*方向内            
;;;2219                                                                               存到外设*/
;;;2220       DMA_InitStructure.DMA_BufferSize          = MAXRxTxLen;                    
;;;2221       /* 长度 */                  
;;;2222       DMA_InitStructure.DMA_PeripheralInc       = DMA_PeripheralInc_Disable;    
000026  2400              MOVS     r4,#0
000028  2040              MOVS     r0,#0x40              ;2218
00002a  f04f0880          MOV      r8,#0x80              ;2220
;;;2223       /* 外设地址是否自增 */
;;;2224       DMA_InitStructure.DMA_MemoryInc           = DMA_MemoryInc_Enable;        
00002e  f44f6980          MOV      r9,#0x400
000032  9003              STR      r0,[sp,#0xc]
000034  e9cd8404          STRD     r8,r4,[sp,#0x10]
000038  e9cd9406          STRD     r9,r4,[sp,#0x18]
;;;2225       /* 内存地址是否自增 */
;;;2226       DMA_InitStructure.DMA_PeripheralDataSize  = DMA_PeripheralDataSize_Byte;  
;;;2227       /* 目的数据带宽 */
;;;2228       DMA_InitStructure.DMA_MemoryDataSize      = DMA_MemoryDataSize_Byte;      
;;;2229       /* 源数据宽度 */
;;;2230       DMA_InitStructure.DMA_Mode                = DMA_Mode_Normal;             
;;;2231       /* 单次传输模式/循环传输模式 */
;;;2232       DMA_InitStructure.DMA_Priority            = DMA_Priority_High;             
00003c  02c0              LSLS     r0,r0,#11
00003e  9408              STR      r4,[sp,#0x20]
000040  e9cd4009          STRD     r4,r0,[sp,#0x24]
;;;2233       /* DMA优先级 */
;;;2234       DMA_InitStructure.DMA_FIFOMode            = DMA_FIFOMode_Disable;          
;;;2235       /* FIFO模式/直接模式 */
;;;2236       DMA_InitStructure.DMA_FIFOThreshold       = DMA_FIFOThreshold_HalfFull; 
000044  2501              MOVS     r5,#1
000046  e9cd450b          STRD     r4,r5,[sp,#0x2c]
;;;2237       /* FIFO大小 */
;;;2238       DMA_InitStructure.DMA_MemoryBurst         = DMA_MemoryBurst_Single;      
;;;2239        /* 单次传输 */
;;;2240       DMA_InitStructure.DMA_PeripheralBurst     = DMA_PeripheralBurst_Single;
00004a  940d              STR      r4,[sp,#0x34]
;;;2241       /* 3. 配置DMA */
;;;2242       DMA_Init(DMA1_Stream3, &DMA_InitStructure);
00004c  4669              MOV      r1,sp
00004e  4650              MOV      r0,r10
000050  940e              STR      r4,[sp,#0x38]
000052  f7fffffe          BL       DMA_Init
;;;2243       /* 4.使能DMA中断 */
;;;2244       DMA_ITConfig(DMA1_Stream3, DMA_IT_TC, ENABLE);
000056  2201              MOVS     r2,#1
000058  2110              MOVS     r1,#0x10
00005a  4650              MOV      r0,r10
00005c  f7fffffe          BL       DMA_ITConfig
;;;2245       /* 5.使能串口的DMA发送接口 */
;;;2246       USART_DMACmd(USART3, USART_DMAReq_Tx, ENABLE);
000060  f1a70b04          SUB      r11,r7,#4
000064  2201              MOVS     r2,#1
000066  2180              MOVS     r1,#0x80
000068  4658              MOV      r0,r11
00006a  f7fffffe          BL       USART_DMACmd
;;;2247       /* 6. 配置DMA中断优先级 */
;;;2248       NVIC_InitStructure.NVIC_IRQChannel                   = DMA1_Stream3_IRQn;  
00006e  200e              MOVS     r0,#0xe
000070  f88d003c          STRB     r0,[sp,#0x3c]
;;;2249       //  DMA发生中断         
;;;2250       NVIC_InitStructure.NVIC_IRQChannelPreemptionPriority = 0;          
000074  f88d403d          STRB     r4,[sp,#0x3d]
;;;2251       NVIC_InitStructure.NVIC_IRQChannelSubPriority        = 4; 
000078  2004              MOVS     r0,#4
00007a  f88d003e          STRB     r0,[sp,#0x3e]
;;;2252       NVIC_InitStructure.NVIC_IRQChannelCmd                = ENABLE;
00007e  f88d503f          STRB     r5,[sp,#0x3f]
;;;2253       NVIC_Init(&NVIC_InitStructure);
000082  a80f              ADD      r0,sp,#0x3c
000084  f7fffffe          BL       NVIC_Init
;;;2254   	
;;;2255       /* 7.不使能DMA */                  
;;;2256       DMA_Cmd(DMA1_Stream3, DISABLE);// 数据流2
000088  2100              MOVS     r1,#0
00008a  4650              MOV      r0,r10
00008c  f7fffffe          BL       DMA_Cmd
;;;2257   	//************************DMA接收***********************//
;;;2258   	/* 2.配置使用DMA接收数据 */
;;;2259       DMA_DeInit(DMA1_Stream1); 
000090  f8dfa054          LDR      r10,|L26.232|
000094  f1aa0a30          SUB      r10,r10,#0x30
000098  4650              MOV      r0,r10
00009a  f7fffffe          BL       DMA_DeInit
;;;2260       DMA_InitStructure.DMA_Channel             = DMA_Channel_4;               
;;;2261       /* 配置DMA通道 */
;;;2262       DMA_InitStructure.DMA_PeripheralBaseAddr  = (uint32_t)(&(USART3->DR));   
;;;2263       /* 源地址 */
;;;2264       DMA_InitStructure.DMA_Memory0BaseAddr     = (uint32_t)MasterRecbuf;    
00009e  4814              LDR      r0,|L26.240|
0000a0  a902              ADD      r1,sp,#8
0000a2  3080              ADDS     r0,r0,#0x80
0000a4  e8810111          STM      r1,{r0,r4,r8}
0000a8  e9cd4905          STRD     r4,r9,[sp,#0x14]
;;;2265       /* 目标地址 */
;;;2266       DMA_InitStructure.DMA_DIR                 = DMA_DIR_PeripheralToMemory;    
;;;2267       /* 方向外设向内存  */
;;;2268       DMA_InitStructure.DMA_BufferSize          = MAXRxTxLen;                    		
;;;2269       /* 长度 */                  
;;;2270       DMA_InitStructure.DMA_PeripheralInc       = DMA_PeripheralInc_Disable;    
;;;2271         /* 外设地址是否自增 */
;;;2272       DMA_InitStructure.DMA_MemoryInc           = DMA_MemoryInc_Enable;         
;;;2273       /* 内存地址是否自增 */
;;;2274       DMA_InitStructure.DMA_PeripheralDataSize  = DMA_MemoryDataSize_Byte;     
;;;2275       /* 目的数据带宽 */
;;;2276       DMA_InitStructure.DMA_MemoryDataSize      = DMA_MemoryDataSize_Byte;      
;;;2277       /* 源数据宽度 */
;;;2278       DMA_InitStructure.DMA_Mode                = DMA_Mode_Circular;             
0000ac  0228              LSLS     r0,r5,#8
0000ae  e9cd4008          STRD     r4,r0,[sp,#0x20]
;;;2279       /*循环传输模式 */
;;;2280       DMA_InitStructure.DMA_Priority            = DMA_Priority_VeryHigh;        
0000b2  a90a              ADD      r1,sp,#0x28
0000b4  9407              STR      r4,[sp,#0x1c]         ;2278
0000b6  f44f3040          MOV      r0,#0x30000
0000ba  e8810031          STM      r1,{r0,r4,r5}
;;;2281       /* DMA优先级 */
;;;2282       DMA_InitStructure.DMA_FIFOMode            = DMA_FIFOMode_Disable;         
;;;2283        /* FIFO模式/直接模式 */
;;;2284       DMA_InitStructure.DMA_FIFOThreshold       = DMA_FIFOThreshold_HalfFull; 
;;;2285       /* FIFO大小 */
;;;2286       DMA_InitStructure.DMA_MemoryBurst         = DMA_MemoryBurst_Single;       
;;;2287       /* 单次传输 */
;;;2288       DMA_InitStructure.DMA_PeripheralBurst     = DMA_PeripheralBurst_Single;
0000be  940d              STR      r4,[sp,#0x34]
;;;2289       /* 3. 配置DMA */
;;;2290       DMA_Init(DMA1_Stream1, &DMA_InitStructure);
0000c0  4669              MOV      r1,sp
0000c2  4650              MOV      r0,r10
0000c4  940e              STR      r4,[sp,#0x38]
0000c6  e9cd6700          STRD     r6,r7,[sp,#0]
0000ca  f7fffffe          BL       DMA_Init
;;;2291       /* 4.由于接收不需要DMA中断，故不设置DMA中断 */
;;;2292       /* 5.使能串口的DMA接收 */
;;;2293       USART_DMACmd(USART3,USART_DMAReq_Rx,ENABLE);
0000ce  2201              MOVS     r2,#1
0000d0  2140              MOVS     r1,#0x40
0000d2  4658              MOV      r0,r11
0000d4  f7fffffe          BL       USART_DMACmd
;;;2294       /* 6. 由于接收不需要DMA中断，故不能配置DMA中断优先级 */
;;;2295       /* 7.使能DMA */ 
;;;2296       DMA_Cmd(DMA1_Stream1,ENABLE);
0000d8  2101              MOVS     r1,#1
0000da  4650              MOV      r0,r10
0000dc  f7fffffe          BL       DMA_Cmd
;;;2297   }
0000e0  b011              ADD      sp,sp,#0x44
0000e2  e8bd8ff0          POP      {r4-r11,pc}
;;;2298   
                          ENDP

0000e6  0000              DCW      0x0000
                  |L26.232|
                          DCD      0x40026058
                  |L26.236|
                          DCD      0x40004804
                  |L26.240|
                          DCD      ||area_number.31||+0xdc

                          AREA ||i.USART3_IRQHandler||, CODE, READONLY, ALIGN=2

                  USART3_IRQHandler PROC
;;;2378   
;;;2379   void USART3_IRQHandler(void)
000000  b570              PUSH     {r4-r6,lr}
;;;2380   {
;;;2381       u8 Clear = Clear;
;;;2382       u16 num = 0;
;;;2383            
;;;2384       if(USART_GetITStatus(USART3, USART_IT_IDLE) != RESET)
000002  4c18              LDR      r4,|L27.100|
000004  f2404124          MOV      r1,#0x424
000008  4620              MOV      r0,r4
00000a  f7fffffe          BL       USART_GetITStatus
00000e  2800              CMP      r0,#0
000010  d024              BEQ      |L27.92|
;;;2385       {
;;;2386           Clear = USART3->SR;  //读SR寄存器清除                                                            
000012  8820              LDRH     r0,[r4,#0]
;;;2387          
;;;2388           Clear = USART3->DR;  //读DR寄存器清除                                                        
000014  1d20              ADDS     r0,r4,#4
000016  8800              LDRH     r0,[r0,#0]
;;;2389           DMA_Cmd(DMA1_Stream1,DISABLE);   //关闭DMA
000018  4d13              LDR      r5,|L27.104|
00001a  2100              MOVS     r1,#0
00001c  4628              MOV      r0,r5
00001e  f7fffffe          BL       DMA_Cmd
;;;2390   		DMA_ClearFlag(DMA1_Stream1,DMA_FLAG_TCIF2);
000022  f04f5181          MOV      r1,#0x10200000
000026  4628              MOV      r0,r5
000028  f7fffffe          BL       DMA_ClearFlag
;;;2391           num = DMA_GetCurrDataCounter(DMA1_Stream1); //得到真正接收数据个数
00002c  4628              MOV      r0,r5
00002e  f7fffffe          BL       DMA_GetCurrDataCounter
;;;2392           if(num < MAXRxTxLen)
;;;2393           {
;;;2394               USART3_Recive_leng   = MAXRxTxLen - num;
000032  4c0e              LDR      r4,|L27.108|
000034  2880              CMP      r0,#0x80              ;2392
000036  d212              BCS      |L27.94|
000038  f1c00080          RSB      r0,r0,#0x80
00003c  b2c0              UXTB     r0,r0
00003e  7020              STRB     r0,[r4,#0]
;;;2395           }else
;;;2396           {
;;;2397               USART3_Recive_leng = MAXRxTxLen;
;;;2398           }
;;;2399            
;;;2400           if(USART3_Recive_leng > MAXRxTxLen)
000040  2880              CMP      r0,#0x80
000042  d901              BLS      |L27.72|
;;;2401           {
;;;2402               USART3_Recive_leng = 0;  //避免接收数据超界                                               
000044  2000              MOVS     r0,#0
                  |L27.70|
000046  7020              STRB     r0,[r4,#0]            ;2397
                  |L27.72|
;;;2403           }
;;;2404           DMA_SetCurrDataCounter(DMA1_Stream1,MAXRxTxLen);//设置DMA传输长度                                                        
000048  2180              MOVS     r1,#0x80
00004a  4628              MOV      r0,r5
00004c  f7fffffe          BL       DMA_SetCurrDataCounter
;;;2405           DMA_Cmd(DMA1_Stream1,ENABLE);  //开启DMA
000050  2101              MOVS     r1,#1
000052  4628              MOV      r0,r5
000054  f7fffffe          BL       DMA_Cmd
;;;2406           USART3_Recive_flg = 1;    //数据接收成功                                                  
000058  2001              MOVS     r0,#1
00005a  7060              STRB     r0,[r4,#1]
                  |L27.92|
;;;2407           
;;;2408       } 
;;;2409   }
00005c  bd70              POP      {r4-r6,pc}
                  |L27.94|
00005e  2080              MOVS     r0,#0x80              ;2397
000060  e7f1              B        |L27.70|
;;;2410   
                          ENDP

000062  0000              DCW      0x0000
                  |L27.100|
                          DCD      0x40004800
                  |L27.104|
                          DCD      0x40026028
                  |L27.108|
                          DCD      ||.data||

                          AREA ||i.USART_Configuration||, CODE, READONLY, ALIGN=2

                  USART_Configuration PROC
;;;2095   
;;;2096   void USART_Configuration(void)//串口初始化函数
000000  b570              PUSH     {r4-r6,lr}
;;;2097   {  
000002  b088              SUB      sp,sp,#0x20
;;;2098   	GPIO_InitTypeDef GPIO_InitStructure;
;;;2099   	USART_InitTypeDef USART_InitStructure;
;;;2100   	
;;;2101   	/* config USART1 clock */
;;;2102   	RCC_APB2PeriphClockCmd(RCC_APB2Periph_USART1, ENABLE);
000004  2101              MOVS     r1,#1
000006  2010              MOVS     r0,#0x10
000008  f7fffffe          BL       RCC_APB2PeriphClockCmd
;;;2103   	GPIO_PinAFConfig(GPIOA,GPIO_PinSource9,GPIO_AF_USART1);
00000c  4e2a              LDR      r6,|L28.184|
00000e  2207              MOVS     r2,#7
000010  2109              MOVS     r1,#9
000012  4630              MOV      r0,r6
000014  f7fffffe          BL       GPIO_PinAFConfig
;;;2104   	GPIO_PinAFConfig(GPIOA,GPIO_PinSource10,GPIO_AF_USART1);
000018  2207              MOVS     r2,#7
00001a  210a              MOVS     r1,#0xa
00001c  4630              MOV      r0,r6
00001e  f7fffffe          BL       GPIO_PinAFConfig
;;;2105   	/* USART1 GPIO config */
;;;2106   	/* Configure USART1 Tx (PA.09) as alternate function push-pull */
;;;2107   	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_9;
;;;2108   	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
000022  2502              MOVS     r5,#2
000024  1570              ASRS     r0,r6,#21             ;2107
000026  f88d5004          STRB     r5,[sp,#4]
;;;2109   	GPIO_InitStructure.GPIO_OType = GPIO_OType_PP;
00002a  2400              MOVS     r4,#0
00002c  9000              STR      r0,[sp,#0]            ;2108
00002e  f88d4006          STRB     r4,[sp,#6]
;;;2110   	GPIO_InitStructure.GPIO_Speed = GPIO_Speed_50MHz;
000032  f88d5005          STRB     r5,[sp,#5]
;;;2111   	GPIO_Init(GPIOA, &GPIO_InitStructure);    
000036  4669              MOV      r1,sp
000038  4630              MOV      r0,r6
00003a  f7fffffe          BL       GPIO_Init
;;;2112   	/* Configure USART1 Rx (PA.10) as input floating */
;;;2113   	GPIO_InitStructure.GPIO_Pin = GPIO_Pin_10;
00003e  0268              LSLS     r0,r5,#9
;;;2114   	GPIO_InitStructure.GPIO_Mode = GPIO_Mode_AF;
000040  9000              STR      r0,[sp,#0]
000042  f88d5004          STRB     r5,[sp,#4]
;;;2115   	GPIO_Init(GPIOA, &GPIO_InitStructure);
000046  4669              MOV      r1,sp
000048  4630              MOV      r0,r6
00004a  f7fffffe          BL       GPIO_Init
;;;2116   	
;;;2117   	/* USART1 mode config */
;;;2118   	USART_InitStructure.USART_BaudRate = 9600;
00004e  f44f5016          MOV      r0,#0x2580
;;;2119   	USART_InitStructure.USART_WordLength = USART_WordLength_8b;
000052  9002              STR      r0,[sp,#8]
;;;2120   	USART_InitStructure.USART_StopBits = USART_StopBits_1;
;;;2121   	USART_InitStructure.USART_Parity = USART_Parity_No ;
000054  f8ad4010          STRH     r4,[sp,#0x10]
;;;2122   	USART_InitStructure.USART_HardwareFlowControl = USART_HardwareFlowControl_None;
;;;2123   	USART_InitStructure.USART_Mode = USART_Mode_Rx | USART_Mode_Tx;
000058  200c              MOVS     r0,#0xc
;;;2124   	USART_Init(USART1, &USART_InitStructure);
00005a  4d18              LDR      r5,|L28.188|
00005c  f8ad400c          STRH     r4,[sp,#0xc]          ;2119
000060  f8ad0012          STRH     r0,[sp,#0x12]         ;2123
000064  f8ad400e          STRH     r4,[sp,#0xe]          ;2120
000068  f8ad4014          STRH     r4,[sp,#0x14]         ;2122
00006c  a902              ADD      r1,sp,#8
00006e  4628              MOV      r0,r5
000070  f7fffffe          BL       USART_Init
;;;2125   	
;;;2126   	/******使能串口接收中断******************/
;;;2127   	USART_ITConfig(USART1, USART_IT_RXNE, ENABLE);	
000074  2201              MOVS     r2,#1
000076  f2405125          MOV      r1,#0x525
00007a  4628              MOV      r0,r5
00007c  f7fffffe          BL       USART_ITConfig
;;;2128   	USART_Cmd(USART1, ENABLE);//使能串口1
000080  2101              MOVS     r1,#1
000082  4628              MOV      r0,r5
000084  f7fffffe          BL       USART_Cmd
;;;2129   	USART_ClearFlag(USART1, USART_FLAG_TC);
000088  2140              MOVS     r1,#0x40
00008a  4628              MOV      r0,r5
00008c  f7fffffe          BL       USART_ClearFlag
000090  f44f60e0          MOV      r0,#0x700
000094  f7fffffe          BL       NVIC_PriorityGroupConfig
000098  2025              MOVS     r0,#0x25
00009a  f88d0018          STRB     r0,[sp,#0x18]
00009e  f88d4019          STRB     r4,[sp,#0x19]
0000a2  2004              MOVS     r0,#4
0000a4  f88d001a          STRB     r0,[sp,#0x1a]
0000a8  2001              MOVS     r0,#1
0000aa  f88d001b          STRB     r0,[sp,#0x1b]
0000ae  a806              ADD      r0,sp,#0x18
0000b0  f7fffffe          BL       NVIC_Init
;;;2130     
;;;2131   	USART1_NVIC_Config();//串口中断配置
;;;2132   }			
0000b4  b008              ADD      sp,sp,#0x20
0000b6  bd70              POP      {r4-r6,pc}
;;;2133   
                          ENDP

                  |L28.184|
                          DCD      0x40020000
                  |L28.188|
                          DCD      0x40011000

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  UART_Buffer_Rece
                          %        16

                          AREA ||area_number.31||, DATA, NOINIT, ALIGN=0

                          EXPORTAS ||area_number.31||, ||.bss||
                  UART_Buffer_Send
                          %        20
                  USART_RX_BUF
                          %        200
                  MasterSendbuf
                          %        128
                  MasterRecbuf
                          %        128

                          AREA ||.data||, DATA, ALIGN=2

                  USART3_Recive_leng
000000  00                DCB      0x00
                  USART3_Recive_flg
000001  00                DCB      0x00
                  UART_Buffer_Send_pointer
000002  00                DCB      0x00
                  |symbol_number.106|
000003  00                DCB      0x00
                  Transmit_BUFFERsize
000004  00                DCB      0x00
                  MODE
000005  00                DCB      0x00
                  mainswitch
000006  00                DCB      0x00
                  Rraly
000007  00                DCB      0x00
                  sendwait
000008  00                DCB      0x00
                  listsend
000009  00                DCB      0x00
                  listocwatch
00000a  00                DCB      0x00
                  listpowwatch1
00000b  00                DCB      0x00
                  listpowwatch2
00000c  0000              DCB      0x00,0x00
                  USART_RX_STA
00000e  0000              DCW      0x0000
                  USART_RX_CNT
000010  0000              DCW      0x0000
000012  0000              DCB      0x00,0x00
                  ||x1||
                          DCD      0x00000000
                  ||y1||
                          DCD      0x00000000
                  ||x2||
                          DCD      0x00000000
                  ||y2||
                          DCD      0x00000000
                  ||x3||
                          DCD      0x00000000
                  ||y3||
                          DCD      0x00000000
                  ||x4||
                          DCD      0x00000000
                  ||y4||
                          DCD      0x00000000
                  ||x5||
                          DCD      0x00000000
                  ||y5||
                          DCD      0x00000000
                  ||x6||
                          DCD      0x00000000
                  ||y6||
                          DCD      0x00000000
                  ||x7||
                          DCD      0x00000000
                  ||y7||
                          DCD      0x00000000
                  ||x8||
                          DCD      0x00000000
                  ||y8||
                          DCD      0x00000000
                  watchtest
                          DCD      0x00000000
                  CmdStr
000058  53544154          DCB      0x53,0x54,0x41,0x54
00005c  55535f00          DCB      0x55,0x53,0x5f,0x00
000060  004d4f44          DCB      0x00,0x4d,0x4f,0x44
000064  5f000000          DCB      0x5f,0x00,0x00,0x00
000068  00005452          DCB      0x00,0x00,0x54,0x52
00006c  49475f00          DCB      0x49,0x47,0x5f,0x00
000070  00000053          DCB      0x00,0x00,0x00,0x53
000074  45545041          DCB      0x45,0x54,0x50,0x41
000078  52415f00          DCB      0x52,0x41,0x5f,0x00
00007c  5345544c          DCB      0x53,0x45,0x54,0x4c
000080  4953545f          DCB      0x49,0x53,0x54,0x5f
000084  004f5052          DCB      0x00,0x4f,0x50,0x52
000088  45534554          DCB      0x45,0x53,0x45,0x54
00008c  5f00504f          DCB      0x5f,0x00,0x50,0x4f
000090  57495f00          DCB      0x57,0x49,0x5f,0x00
000094  00000041          DCB      0x00,0x00,0x00,0x41
000098  4443565f          DCB      0x44,0x43,0x56,0x5f
00009c  00000000          DCB      0x00,0x00,0x00,0x00
0000a0  4c4f5749          DCB      0x4c,0x4f,0x57,0x49
0000a4  5f000000          DCB      0x5f,0x00,0x00,0x00
0000a8  00484f52          DCB      0x00,0x48,0x4f,0x52
0000ac  4c5f0000          DCB      0x4c,0x5f,0x00,0x00
0000b0  00004c56          DCB      0x00,0x00,0x4c,0x56
0000b4  4c5f0000          DCB      0x4c,0x5f,0x00,0x00
0000b8  00000053          DCB      0x00,0x00,0x00,0x53
0000bc  57495443          DCB      0x57,0x49,0x54,0x43
0000c0  485f0000          DCB      0x48,0x5f,0x00,0x00
0000c4  43414c56          DCB      0x43,0x41,0x4c,0x56
0000c8  5f000000          DCB      0x5f,0x00,0x00,0x00
0000cc  0043414c          DCB      0x00,0x43,0x41,0x4c
0000d0  495f0000          DCB      0x49,0x5f,0x00,0x00
0000d4  00004341          DCB      0x00,0x00,0x43,0x41
0000d8  4c525f00          DCB      0x4c,0x52,0x5f,0x00
0000dc  00000044          DCB      0x00,0x00,0x00,0x44
0000e0  41435f00          DCB      0x41,0x43,0x5f,0x00
0000e4  00000000          DCB      0x00,0x00,0x00,0x00
0000e8  4f564552          DCB      0x4f,0x56,0x45,0x52
0000ec  5f000000          DCB      0x5f,0x00,0x00,0x00
0000f0  0054454d          DCB      0x00,0x54,0x45,0x4d
0000f4  505f0000          DCB      0x50,0x5f,0x00,0x00
0000f8  0000424f          DCB      0x00,0x00,0x42,0x4f
0000fc  4f545f00          DCB      0x4f,0x54,0x5f,0x00
000100  000000            DCB      0x00,0x00,0x00

                          AREA ||area_number.34||, DATA, ALIGN=0

                          EXPORTAS ||area_number.34||, ||.data||
                  UART_Buffer_Size
000000  00                DCB      0x00

                          AREA ||area_number.35||, DATA, ALIGN=0

                          EXPORTAS ||area_number.35||, ||.data||
                  t_USART
000000  00                DCB      0x00

                          AREA ||area_number.36||, DATA, ALIGN=2

                          EXPORTAS ||area_number.36||, ||.data||
                  powsetdelay
                          DCD      0x00000000

;*** Start embedded assembler ***

#line 1 "..\\drive\\usart.c"
	AREA ||.rev16_text||, CODE
	THUMB
	EXPORT |__asm___7_usart_c_7cc17ae7____REV16|
#line 129 "C:\\Keil_v5\\ARM\\CMSIS\\Include\\core_cmInstr.h"
|__asm___7_usart_c_7cc17ae7____REV16| PROC
#line 130

 rev16 r0, r0
 bx lr
	ENDP
	AREA ||.revsh_text||, CODE
	THUMB
	EXPORT |__asm___7_usart_c_7cc17ae7____REVSH|
#line 144
|__asm___7_usart_c_7cc17ae7____REVSH| PROC
#line 145

 revsh r0, r0
 bx lr
	ENDP

;*** End   embedded assembler ***
